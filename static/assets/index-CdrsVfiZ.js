import{r as x,j as e,R as Ts}from"./react-Br03UGga.js";import{c as st}from"./react-dom-CXjRQ38-.js";import{c as rt,O as Ps,a as ee,u as Qe,L as Me,b as R,q as nt,r as qe,d as H,e as at,f as $,g as Qr,h as Is,i as Wr,j as tt,k as it,l as lt,Q as ot,m as ct,n as dt,R as ut}from"./@tanstack-oDkGLplT.js";import{S as ur,c as Jr,d as Yr,e as mt,f as xt,g as ht,M as jt,h as pt,L as ft,i as Zr,V as gt,j as vt,k as Xr,l as yt,I as bt,m as Nt,H as wt,n as en,o as sn,p as rn,q as Ct,O as nn,C as an,a as tn,r as St,b as ln,D as on,R as Pt,T as kt,P as Et,s as ss,t as cn,u as dn,F as un,v as mn,w as xn,x as Dt,y as as,z as hn,A as At,B as mr,E as jn,G as It,J as pn,K as Ke,N as qt,Q as fn,U as Ft,W as gn,X as vn,Y as Mt,Z as Rt,_ as yn,$ as $t,a0 as Tt,a1 as zt,a2 as Lt,a3 as Vt,a4 as bn,a5 as Ot,a6 as Ht,a7 as _t,a8 as Kt,a9 as Nn,aa as wn,ab as Gt,ac as Bt,ad as Cn,ae as Se,af as Sn,ag as Ut,ah as Pn,ai as Qt,aj as Wt,ak as Jt,al as ks,am as Yt,an as nr,ao as xr,ap as hr,aq as Zt,ar as Xt,as as ei,at as si,au as ri,av as ni,aw as ai,ax as ti,ay as jr,az as kn,aA as ys,aB as En,aC as ii,aD as rr}from"./@radix-ui-Kb1PY99J.js";import{c as zs}from"./class-variance-authority-Bb4qSo10.js";import{c as li}from"./clsx-B-dksMZM.js";import{t as oi}from"./tailwind-merge-BkWO730n.js";import{h as ci}from"./hono-BIDhS5tk.js";import{z as m,o as pr,a as Dn,s as fr,n as Lr}from"./zod-BBXkQCNd.js";import{J as k,T as di}from"./sonner-3Zh5T5tm.js";import{t as V}from"./@hookform-CeXZE8cl.js";import{F as gr,C as ui,u as Ls,b as O}from"./react-hook-form-SbxX6VO5.js";import{D as $e}from"./vaul-pyaUF5jJ.js";import{M as mi}from"./react-markdown-WrCymGPl.js";import{r as xi}from"./remark-gfm-BWWMSFNx.js";import{A as ps,m as Ce}from"./framer-motion-DIdScvQi.js";import{l as An}from"./socket.io-client-DFi9RC7o.js";import{C as ie,F as In,G as hi,o as ar,H as ji,I as hs,J as qs,K as Fs,L as qn,M as Fn,N as Mn,O as Rn,s as $n,f as Tn,n as zn,a as Ln}from"./date-fns-CB5B4YAy.js";import{L as Pe}from"./cmdk-WeJB1cCl.js";import{u as pi}from"./react-dropzone-1wkpBS2z.js";import{u as fi}from"./embla-carousel-react-DqBf5Fmg.js";import{m as gi}from"./react-autosave-Tf4E9Dmj.js";import{j as vi,x as yi,F as bi}from"./input-otp-DjtBxOK7.js";import{D as Ni}from"./react-day-picker-B7FS6y-C.js";import{p as wi}from"./pdfmake-Dv0FiMCP.js";import{F as Ci,S as Si,P as Pi,D as ki,a as Ei,V as ls,T as Ee}from"./@react-pdf-C_PHSuIR.js";import{d as Vn,C as On}from"./react-big-calendar-Bjxco-KW.js";/* empty css                    */import"./abs-svg-path-Dso-qW0r.js";import"./tiny-invariant-CopsF_GD.js";import"./tiny-warning-Dirz_SfZ.js";import"./use-sync-external-store-DM9ypAoZ.js";import"./react-remove-scroll-CvDvEYY4.js";import"./tslib-DKDK4VFz.js";import"./react-remove-scroll-bar-C9wRjE_q.js";import"./react-style-singleton-CcNJsGzz.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-Bar9KBnP.js";import"./use-callback-ref-C2M7nMyD.js";import"./aria-hidden-DQ5UC2Eg.js";import"./@floating-ui-BjvVJxnC.js";import"./devlop-Cl3hj7Sz.js";import"./unified-BrNkd6qt.js";import"./bail-FqpXQuLt.js";import"./extend-CTQ1Zzpe.js";import"./is-plain-obj-C1gvLhAf.js";import"./trough-B_b8ryxu.js";import"./vfile-tbz-BywF.js";import"./vfile-message-Bq256rVA.js";import"./unist-util-stringify-position-Ch_qCilz.js";import"./remark-parse-PFb__MD6.js";import"./mdast-util-from-markdown-BvD3T9Wt.js";import"./micromark-util-decode-numeric-character-reference-CNs1qBpV.js";import"./micromark-util-decode-string-strjl-tx.js";import"./decode-named-character-reference-C3-224fz.js";import"./micromark-util-normalize-identifier-C9ANKk3v.js";import"./micromark-Cp9IgYwT.js";import"./micromark-util-combine-extensions-Bka6Sc1c.js";import"./micromark-util-chunked-DrRIdSP-.js";import"./micromark-factory-space-Bzki161k.js";import"./micromark-util-character-Cn8n62xE.js";import"./micromark-core-commonmark-D5SA4aCp.js";import"./micromark-util-classify-character-72LGz2mN.js";import"./micromark-util-resolve-all-PQCKh0dx.js";import"./micromark-util-subtokenize-BcSgYDy4.js";import"./micromark-factory-destination-Dhx6mInV.js";import"./micromark-factory-label-Dm2aTycn.js";import"./micromark-factory-title-B-Q3zsGF.js";import"./micromark-factory-whitespace-DxqLJ6OX.js";import"./micromark-util-html-tag-name-DbKNfynz.js";import"./mdast-util-to-string-C_aolqmU.js";import"./remark-rehype-DNC-thMq.js";import"./mdast-util-to-hast-DWFPJkWc.js";import"./@ungap-DDJC10qW.js";import"./micromark-util-sanitize-uri-B1mpwOqX.js";import"./unist-util-position-60F3QETU.js";import"./trim-lines-D8znQY54.js";import"./unist-util-visit-BEqpjG-T.js";import"./unist-util-visit-parents-BzuIhZFT.js";import"./unist-util-is-D9KQvrmg.js";import"./hast-util-to-jsx-runtime-C3hVrh_1.js";import"./comma-separated-tokens-xMQ5YY98.js";import"./property-information-C2mYTYrW.js";import"./space-separated-tokens-DD3iYX1K.js";import"./style-to-object-CUVqmPhi.js";import"./inline-style-parser-D--Rb2MU.js";import"./hast-util-whitespace-D4Wp6AEg.js";import"./estree-util-is-identifier-name-BgBfM8ME.js";import"./html-url-attributes-D46m5wfe.js";import"./micromark-extension-gfm-DKDoHsnq.js";import"./micromark-extension-gfm-autolink-literal-DLPcB62U.js";import"./micromark-extension-gfm-footnote-CfuxHbgG.js";import"./micromark-extension-gfm-strikethrough-DRvqaQ9w.js";import"./micromark-extension-gfm-table-DL38QGqH.js";import"./micromark-extension-gfm-task-list-item-CQ-9H0He.js";import"./mdast-util-gfm-Dvfr80Bz.js";import"./mdast-util-gfm-autolink-literal-BmijSaoZ.js";import"./ccount-c2V3InAJ.js";import"./mdast-util-find-and-replace-Cmrefh_I.js";import"./mdast-util-gfm-footnote-DDcgsGKB.js";import"./mdast-util-gfm-strikethrough-Cj9qKt6Q.js";import"./mdast-util-gfm-table-D2quw1JG.js";import"./markdown-table-De3aUdCo.js";import"./mdast-util-to-markdown-axH5eqwW.js";import"./longest-streak-CtXnX3Xp.js";import"./mdast-util-phrasing-C4Vf_nAi.js";import"./mdast-util-gfm-task-list-item-CbpHDP9z.js";import"./engine.io-client-DBBxzneW.js";import"./engine.io-parser-BiEtp6m2.js";import"./@socket.io-Dkula2eQ.js";import"./socket.io-parser-BBkuslX-.js";import"./@babel-BNSluuVX.js";import"./command-score-CdZsI_T5.js";import"./prop-types-VroKYPLi.js";import"./file-selector-Dcsg2Zco.js";import"./attr-accept-DLIfoYC7.js";import"./embla-carousel-reactive-utils-DkegjUUZ.js";import"./embla-carousel-CFQXY_2V.js";import"./queue-DtzQbffp.js";import"./inherits-BlmhoU4v.js";import"./events-CXH2uRM3.js";import"./cross-fetch-DKHYuDxr.js";import"./fontkit-CPqvPrXW.js";import"./restructure-CUPBqmOV.js";import"./fast-deep-equal-Bsh2bDgh.js";import"./unicode-properties-BsbElHii.js";import"./unicode-trie-BuZna2W-.js";import"./tiny-inflate-DJpc2T9_.js";import"./dfa-DFdO-l1T.js";import"./clone-DGokiMOf.js";import"./brotli-BRzaZrQY.js";import"./parse-svg-path-Bnilt6xe.js";import"./normalize-svg-path-Z80YSenV.js";import"./svg-arc-to-cubic-bezier-DJPsRx1k.js";import"./color-string-Cw5n8s-w.js";import"./color-name-BQ5IbGbl.js";import"./simple-swizzle-BUB9Iq-C.js";import"./is-arrayish-BII_q15j.js";import"./pako-CXKkNSu9.js";import"./crypto-js-CdNWmKdt.js";import"./jay-peg-9XRAdcrS.js";import"./postcss-value-parser-CWJYHz1P.js";import"./hsl-to-hex-CS2JllxK.js";import"./hsl-to-rgb-for-reals-oDjdnoeQ.js";import"./media-engine-Ct24E6BR.js";import"./bidi-js-Dpu9EnKw.js";import"./hyphen-gnAGIglc.js";import"./yoga-layout-B2tHbTu8.js";import"./emoji-regex-D90yNSKR.js";import"./object-assign-CI2nRwra.js";import"./scheduler-CVQqQYeO.js";import"./invariant-Ddke41Ko.js";import"./uncontrollable-VqF3m3sV.js";import"./react-lifecycles-compat-AfN2QaV3.js";import"./date-arithmetic-DrY26MJF.js";import"./lodash-DXuEEvdz.js";import"./dom-helpers-BNdFi2c_.js";import"./react-overlays-DVAtWnNG.js";import"./@restart-ClYjYWPz.js";import"./@popperjs-DMGSESOy.js";import"./warning-TJNNsYhq.js";import"./memoize-one-BdPwpGay.js";import"./dayjs-CQCwAeoS.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&t(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();const Di={theme:"system",setTheme:()=>null},Hn=x.createContext(Di);function Ai({children:s,defaultTheme:r="system",storageKey:n="vite-ui-theme",...t}){const[a,i]=x.useState(()=>localStorage.getItem(n)||r);x.useEffect(()=>{const o=window.document.documentElement;if(o.classList.remove("light","dark"),a==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";o.classList.add(c);return}o.classList.add(a)},[a]);const l={theme:a,setTheme:o=>{localStorage.setItem(n,o),i(o)}};return e.jsx(Hn.Provider,{...t,value:l,children:s})}const vr=()=>{const s=x.useContext(Hn);if(s===void 0)throw new Error("useTheme must be used within a ThemeProvider");return s},Te=rt()({component:Ii});function Ii(){return e.jsx(e.Fragment,{children:e.jsx(Ps,{})})}function q(...s){return oi(li(s))}const Ms=zs("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-accent text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),D=x.forwardRef(({className:s,variant:r,size:n,asChild:t=!1,...a},i)=>{const l=t?ur:"button";return e.jsx(l,{className:q(Ms({variant:r,size:n,className:s})),ref:i,...a})});D.displayName="Button";const qi=ci("/"),F=qi.api,_n="http://localhost:4000",Fi=m.object({password:m.string({required_error:"Este campo es requerido"}).min(6,{message:"La clave debe contener al menos 6 caracteres"}).max(12,{message:"La clave debe tener 12 caracteres como máximo"}),email:m.string({required_error:"Este campo es requerido"}).email({message:"Ingrese un email válido"})}),Mi=m.object({email:m.string().email({message:"Ingrese un email válido"}),token:m.string().length(64,{message:"Token de verificación incorrecto"})}),Ri=m.object({email:m.string({required_error:"Este campo es requerido"}).email({message:"Ingrese un email válido"})}),$i=m.object({email:m.string().email({message:"Ingrese un email válido"}),token:m.string().length(64,{message:"Token de verificación incorrecto"}),newPassword:m.string({required_error:"Este campo es requerido"}).min(6,{message:"La clave debe contener al menos 6 caracteres"}).max(12,{message:"La clave debe tener 12 caracteres como máximo"}),confirmPass:m.string({required_error:"Este campo es requerido"}).min(6,{message:"La clave debe contener al menos 6 caracteres"}).max(12,{message:"La clave debe tener 12 caracteres como máximo"})}).refine(s=>s.newPassword===s.confirmPass,{message:"Las claves no coinciden",path:["confirmPass"]}),Rs=({className:s})=>e.jsxs("svg",{"aria-hidden":"true",role:"status",className:q("inline",s),viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"#E5E7EB"}),e.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentColor"})]}),Vr=zs("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),T=x.forwardRef(({className:s,variant:r,size:n,asChild:t=!1,loading:a,children:i,...l},o)=>t?e.jsx(ur,{ref:o,...l,children:e.jsx(e.Fragment,{children:x.Children.map(i,c=>x.cloneElement(c,{className:q(Vr({variant:r,size:n}),s),children:e.jsxs(e.Fragment,{children:[a&&e.jsx(Rs,{className:q("h-4 w-4 animate-spin",i&&"mr-2")}),c.props.children]})}))})}):e.jsx("button",{className:q(Vr({variant:r,size:n,className:s})),disabled:a,ref:o,...l,children:e.jsxs(e.Fragment,{children:[a&&e.jsx(Rs,{className:q("h-4 w-4 animate-spin",i&&"mr-2")}),i]})}));T.displayName="LoadingButton";const Kn=ee("/verify")({async validateSearch({email:s,token:r}){return s&&r},component:Ti});function Ti(){const s=Qe(),{email:r,token:n}=Kn.useSearch(),[t,a]=x.useState(!1),[i,l]=x.useState(""),o=async()=>{(!r||!n)&&s({to:"/login"}),a(!0);const c=Mi.safeParse({email:r,token:n});if(!c.success){k.error("Ocurrió un error");return}const d=await(await F.auth.verifyEmail.$post({json:c.data})).json();d.success||k.error(d.error),k.success("Tu correo ha sido verificado"),l(""),a(!1),s({to:"/login"})};return e.jsx("section",{className:"flex flex-col items-center justify-center h-screen",children:e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 rounded-lg shadow-md",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Verifica tu Email"}),e.jsx("img",{width:300,height:300,src:"/sub.svg",alt:"logo"}),e.jsx(T,{loading:t,disabled:t,type:"submit",onClick:o,className:"my-3  w-full inline-flex items-center",children:"Verificar mi Email"}),i&&e.jsx("p",{className:"text-red-500",children:i}),e.jsx(D,{disabled:t,variant:"outline",className:"w-full",children:e.jsx(Me,{to:"/login",children:"Regresar al Login"})})]})})}const zi=ee("/restricted")({component:Li});function Li(){return e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[e.jsx("img",{alt:"Unauthorized",className:"mt-20",src:"/acces.svg",width:"200"}),e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tighter sm:text-4xl",children:"No autorizado ..."}),e.jsx("p",{className:"text-center max-w-[600px] text-sm/relaxed dark:text-gray-400",children:"Parece que no tienes permiso para acceder a esta página."}),e.jsx(D,{children:e.jsx(Me,{to:"/login",children:"Login"})})]})]})}const I=x.forwardRef(({className:s,type:r,...n},t)=>e.jsx("input",{type:r,className:q("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...n}));I.displayName="Input";function Or(s){return e.jsxs("svg",{...s,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M21 6h-4a3 3 0 0 0 0 6h1a3 3 0 0 1 0 6h-4"}),e.jsx("path",{d:"M10 18h-1a6 6 0 1 1 0 -12h1"}),e.jsx("path",{d:"M17 20v-2"}),e.jsx("path",{d:"M18 6v-2"})]})}function Gn(s){return e.jsx("svg",{...s,"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 16",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"})})}function cs(s){return e.jsxs("svg",{...s,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]})}function ds(){return e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})})}function Vi(s){return e.jsxs("svg",{...s,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"5",height:"5",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"5",height:"5",x:"16",y:"3",rx:"1"}),e.jsx("rect",{width:"5",height:"5",x:"3",y:"16",rx:"1"}),e.jsx("path",{d:"M21 16h-3a2 2 0 0 0-2 2v3"}),e.jsx("path",{d:"M21 21v.01"}),e.jsx("path",{d:"M12 7v3a2 2 0 0 1-2 2H7"}),e.jsx("path",{d:"M3 12h.01"}),e.jsx("path",{d:"M12 3h.01"}),e.jsx("path",{d:"M12 16v.01"}),e.jsx("path",{d:"M16 12h1"}),e.jsx("path",{d:"M21 12v.01"}),e.jsx("path",{d:"M12 21v-1"})]})}function Oi(s){return e.jsxs("svg",{...s,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M8 2v4"}),e.jsx("path",{d:"M16 2v4"}),e.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2"}),e.jsx("path",{d:"M3 10h18"}),e.jsx("path",{d:"M8 14h.01"}),e.jsx("path",{d:"M12 14h.01"}),e.jsx("path",{d:"M16 14h.01"}),e.jsx("path",{d:"M8 18h.01"}),e.jsx("path",{d:"M12 18h.01"}),e.jsx("path",{d:"M16 18h.01"})]})}function Hi(s){return e.jsxs("svg",{...s,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]})}function _i(s){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",...s,width:"24",height:"24",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M6.081 20c1.612 0 2.919 -1.335 2.919 -2.98v-9.763c0 -.694 -.552 -1.257 -1.232 -1.257c-.205 0 -.405 .052 -.584 .15l-.13 .083c-1.46 1.059 -2.432 2.647 -3.404 5.824c-.42 1.37 -.636 2.962 -.648 4.775c-.012 1.675 1.261 3.054 2.877 3.161l.203 .007z"}),e.jsx("path",{d:"M17.92 20c-1.613 0 -2.92 -1.335 -2.92 -2.98v-9.763c0 -.694 .552 -1.257 1.233 -1.257c.204 0 .405 .052 .584 .15l.13 .083c1.46 1.059 2.432 2.647 3.405 5.824c.42 1.37 .636 2.962 .648 4.775c.012 1.675 -1.261 3.054 -2.878 3.161l-.202 .007z"}),e.jsx("path",{d:"M9 12a3 3 0 0 0 3 -3a3 3 0 0 0 3 3"}),e.jsx("path",{d:"M12 4v5"})]})}function Ki(s){return e.jsx("svg",{...s,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15 11.25 1.5 1.5.75-.75V8.758l2.276-.61a3 3 0 1 0-3.675-3.675l-.61 2.277H12l-.75.75 1.5 1.5M15 11.25l-8.47 8.47c-.34.34-.8.53-1.28.53s-.94.19-1.28.53l-.97.97-.75-.75.97-.97c.34-.34.53-.8.53-1.28s.19-.94.53-1.28L12.75 9M15 11.25 12.75 9"})})}function Hr(s){return e.jsxs("svg",{...s,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"}),e.jsx("path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27"})]})}function rs(s){return e.jsxs("svg",{...s,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z"}),e.jsx("path",{d:"m14.5 12.5 2-2"}),e.jsx("path",{d:"m11.5 9.5 2-2"}),e.jsx("path",{d:"m8.5 6.5 2-2"}),e.jsx("path",{d:"m17.5 15.5 2-2"})]})}function Gi(s){return e.jsxs("svg",{...s,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"5",r:"3"}),e.jsx("path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z"})]})}const Bi=zs("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Z=x.forwardRef(({className:s,...r},n)=>e.jsx(Jr,{ref:n,className:q(Bi(),s),...r}));Z.displayName=Jr.displayName;const G=gr,Bn=x.createContext({}),w=({...s})=>e.jsx(Bn.Provider,{value:{name:s.name},children:e.jsx(ui,{...s})}),Vs=()=>{const s=x.useContext(Bn),r=x.useContext(Un),{getFieldState:n,formState:t}=Ls(),a=n(s.name,t);if(!s)throw new Error("useFormField should be used within <FormField>");const{id:i}=r;return{id:i,name:s.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},Un=x.createContext({}),f=x.forwardRef(({className:s,...r},n)=>{const t=x.useId();return e.jsx(Un.Provider,{value:{id:t},children:e.jsx("div",{ref:n,className:q("space-y-2",s),...r})})});f.displayName="FormItem";const p=x.forwardRef(({className:s,...r},n)=>{const{error:t,formItemId:a}=Vs();return e.jsx(Z,{ref:n,className:q(t&&"text-destructive",s),htmlFor:a,...r})});p.displayName="FormLabel";const y=x.forwardRef(({...s},r)=>{const{error:n,formItemId:t,formDescriptionId:a,formMessageId:i}=Vs();return e.jsx(ur,{ref:r,id:t,"aria-describedby":n?`${a} ${i}`:`${a}`,"aria-invalid":!!n,...s})});y.displayName="FormControl";const xe=x.forwardRef(({className:s,...r},n)=>{const{formDescriptionId:t}=Vs();return e.jsx("p",{ref:n,id:t,className:q("text-[0.8rem] text-muted-foreground",s),...r})});xe.displayName="FormDescription";const C=x.forwardRef(({className:s,children:r,...n},t)=>{const{error:a,formMessageId:i}=Vs(),l=a?String(a==null?void 0:a.message):r;return l?e.jsx("p",{ref:t,id:i,className:q("text-[0.8rem] font-medium text-destructive",s),...n,children:l}):null});C.displayName="FormMessage";const Y=mt,W=xt,J=ht,K=x.forwardRef(({className:s,sideOffset:r=4,...n},t)=>e.jsx(Yr,{ref:t,sideOffset:r,className:q("z-50 overflow-hidden rounded-md dark:bg-green-700 bg-green-400 font-semibold px-3 py-2 text-sm text-foreground animate-in fade-in-0 zoom-in-10 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n}));K.displayName=Yr.displayName;function yr(){const{theme:s,setTheme:r}=vr(),n=()=>{r(s==="light"?"dark":"light")};return e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{children:e.jsx(D,{variant:"ghost",size:"icon",onClick:n,children:s==="light"?e.jsx(jt,{className:""}):e.jsx(pt,{className:""})})}),e.jsx(K,{children:s==="light"?"Modo oscuro":"Modo claro"})]})})}const Ui=m.object({email:m.string().email({message:"Ingrese un email válido"}),token:m.string().length(64,{message:"Token de verificación incorrecto"})}),Qn=ee("/reset")({async validateSearch({email:s,token:r}){return s&&r},component:Qi});function Qi(){const s=Qn.useSearch(),r=Ui.safeParse(s);if(!r.success)return e.jsx("div",{className:"min-h-screen w-full flex items-center justify-center ",children:e.jsx("p",{className:"text-destructive-foreground font-semibold bg-destructive p-4 rounded-sm ",children:"Datos erroneos, favor busque el enlace correcto en su correo"})});const{email:n,token:t}=r.data,a=Qe(),i=O({resolver:V($i),defaultValues:{email:n,token:t,newPassword:"",confirmPass:""}}),[l,o]=x.useState(!1),[c,u]=x.useState(!1),d=()=>o(!l),h=()=>u(!c),v=R({mutationFn:async b=>{const A=await(await F.auth.reset.$patch({json:b})).json();A.success?(k.success("Tu clave ha sido actualizada correctamente"),a({to:"/login",from:"/reset"})):k.error(A.error)}}),j=b=>{v.mutate(b)};return e.jsxs("div",{className:"relative min-h-screen isolate overflow-hidden border-b border-gray-200 flex items-center justify-center",children:[e.jsxs("svg",{className:"absolute inset-0 -z-10 h-full w-full stroke-gray-200 [mask-image:radial-gradient(100%_100%_at_top_right,white,transparent)]","aria-hidden":"true",children:[e.jsx("defs",{children:e.jsx("pattern",{id:"0787a7c5-978c-4f66-83c7-11c213f99cb7",width:200,height:200,x:"50%",y:-1,patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M.5 200V.5H200",fill:"none"})})}),e.jsx("rect",{width:"100%",height:"100%",strokeWidth:0,fill:"url(#0787a7c5-978c-4f66-83c7-11c213f99cb7)"})]}),e.jsxs("div",{className:"bg-background border rounded-xl   w-full max-w-sm mx-auto p-6",children:[e.jsx("h1",{className:"text-center text-ring tracking-tight text-2xl sm:text-3xl font-bold mb-6",children:"Reestablecer tu Clave"}),e.jsx("div",{children:e.jsx(G,{...i,children:e.jsxs("form",{className:"space-y-6",onSubmit:i.handleSubmit(j),children:[e.jsx(w,{control:i.control,name:"newPassword",render:({field:b})=>e.jsxs(f,{children:[e.jsx(p,{children:"Nueva Clave"}),e.jsx(y,{children:e.jsxs("div",{className:"relative",children:[e.jsx(I,{onChange:b.onChange,value:b.value,disabled:v.isPending,type:l?"text":"password",placeholder:"******",className:"w-full px-4 py-2 bg-background"}),e.jsx("button",{type:"button",disabled:v.isPending,onClick:d,className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:l?e.jsx(ds,{}):e.jsx(cs,{})})]})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"confirmPass",render:({field:b})=>e.jsxs(f,{children:[e.jsx(p,{children:"Confirmar Clave"}),e.jsx(y,{children:e.jsxs("div",{className:"relative",children:[e.jsx(I,{onChange:b.onChange,value:b.value,disabled:v.isPending,type:c?"text":"password",placeholder:"******",className:"w-full px-4 py-2 bg-background"}),e.jsx("button",{type:"button",disabled:v.isPending,onClick:h,className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:c?e.jsx(ds,{}):e.jsx(cs,{})})]})}),e.jsx(C,{})]})}),e.jsx("div",{className:"mt-4",children:e.jsx(T,{loading:v.isPending,type:"submit",disabled:v.isPending,className:"w-full",children:"Actualizar contraseña"})})]})})}),e.jsxs("div",{className:"w-full justify-between flex items-center mt-4 sm:mt-10",children:[e.jsx("p",{className:"text-xs",children:"Clinica de especialidades FAMED Matagalpa"}),e.jsx(yr,{})]})]})]})}const Wi=ee("/login")({component:Ji});function Ji(){const s=Qe(),[r,n]=x.useState(!1),t=O({resolver:V(Fi)}),a=()=>{n(!r)},i=R({mutationFn:async o=>{const u=await(await F.auth.$post({json:o})).json();if(!u.success){k.error(u.error);return}u.role==="DOCTOR"&&s({to:"/doctor/upcoming",from:"/login"}),u.role==="ADMIN"&&s({to:"/admin/users",from:"/login"}),u.role==="ASSISTANT"&&s({to:"/assistant/dates",from:"/login"})}}),l=async o=>i.mutate(o);return e.jsxs("div",{className:"relative min-h-screen isolate overflow-hidden border-b border-gray-200 flex items-center justify-center",children:[e.jsxs("svg",{className:"absolute inset-0 -z-10 h-full w-full stroke-gray-200 [mask-image:radial-gradient(100%_100%_at_top_right,white,transparent)]","aria-hidden":"true",children:[e.jsx("defs",{children:e.jsx("pattern",{id:"0787a7c5-978c-4f66-83c7-11c213f99cb7",width:200,height:200,x:"50%",y:-1,patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M.5 200V.5H200",fill:"none"})})}),e.jsx("rect",{width:"100%",height:"100%",strokeWidth:0,fill:"url(#0787a7c5-978c-4f66-83c7-11c213f99cb7)"})]}),e.jsxs("div",{className:"bg-background border rounded-xl   w-full max-w-sm mx-auto p-6",children:[e.jsx("h1",{className:"text-center text-ring tracking-tight text-2xl sm:text-3xl font-bold mb-6",children:"Iniciar Sesión"}),e.jsx("div",{children:e.jsx(G,{...t,children:e.jsxs("form",{className:"space-y-6",onSubmit:t.handleSubmit(l),children:[e.jsx(w,{control:t.control,name:"email",disabled:i.isPending,render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{children:"Email"}),e.jsx(y,{children:e.jsx(I,{...o,className:"w-full bg-background",placeholder:"john@gmail.com",type:"email"})}),e.jsx(C,{})]})}),e.jsx(w,{control:t.control,name:"password",disabled:i.isPending,render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{children:"Clave"}),e.jsx(y,{children:e.jsxs("div",{className:"relative",children:[e.jsx(I,{...o,type:r?"text":"password",placeholder:"******",className:"w-full px-4 py-2 bg-background"}),e.jsx("button",{type:"button",onClick:a,className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:r?e.jsx(ds,{}):e.jsx(cs,{})})]})}),e.jsx(C,{})]})}),e.jsx(D,{disabled:i.isPending,size:"sm",variant:"link",asChild:!0,className:"font-normal mt-2",children:e.jsx(Me,{to:"/forgot",children:"¿Olvidaste tu clave?"})}),e.jsx(T,{loading:i.isPending,disabled:i.isPending,className:"mt-4 w-full inline-flex items-center justify-center",type:"submit",children:"Iniciar Sesión"})]})})}),e.jsxs("div",{className:"w-full justify-between flex items-center mt-4 sm:mt-10",children:[e.jsx("p",{className:"text-xs",children:"Clinica de especialidades FAMED Matagalpa"}),e.jsx(yr,{})]})]})]})}const Yi=ee("/forgot")({component:Zi});function Zi(){var i;const[s,r]=x.useState(!1),n=O({resolver:V(Ri)}),t=l=>{a.mutate(l)},a=R({mutationFn:async l=>{const c=await(await F.auth.sendEmailForgot.$post({json:l})).json();console.log(c),c.success?r(!0):n.setError("email",{type:"manual",message:c.error||"Failed to send email."})}});return e.jsx("section",{className:"flex flex-col items-center justify-center h-screen",children:e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 ",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Recuperar clave"}),e.jsx("img",{width:300,height:300,src:"/sub.svg",alt:"logo"}),s?e.jsx("div",{className:" my-4 text-center font-semibold text-green-600",children:"Correo de recuperación enviado. Por favor, revisa tu bandeja de entrada."}):e.jsxs("div",{className:"my-4 w-full",children:[e.jsx(G,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(t),children:[e.jsx(w,{control:n.control,name:"email",render:({field:l})=>e.jsxs(f,{children:[e.jsx(p,{htmlFor:"email",children:"Correo electrónico"}),e.jsx(y,{children:e.jsx(I,{...l,id:"email",disabled:a.isPending,type:"text",placeholder:"Ingresa tu correo"})}),e.jsx(C,{})]})}),e.jsx("div",{className:"flex justify-center w-full",children:e.jsx(T,{className:"my-3  w-full",loading:a.isPending,type:"submit",children:"Recuperar"})})]})}),a.isError&&e.jsx("div",{className:"text-red-600 mt-2 text-center font-semibold","aria-live":"polite",children:((i=a.error)==null?void 0:i.message)||"Ocurrió un error al enviar el correo."})]}),e.jsx(T,{disabled:a.isPending,variant:"outline",className:"w-full",children:e.jsx(Me,{to:"/login",children:"Regresar al Login"})})]})})}const Xi=ee("/")({component:el});function el(){return e.jsxs("div",{className:"h-[40rem] w-full dark:bg-black bg-white dark:bg-grid-white/[0.2] bg-grid-black/[0.2] relative flex flex-col items-center justify-center",children:[e.jsx("div",{className:"absolute pointer-events-none inset-0 items-center justify-center dark:bg-black bg-white [mask-image:radial-gradient(ellipse_at_center,transparent_20%,black)]"}),e.jsx("div",{className:"relative p-2 rounded-sm mb-2",style:{backgroundColor:"rgba(30, 64, 175, 0.8)"},children:e.jsx("p",{className:"text-4xl sm:text-4xl font-semibold relative z-20 bg-clip-text  py-4",children:"Clinica de especialidades FAMED"})}),e.jsx("div",{className:"relative",children:e.jsx(D,{children:e.jsx(Me,{to:"/login",children:"Login"})})})]})}async function sl(){const s=await F.auth.verify.$get();if(!s.ok)throw console.error("Error al obtener el usuario"),qe({to:"/login"});return(await s.json()).data}const ts=nt({queryKey:["currentUser"],queryFn:sl,staleTime:1/0}),rl=ee("/profile/_profile")({beforeLoad:async({context:s})=>{try{if(!await s.queryClient.fetchQuery(ts))throw qe({to:"/login"})}catch{throw qe({to:"/login"})}},component:nl});function nl(){return e.jsx(e.Fragment,{children:e.jsx(Ps,{})})}function al(){const s=Qe(),r=H(),n=R({mutationFn:async()=>k.promise(F.auth.logout.$get().then(a=>a.json()),{loading:"Cerrando sesión...",success:a=>{if(!a.success)throw new Error("Ocurrió un error al cerrar la sesión");return"Sesión cerrada con éxito"},error:"Error al cerrar la sesión"}),onSuccess:()=>{r.clear(),s({to:"/login"})},onError:()=>{k.error("Ocurrió un error inesperado al cerrar la sesión"),r.clear(),s({to:"/login"})}}),t=()=>{k.custom(a=>e.jsxs("div",{className:"p-4 bg-destructive border rounded-sm  ",children:[e.jsx("div",{className:"w-full",children:"¿Estás seguro de que quieres cerrar la sesión?"}),e.jsxs("div",{className:"flex gap-2 justify-end mt-2",children:[e.jsx(D,{variant:"secondary",onClick:()=>k.dismiss(a),children:"No"}),e.jsx(D,{onClick:()=>{k.dismiss(a),n.mutate()},children:"Si"})]})]}),{duration:1/0})};return e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(D,{onClick:t,size:"icon",variant:"ghost",children:e.jsx(ft,{})})}),e.jsx(K,{children:"Cerrar sesión"})]})})}const Os=({shouldScaleBackground:s=!0,...r})=>e.jsx($e.Root,{shouldScaleBackground:s,...r});Os.displayName="Drawer";const br=$e.Trigger,tl=$e.Portal,il=$e.Close,Wn=x.forwardRef(({className:s,...r},n)=>e.jsx($e.Overlay,{ref:n,className:q("fixed inset-0 z-50 bg-black/80",s),...r}));Wn.displayName=$e.Overlay.displayName;const Hs=x.forwardRef(({className:s,children:r,...n},t)=>e.jsxs(tl,{children:[e.jsx(Wn,{}),e.jsxs($e.Content,{ref:t,className:q("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",s),...n,children:[e.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),r]})]}));Hs.displayName="DrawerContent";const Jn=({className:s,...r})=>e.jsx("div",{className:q("mt-auto flex flex-col gap-2 p-4",s),...r});Jn.displayName="DrawerFooter";const ll=x.forwardRef(({className:s,...r},n)=>e.jsx($e.Title,{ref:n,className:q("text-lg font-semibold leading-none tracking-tight",s),...r}));ll.displayName=$e.Title.displayName;const ol=x.forwardRef(({className:s,...r},n)=>e.jsx($e.Description,{ref:n,className:q("text-sm text-muted-foreground",s),...r}));ol.displayName=$e.Description.displayName;const js=x.forwardRef(({className:s,children:r,...n},t)=>e.jsxs(Zr,{ref:t,className:q("relative overflow-hidden",s),...n,children:[e.jsx(gt,{className:"h-full w-full rounded-[inherit]",children:r}),e.jsx(Yn,{}),e.jsx(vt,{})]}));js.displayName=Zr.displayName;const Yn=x.forwardRef(({className:s,orientation:r="vertical",...n},t)=>e.jsx(Xr,{ref:t,orientation:r,className:q("flex touch-none select-none transition-colors",r==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",r==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...n,children:e.jsx(yt,{className:"relative flex-1 rounded-full bg-border"})}));Yn.displayName=Xr.displayName;function de({className:s,...r}){return e.jsx("div",{className:q("animate-pulse rounded-md bg-primary/10",s),...r})}function Ae(){return e.jsx("div",{className:"flex flex-col sm:m-2 m-1",children:e.jsxs("div",{className:"space-y-1 justify-center",children:[e.jsx(de,{className:"h-2 w-full mx-auto"}),e.jsx(de,{className:"h-2 w-11/12 mx-auto"}),e.jsx(de,{className:"h-2 w-full mx-auto"}),e.jsx(de,{className:"h-2 w-11/12 mx-auto"})]})})}const Zn={"/doctor/queries":"queries","/doctor/dates":"dates","/doctor/drugs":"drugs","/doctor/services":"services","/doctor/patients":"patients","/doctor/pediatric":"pediatric","/doctor/general":"general","/profile/me":"profile","/doctor/upcoming":"upcoming"};function cl(s){return s in Zn}function dl(){const r=at().state.location.pathname,n=cl(r)?Zn[r]:"any",{data:t,isPending:a,error:i}=$({queryKey:["info",n],queryFn:async()=>await(await F.helps[":name"].$get({param:{name:n}})).text()});return e.jsxs(Os,{children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(br,{asChild:!0,children:e.jsx(D,{variant:"ghost",size:"icon","aria-label":"Open help",children:e.jsx(bt,{className:"h-5 w-5"})})})}),e.jsx(K,{children:r})]})}),e.jsx(Hs,{className:"h-[90vh] sm:h-[85vh]",children:e.jsxs("div",{className:"mx-auto w-full max-w-3xl",children:[e.jsx(js,{className:"h-[65vh] px-4 sm:px-8",children:e.jsxs("div",{className:"space-y-6 pb-6",children:[a&&e.jsx(Ae,{}),i&&e.jsx("div",{children:"Ocurrió un error"}),t&&e.jsx(mi,{remarkPlugins:[xi],children:t})]})}),e.jsx(Jn,{children:e.jsx(il,{asChild:!0,children:e.jsx(D,{variant:"outline",children:"Cerrar"})})})]})})]})}function _s({role:s}){const{data:r,isPending:n}=$(ts),[t,a]=x.useState(!1),i=x.useRef(null),l=Qe();x.useEffect(()=>{const c=u=>{i.current&&!i.current.contains(u.target)&&a(!1)};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[]);const o=c=>{a(!1),l({to:c})};return e.jsx("header",{className:"sticky top-0 z-50 mb-5 border-b bg-background/80 backdrop-blur-sm",children:e.jsx("section",{className:"mx-auto max-w-5xl px-4",children:e.jsxs("div",{className:"flex h-16 items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-5",children:e.jsx("p",{className:"text-xl font-semibold",children:"FAMED"})}),e.jsx("div",{onClick:()=>a(!t),className:"absolute right-3 top-2 cursor-pointer md:hidden",children:e.jsx(D,{variant:"outline",size:"icon",children:t?e.jsx(Nt,{}):e.jsx(wt,{})})}),e.jsx(ps,{children:(t||window.innerWidth>=768)&&e.jsx(Ce.nav,{ref:i,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:`absolute left-0 w-full bg-background/95 pb-auto text-center backdrop-blur-md md:static md:z-auto md:flex md:w-auto md:items-center ${t?"top-16":"top-[-490px]"}`,children:e.jsxs("ul",{className:"flex flex-col gap-2 md:flex-row md:items-center md:gap-3",children:[s==="DOCTOR"&&e.jsxs(e.Fragment,{children:[e.jsx(Re,{to:"/doctor/upcoming",label:"Hoy",onClick:()=>o("/doctor/upcoming")}),e.jsx(Re,{to:"/doctor/dates",label:"Citas",onClick:()=>o("/doctor/dates")}),e.jsx(Re,{to:"/doctor/patients",label:"Pacientes",onClick:()=>o("/doctor/patients")}),e.jsx(Re,{to:"/doctor/drugs",label:"Fármacos",onClick:()=>o("/doctor/drugs")}),e.jsx(Re,{to:"/doctor/services",label:"Servicios",onClick:()=>o("/doctor/services")})]}),s==="ADMIN"&&e.jsxs(e.Fragment,{children:[e.jsx(Re,{to:"/admin/users",label:"Usuarios",onClick:()=>o("/admin/users")}),e.jsx(Re,{to:"/admin/settings",label:"Mantenimiento",onClick:()=>o("/admin/settings")})]}),s==="ASSISTANT"&&e.jsxs(e.Fragment,{children:[e.jsx(Re,{to:"/assistant/dates",label:"Citas",onClick:()=>o("/assistant/dates")}),e.jsx(Re,{to:"/assistant/patients",label:"Pacientes",onClick:()=>o("/assistant/patients")}),e.jsx(Re,{to:"/assistant/services",label:"Servicios",onClick:()=>o("/assistant/services")})]}),e.jsx(Re,{to:"/profile/me",label:n?"Cargando...":r.name,onClick:()=>o("/profile/me")}),e.jsxs("li",{className:"flex justify-center md:my-0 my-2",children:[e.jsx(al,{}),e.jsx(yr,{}),e.jsx(dl,{})]})]})})})]})})})}function Re({to:s,label:r,onClick:n}){return e.jsx(Ce.li,{className:"my-2 md:my-0",whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsx(Me,{to:s,onClick:n,className:"rounded-md p-2 font-semibold transition-all duration-200 ease-in-out [&.active]:bg-accent [&.active]:font-bold [&.active]:shadow-md hover:bg-accent/50",children:r})})}function ul(){return e.jsxs(e.Fragment,{children:[e.jsx(_s,{role:"DOCTOR"}),e.jsx(Ps,{})]})}const ml=ee("/doctor/_doctor")({beforeLoad:async({context:s})=>{try{const r=await s.queryClient.fetchQuery(ts);if(!r)throw qe({to:"/login"});if(r.role!=="DOCTOR")throw qe({to:"/restricted"});return{data:r}}catch{throw qe({to:"/restricted"})}},component:ul});function xl(){return e.jsxs(e.Fragment,{children:[e.jsx(_s,{role:"ASSISTANT"}),e.jsx(Ps,{})]})}const hl=ee("/assistant/_assistant")({beforeLoad:async({context:s})=>{const r=s.queryClient;try{const n=await r.fetchQuery(ts);if(!n)throw qe({to:"/login"});if(n.role!=="ASSISTANT")throw qe({to:"/restricted"});return{data:n}}catch{throw qe({to:"/restricted"})}},component:xl}),jl=ee("/admin/_admin")({beforeLoad:async({context:s})=>{const r=s.queryClient;try{const n=await r.fetchQuery(ts);if(!n)throw qe({to:"/login"});if(n.role!=="ADMIN")throw qe({to:"/restricted"});return{data:n}}catch{throw qe({to:"/login"})}},component:pl});function pl(){return e.jsxs(e.Fragment,{children:[e.jsx(_s,{role:"ADMIN"}),e.jsx(Ps,{})]})}const Xn=Ct,Nr=x.forwardRef(({className:s,...r},n)=>e.jsx(en,{ref:n,className:q("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",s),...r}));Nr.displayName=en.displayName;const He=x.forwardRef(({className:s,...r},n)=>e.jsx(sn,{ref:n,className:q("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",s),...r}));He.displayName=sn.displayName;const _e=x.forwardRef(({className:s,...r},n)=>e.jsx(rn,{ref:n,className:q("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r}));_e.displayName=rn.displayName;const B=Pt,U=kt,fl=Et,gl=tn,ea=x.forwardRef(({className:s,...r},n)=>e.jsx(nn,{ref:n,className:q("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r}));ea.displayName=nn.displayName;const _=x.forwardRef(({className:s,children:r,...n},t)=>e.jsxs(fl,{children:[e.jsx(ea,{}),e.jsxs(an,{ref:t,className:q("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...n,children:[r,e.jsxs(tn,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(St,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));_.displayName=an.displayName;const X=({className:s,...r})=>e.jsx("div",{className:q("flex flex-col space-y-1.5 text-center sm:text-left",s),...r});X.displayName="DialogHeader";const ne=({className:s,...r})=>e.jsx("div",{className:q("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...r});ne.displayName="DialogFooter";const Q=x.forwardRef(({className:s,...r},n)=>e.jsx(ln,{ref:n,className:q("text-lg font-semibold leading-none tracking-tight",s),...r}));Q.displayName=ln.displayName;const we=x.forwardRef(({className:s,...r},n)=>e.jsx(on,{ref:n,className:q("text-sm text-muted-foreground",s),...r}));we.displayName=on.displayName;const us=m.object({name:m.string({required_error:"Este campo es requerido"}).min(10,{message:"Ingrese un nombre valido"}).max(130,{message:"Nombre incorrecto"}),password:m.string({required_error:"Este campo es requerido"}).min(6,{message:"La clave debe de contener al menos 6 caracteres"}).max(12,{message:"La clave debe de tener 12 caracteres como máximo"}),email:m.string({required_error:"Este campo es requerido"}).email({message:"Ingrese un Email valido"}),rol:m.enum(["ASSISTANT","DOCTOR"],{errorMap:()=>({message:"Seleccione un rol"})})});m.object({id:m.string(),status:m.boolean()});function vl({userName:s}){const r=H(),[n,t]=x.useState(!1),a=m.object({name:us.shape.name}),i=O({resolver:V(a),defaultValues:{name:s}}),l=R({mutationFn:async c=>{const d=await(await F.users.name.$patch({json:c})).json();if(!d.success)throw new Error;return k.success("Tu nombre ha sido actualizado correctamente"),r.invalidateQueries({queryKey:["currentUser"]}),t(!1),d},onError:()=>{k.error('"Error al actualizar el nombre"')}}),o=c=>{l.mutate(c)};return e.jsxs(B,{open:n,onOpenChange:t,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsx(D,{size:"icon",className:"ml-2",variant:"outline",children:e.jsx(ss,{})})})}),e.jsx(K,{children:"Cambiar tu nombre"})]})}),e.jsxs(_,{children:[e.jsx(X,{children:e.jsx(Q,{children:"¿Quieres cambiar tu nombre?"})}),e.jsx(G,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(o),children:[e.jsx(w,{control:i.control,name:"name",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Nombre"}),e.jsx(y,{children:e.jsx(I,{...c,disabled:l.isPending,type:"text"})}),e.jsx(C,{})]})}),e.jsx(ne,{className:"mt-2",children:e.jsx(T,{loading:l.isPending,type:"submit",children:"Guardar"})})]})})]})]})}function yl({userEmail:s}){const r=H(),[n,t]=x.useState(!1),a=m.object({email:us.shape.email}),i=O({resolver:V(a),defaultValues:{email:s}}),l=R({mutationFn:async c=>{const d=await(await F.users.email.$patch({json:c})).json();return d.success||k.error("Error al actualizar el email"),k.success("Tu email ha sido actualizado correctamente, verifica tu bandeja de entrada"),r.invalidateQueries({queryKey:["currentUser"]}),t(!1),d}}),o=c=>{l.mutate(c)};return e.jsxs(B,{open:n,onOpenChange:t,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsx(D,{size:"icon",className:"ml-2",variant:"outline",children:e.jsx(ss,{})})})}),e.jsx(K,{children:"Cambiar tu email"})]})}),e.jsxs(_,{children:[e.jsx(X,{children:e.jsx(Q,{children:"¿Estás seguro de cambiar tu email?"})}),e.jsx(G,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(o),children:[e.jsx(w,{control:i.control,name:"email",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Email"}),e.jsx(y,{children:e.jsx(I,{...c,disabled:l.isPending,type:"text"})}),e.jsx(C,{})]})}),e.jsx(ne,{className:"mt-2",children:e.jsx(T,{loading:l.isPending,type:"submit",children:"Guardar"})})]})})]})]})}function bl(){const s=m.object({old:us.shape.password,new:us.shape.password,confirmPass:us.shape.password}).refine(j=>j.new===j.confirmPass,{message:"Las claves no coinciden",path:["confirmPass"]}).refine(j=>j.old!=j.new,{message:"La clave nueva no puede ser igual a la actual",path:["new"]}),r=O({resolver:V(s),defaultValues:{old:"",new:"",confirmPass:""}}),n=R({mutationFn:async j=>{const N=await(await F.users.pass.$patch({json:j})).json();return N.success?k.success("Tu clave ha sido actualizada correctamente"):(N.error==="old error"&&r.setError("old",{message:"La clave actual es incorrecta"}),k.error("Error al actualizar la clave")),N}}),t=j=>{n.mutate(j)},[a,i]=x.useState(!1),[l,o]=x.useState(!1),[c,u]=x.useState(!1),d=()=>i(!a),h=()=>o(!l),v=()=>u(!c);return e.jsx(G,{...r,children:e.jsx("form",{className:"flex justify-center",onSubmit:r.handleSubmit(t),children:e.jsxs("div",{className:"space-y-4 sm:w-1/2",children:[e.jsx("div",{children:e.jsx(w,{control:r.control,name:"old",render:({field:j})=>e.jsxs(f,{children:[e.jsx(p,{children:"Clave Actual"}),e.jsx(y,{children:e.jsxs("div",{className:"relative",children:[e.jsx(I,{onChange:j.onChange,value:j.value,disabled:n.isPending,type:a?"text":"password",placeholder:"******",className:"w-full px-4 py-2 bg-background"}),e.jsx("button",{type:"button",disabled:n.isPending,onClick:d,className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:a?e.jsx(ds,{}):e.jsx(cs,{})})]})}),e.jsx(C,{})]})})}),e.jsx("div",{children:e.jsx(w,{control:r.control,name:"new",render:({field:j})=>e.jsxs(f,{children:[e.jsx(p,{children:"Nueva Clave"}),e.jsx(y,{children:e.jsxs("div",{className:"relative",children:[e.jsx(I,{onChange:j.onChange,value:j.value,disabled:n.isPending,type:l?"text":"password",placeholder:"******",className:"w-full px-4 py-2 bg-background"}),e.jsx("button",{type:"button",disabled:n.isPending,onClick:h,className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:l?e.jsx(ds,{}):e.jsx(cs,{})})]})}),e.jsx(C,{})]})})}),e.jsx("div",{children:e.jsx(w,{control:r.control,name:"confirmPass",render:({field:j})=>e.jsxs(f,{children:[e.jsx(p,{children:"Confirmar Clave"}),e.jsx(y,{children:e.jsxs("div",{className:"relative",children:[e.jsx(I,{onChange:j.onChange,value:j.value,disabled:n.isPending,type:c?"text":"password",placeholder:"******",className:"w-full px-4 py-2 bg-background"}),e.jsx("button",{type:"button",disabled:n.isPending,onClick:v,className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:c?e.jsx(ds,{}):e.jsx(cs,{})})]})}),e.jsx(C,{})]})})}),e.jsx(T,{type:"submit",loading:n.isPending,className:"w-full",children:"Actualizar"})]})})})}const bs=x.forwardRef(({className:s,...r},n)=>e.jsx(cn,{ref:n,className:q("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...r}));bs.displayName=cn.displayName;const wr=x.forwardRef(({className:s,...r},n)=>e.jsx(dn,{ref:n,className:q("aspect-square h-full w-full",s),...r}));wr.displayName=dn.displayName;const Ks=x.forwardRef(({className:s,...r},n)=>e.jsx(un,{ref:n,className:q("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...r}));Ks.displayName=un.displayName;const Nl=m.object({credential:m.number({required_error:"Ingrese un número de credencial"}).max(99999999,{message:"Ingrese una credencial válida"}).min(1e3,{message:"Ingrese una credencial válida"})}),_r=m.object({specialite:m.enum(["GENERAL","PEDIATRIA"],{errorMap:()=>({message:"Seleccione un especialidad"})})}),wl=m.object({assistantId:m.string({required_error:"Seleccione un asistente"})});m.object({skills:m.string()});const sa=m.object({name:m.string().min(2,"Completa el nombre").max(20,"Error")}),Fe=x.forwardRef(({className:s,...r},n)=>e.jsx(mn,{className:q("grid gap-2",s),...r,ref:n}));Fe.displayName=mn.displayName;const oe=x.forwardRef(({className:s,...r},n)=>e.jsx(xn,{ref:n,className:q("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),...r,children:e.jsx(Dt,{className:"flex items-center justify-center",children:e.jsx(as,{className:"h-3.5 w-3.5 fill-primary"})})}));oe.displayName=xn.displayName;function Cl({esp:s}){const r=H(),[n,t]=x.useState(!1),a=_r.parse({specialite:s}),i=O({resolver:V(_r),defaultValues:{specialite:a.specialite||"GENERAL"}}),l=R({mutationFn:async c=>{const d=await(await F.doctors.type.$patch({json:c})).json();if(!d.success)throw new Error;return k.success("Especialidad actualizada correctamente"),r.invalidateQueries({queryKey:["currentUser"]}),t(!1),d},onError:()=>{k.error('"Error al actualizar la especialidad"')}}),o=c=>{l.mutate(c)};return e.jsxs(B,{open:n,onOpenChange:t,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsx(D,{size:"icon",className:"ml-2",variant:"outline",children:e.jsx(ss,{})})})}),e.jsx(K,{children:"Cambiar la especialidad"})]})}),e.jsxs(_,{children:[e.jsxs(X,{children:[e.jsx(Q,{children:"Quieres cambiar la especialidad"}),e.jsx(we,{children:"Esto afectara el como manejas los expedientes de tus pacientes."})]}),e.jsx(G,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(o),children:[e.jsx(w,{control:i.control,name:"specialite",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Tipo de Expediente"}),e.jsx(y,{children:e.jsxs(Fe,{onValueChange:c.onChange,defaultValue:c.value,disabled:l.isPending,className:"flex gap-5",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{value:"GENERAL"}),e.jsx(p,{children:"General"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{value:"PEDIATRIA"}),e.jsx(p,{children:"Pediatría"})]})]})}),e.jsx(C,{})]})}),e.jsx(ne,{className:"mt-2",children:e.jsx(T,{loading:l.isPending,type:"submit",children:"Guardar"})})]})})]})]})}function Sl(){const s=H(),[r,n]=x.useState(!1),t=O({resolver:V(Nl)}),a=R({mutationFn:async l=>{const c=await(await F.doctors.credential.$patch({json:l})).json();if(!c.success)throw new Error;return k.success("Credencial guardada correctamente"),s.invalidateQueries({queryKey:["doctorInfo"]}),n(!1),c},onError:()=>{k.error('"Error al actualizar la credencial"')}}),i=l=>{a.mutate(l)};return e.jsxs(B,{open:r,onOpenChange:n,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsx(D,{size:"icon",className:"ml-2",variant:"outline",children:e.jsx(ss,{})})})}),e.jsx(K,{children:"Agregar Credencial MINSA"})]})}),e.jsxs(_,{children:[e.jsx(X,{children:e.jsx(Q,{children:"Guardar tu credencial del MINSA"})}),e.jsx(G,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(i),children:[e.jsx(w,{control:t.control,name:"credential",render:({field:l})=>e.jsxs(f,{children:[e.jsx(p,{children:"Credencial MINSA"}),e.jsx(y,{children:e.jsx(I,{onChange:o=>{const c=o.target.value;/^\d+$/.test(c)||(o.target.value=c.replace(/[^0-9]/g,"")),l.onChange(parseInt(o.target.value))},disabled:a.isPending,type:"text"})}),e.jsx(C,{})]})}),e.jsx(ne,{className:"mt-2",children:e.jsx(T,{loading:a.isPending,type:"submit",children:"Guardar"})})]})})]})]})}const be=$t,Kr=Tt,Ne=zt,fe=x.forwardRef(({className:s,children:r,...n},t)=>e.jsxs(hn,{ref:t,className:q("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...n,children:[r,e.jsx(At,{asChild:!0,children:e.jsx(mr,{className:"h-4 w-4 opacity-50"})})]}));fe.displayName=hn.displayName;const ra=x.forwardRef(({className:s,...r},n)=>e.jsx(jn,{ref:n,className:q("flex cursor-default items-center justify-center py-1",s),...r,children:e.jsx(It,{})}));ra.displayName=jn.displayName;const na=x.forwardRef(({className:s,...r},n)=>e.jsx(pn,{ref:n,className:q("flex cursor-default items-center justify-center py-1",s),...r,children:e.jsx(Ke,{})}));na.displayName=pn.displayName;const ge=x.forwardRef(({className:s,children:r,position:n="popper",...t},a)=>e.jsx(qt,{children:e.jsxs(fn,{ref:a,className:q("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...t,children:[e.jsx(ra,{}),e.jsx(Ft,{className:q("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),e.jsx(na,{})]})}));ge.displayName=fn.displayName;const tr=x.forwardRef(({className:s,...r},n)=>e.jsx(gn,{ref:n,className:q("px-2 py-1.5 text-sm font-semibold",s),...r}));tr.displayName=gn.displayName;const se=x.forwardRef(({className:s,children:r,...n},t)=>e.jsxs(vn,{ref:t,className:q("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Mt,{children:e.jsx(as,{className:"h-4 w-4"})})}),e.jsx(Rt,{children:r})]}));se.displayName=vn.displayName;const Pl=x.forwardRef(({className:s,...r},n)=>e.jsx(yn,{ref:n,className:q("-mx-1 my-1 h-px bg-muted",s),...r}));Pl.displayName=yn.displayName;function kl(){const s=H(),[r,n]=x.useState(!1),t=O({resolver:V(wl)}),{data:a,isPending:i}=$({queryKey:["assistants"],queryFn:async()=>(await(await F.doctors.list.$get()).json()).data}),l=R({mutationFn:async c=>{const d=await(await F.doctors.assistant.$patch({json:c})).json();if(!d.success)throw new Error;return k.success("Asistente asignado correctamente"),s.invalidateQueries({queryKey:["doctorInfo"]}),n(!1),d},onError:()=>{k.error("Error al actualizar tu asistente")}}),o=c=>{l.mutate(c)};return e.jsxs(B,{open:r,onOpenChange:n,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsx(D,{size:"icon",className:"ml-2",variant:"outline",children:e.jsx(ss,{})})})}),e.jsx(K,{children:"Seleccionar un asistente"})]})}),e.jsxs(_,{children:[e.jsxs(X,{children:[e.jsx(Q,{children:"Puedes seleccionar un asistente"}),e.jsx(we,{children:"Elige un asistente de la lista para que te ayude a coordinar tu agenda."})]}),e.jsx(e.Fragment,{children:e.jsx(G,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(o),children:[e.jsx(w,{control:t.control,name:"assistantId",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Seleccionar"}),a&&e.jsxs(be,{onValueChange:c.onChange,defaultValue:c.value,children:[e.jsx(y,{children:e.jsx(fe,{children:e.jsx(Ne,{placeholder:"Selecciona un asistente"})})}),i?e.jsx("div",{children:"Cargando..."}):e.jsx(ge,{children:a.map(u=>e.jsx(se,{value:u.assistantId,children:u.assistantName},u.assistantId))})]}),e.jsx(C,{})]})}),e.jsx(ne,{className:"mt-2",children:e.jsx(T,{loading:l.isPending,type:"submit",children:"Guardar"})})]})})})]})]})}function ns(){return e.jsx("div",{className:"flex flex-col space-y-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(de,{className:"h-4 w-[250px]"}),e.jsx(de,{className:"h-4 w-[250px]"}),e.jsx(de,{className:"h-4 w-[200px]"})]})})}async function El(){return await(await F.doctors.info.$get()).json()}function Dl({user:s}){var t,a;const{data:r,isPending:n}=$({queryKey:["doctorInfo"],queryFn:El});return e.jsxs("div",{className:"mt-4 mx-4",children:[e.jsx(Z,{className:"text-lg font-medium",children:"Perfil Médico"}),n&&e.jsxs("div",{className:"grid grid-cols-1  md:grid-cols-3 mt-2 gap-2",children:[e.jsx(ns,{}),e.jsx(ns,{}),e.jsx(ns,{})]}),r&&e.jsxs("div",{className:"grid grid-cols-1  md:grid-cols-3 mt-2 gap-2",children:[e.jsxs("div",{className:"flex border rounded-sm p-2 justify-betweenF items-center",children:[e.jsxs("p",{className:"text-sm font-medium",children:["Expedientes: ",e.jsx("strong",{children:" "+((t=s.doctor)==null?void 0:t.specialtie)})]}),e.jsx(Cl,{esp:(a=s.doctor)==null?void 0:a.specialtie})]}),e.jsxs("div",{className:"flex border rounded-sm p-2 justify-between items-center",children:[e.jsxs("p",{className:"text-sm font-medium",children:["Código MINSA:",e.jsx("strong",{children:" "+(r==null?void 0:r.credential)?r==null?void 0:r.credential:"No definida"})]}),r!=null&&r.credential?e.jsx("div",{}):e.jsx(Sl,{})]}),e.jsxs("div",{className:"flex border rounded-sm p-2 justify-between items-center",children:[e.jsxs("p",{className:"text-sm font-medium",children:["Mi asistente:",e.jsx("strong",{children:" "+(r==null?void 0:r.assistantName)?r==null?void 0:r.assistantName:"No definida"})]}),r!=null&&r.credential?e.jsx("div",{}):e.jsx(kl,{})]})]})]})}const fs=s=>{const n=(""+s).replace(/\D/g,"").match(/^(\d{1,3})(\d{4})(\d{4})$/);return n?`+ (${n[1]}) ${n[2]}-${n[3]}`:s};function aa(s){try{if(s.length===0)return null;const r=s.split(" ");if(r.length<2)return r[0].charAt(0).toUpperCase();const n=r[0].charAt(0).toUpperCase(),t=r[1].charAt(0).toUpperCase();return n+t}catch(r){return console.error(r),null}}const he=x.forwardRef(({className:s,...r},n)=>e.jsx("div",{ref:n,className:q("rounded-xl border border-customborder  bg-card text-card-foreground shadow",s),...r}));he.displayName="Card";const je=x.forwardRef(({className:s,...r},n)=>e.jsx("div",{ref:n,className:q("flex flex-col space-y-1.5 p-6",s),...r}));je.displayName="CardHeader";const ve=x.forwardRef(({className:s,...r},n)=>e.jsx("h3",{ref:n,className:q("font-semibold leading-none tracking-tight",s),...r}));ve.displayName="CardTitle";const Al=x.forwardRef(({className:s,...r},n)=>e.jsx("p",{ref:n,className:q("text-sm text-muted-foreground",s),...r}));Al.displayName="CardDescription";const pe=x.forwardRef(({className:s,...r},n)=>e.jsx("div",{ref:n,className:q("p-6 pt-0",s),...r}));pe.displayName="CardContent";const ta=x.forwardRef(({className:s,...r},n)=>e.jsx("div",{ref:n,className:q("flex items-center p-6 pt-0",s),...r}));ta.displayName="CardFooter";function Il(){const{data:s,isPending:r}=$({queryKey:["sessionService"],queryFn:async()=>(await(await F.auth.whatsapp.$get()).json()).data,staleTime:12e5}),[n,t]=x.useState(null),[a,i]=x.useState(null);x.useEffect(()=>{if(!s)return;const d=An(_n,{auth:{token:s}});return i(d),d.on("qr",h=>{k.info("Escanea el QR para iniciar la sesión."),console.log(h),t(h)}),d.on("closeSession",h=>{k.info(h),t(null)}),d.on("errorSession",h=>{k.error(h),t(null)}),d.on("openSession",h=>{k.success(h),t(null)}),d.on("testSuccess",h=>{console.log(h),k.success(h)}),d.on("testError",h=>{k.error(h)}),()=>{d.disconnect()}},[s]);const l=()=>{a&&a.emit("session")},o=()=>{a&&a.emit("test")};function c(d){var j;const v=`; ${document.cookie}`.split(`; ${d}=`);if(v.length===2)return(j=v.pop())==null?void 0:j.split(";").shift()}const u=c("auth_session");return e.jsxs(he,{className:"bg-gradient-to-r from-[#25D366] to-[#128C7E]  border-none",children:[e.jsxs(je,{className:"flex flex-col items-center space-y-6",children:[e.jsx("h1",{className:"text-lg font-bold",children:"Gestión de Sesiones de WhatsApp"}),e.jsxs("p",{children:["Valor de la cookie: ",u]})]}),e.jsxs(pe,{className:"flex flex-col items-center space-y-6",children:[e.jsx(Y,{children:e.jsxs("section",{className:"flex flex-col space-y-4 sm:space-y-0 sm:flex-row sm:space-x-6",children:[e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(D,{variant:"secondary",onClick:l,className:"w-full sm:w-auto lg:w-60 text-green-900 dark:text-green-400 font-medium px-6 py-3 rounded-lg transition-colors",disabled:r,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"h-6 w-6",children:e.jsx(Vi,{className:"h-full w-full"})}),e.jsx("div",{className:"text-sm",children:"Solicitar QR"})]})})}),e.jsx(K,{children:"Escanea el código QR para conectar tu cuenta de WhatsApp"})]}),e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(D,{variant:"secondary",onClick:o,className:"w-full sm:w-auto lg:w-60 text-green-900 dark:text-green-400 font-medium px-6 py-3 rounded-lg transition-colors",disabled:r,children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"h-6 w-6",children:e.jsx(Lt,{className:"h-full w-full"})}),e.jsx("div",{className:"text-sm",children:"Enviar mensaje de prueba"})]})})}),e.jsx(K,{children:"Puedes enviarte un mensaje de prueba a tu propio WhatsApp"})]})]})}),e.jsx("div",{className:"flex justify-center",children:n&&e.jsx("img",{className:"object-cover rounded-lg",src:n,alt:"QR Code"})})]})]})}function ql(){const{data:s,isLoading:r,error:n}=$(ts);return r?e.jsx("div",{children:"Cargando..."}):n?e.jsxs("div",{children:["Error: ",n.message]}):s?e.jsx("div",{className:" w-full max-w-3xl mx-auto p-6 md:p-8",children:e.jsxs(Xn,{className:"",defaultValue:"profile",children:[e.jsxs(Nr,{children:[e.jsx(He,{value:"profile",children:"Acerca de mí"}),e.jsx(He,{value:"password",children:"Seguridad"}),s.role==="DOCTOR"&&e.jsxs(e.Fragment,{children:[e.jsx(He,{value:"doctor",children:"Doctor"}),e.jsx(He,{value:"whats",children:"WhatsApp"})]})]}),e.jsx(_e,{value:"profile",children:e.jsxs("div",{className:"mt-4 mx-4",children:[e.jsx(Z,{className:"text-lg font-medium",children:"Acerca de mí"}),e.jsxs("section",{className:"w-full flex flex-col sm:flex-row",children:[e.jsx("div",{className:"sm:w-1/2 w-full mt-4  sm:order-2 order-1 ",children:e.jsxs("div",{className:"w-full h-full flex justify-center items-center ",children:[e.jsxs(bs,{className:" h-36 w-36",children:[e.jsx(wr,{alt:"User avatar",src:""}),e.jsx(Ks,{className:"bg-accent",children:aa(s==null?void 0:s.name)})]}),e.jsx(D,{variant:"ghost",size:"icon",children:e.jsx(ss,{})})]})}),e.jsxs("div",{className:"sm:w-1/2 w-full mt-4 sm:ml-4 sm:order-1 order-2",children:[e.jsxs("div",{className:"mt-5",children:[e.jsx(Z,{htmlFor:"name",children:"Nombre"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{defaultValue:s.name,value:s.name,id:"name"}),e.jsx(vl,{userName:s.name})]})]}),e.jsxs("div",{className:"mt-5",children:[e.jsx(Z,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{defaultValue:s.email,id:"email",type:"email"}),e.jsx(yl,{userEmail:s.email})]})]})]})]})]})}),e.jsx(_e,{value:"password",children:e.jsxs("div",{className:"mt-4 mx-4",children:[e.jsx(Z,{className:"text-lg font-medium",children:"Cambiar mi clave"}),e.jsx(bl,{})]})}),e.jsx(_e,{value:"doctor",children:s&&e.jsx(Dl,{user:s})}),e.jsx(_e,{value:"whats",children:e.jsx("div",{className:"mt-4 mx-4",children:e.jsx(Il,{})})})]})}):e.jsx("div",{children:"No se encontró información del usuario."})}const Fl=ee("/profile/_profile/me")({component:Ml});function Ml(){const{data:s,isPending:r}=$(ts);return r?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{children:[e.jsx("div",{children:s&&e.jsx(_s,{role:s.role})}),s&&e.jsx(ql,{})]})}const ze=x.forwardRef(({className:s,...r},n)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:n,className:q("w-full caption-bottom text-sm",s),...r})}));ze.displayName="Table";const Le=x.forwardRef(({className:s,...r},n)=>e.jsx("thead",{ref:n,className:q("[&_tr]:border-b",s),...r}));Le.displayName="TableHeader";const Ve=x.forwardRef(({className:s,...r},n)=>e.jsx("tbody",{ref:n,className:q("[&_tr:last-child]:border-0",s),...r}));Ve.displayName="TableBody";const Cr=x.forwardRef(({className:s,...r},n)=>e.jsx("tfoot",{ref:n,className:q("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...r}));Cr.displayName="TableFooter";const te=x.forwardRef(({className:s,...r},n)=>e.jsx("tr",{ref:n,className:q("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r}));te.displayName="TableRow";const re=x.forwardRef(({className:s,...r},n)=>e.jsx("th",{ref:n,className:q("h-10 px-2 text-left align-middle font-bold text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...r}));re.displayName="TableHead";const L=x.forwardRef(({className:s,...r},n)=>e.jsx("td",{ref:n,className:q("p-2 font-medium align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...r}));L.displayName="TableCell";const Rl=x.forwardRef(({className:s,...r},n)=>e.jsx("caption",{ref:n,className:q("mt-4 text-sm text-muted-foreground",s),...r}));Rl.displayName="TableCaption";function $l(){return e.jsxs("div",{className:" p-4  ",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h1",{className:"text-2xl font-bold",children:"En espera:"})}),e.jsx("div",{className:"",children:e.jsxs(ze,{children:[e.jsx(Le,{children:e.jsxs(te,{children:[e.jsx(re,{children:"Paciente"}),e.jsx(re,{children:"Esperando desde"})]})}),e.jsx(Ve,{})]})})]})}function Ns({id:s}){const r=Qe(),n=R({mutationFn:async()=>{const a=await(await F.queries[":dateId"].$post({param:{dateId:s}})).json();if(!a.success)throw new Error(a.error||"Error desconocido");return a},onError:t=>{k.error(t.message)},onSuccess:t=>{t.redirect&&(t.role==="DOCTOR"&&r({to:`/doctor/queries/?querieId=${t.redirect}`}),t.role==="ASSISTANT"&&r({to:`/assistant/queries/?querieId=${t.redirect}`}))}});return e.jsxs(B,{children:[e.jsx(U,{asChild:!0,children:e.jsxs(D,{size:"sm",className:"w-full justify-center",children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:"font-bold",children:"Atender"})]})}),e.jsxs(_,{children:[e.jsx(Q,{children:"Atender Consulta"}),e.jsx(we,{children:"¿Desea atender esta consulta?"}),e.jsx("form",{onSubmit:t=>{t.preventDefault(),n.mutate()},className:"w-full",children:e.jsx(T,{disabled:n.isPending,loading:n.isPending,className:"w-full",children:"Atender Ahora"})}),e.jsx(gl,{disabled:n.isPending,asChild:!0,children:e.jsx(D,{variant:"outline",children:"Cancelar"})})]})]})}const ia=m.object({country:m.string(),countryCode:m.number(),flag:m.string()}),Tl=m.object({name:m.string({required_error:"Este campo es requerido"}).min(10,{message:"Ingrese un nombre válido"}).max(130,{message:"Nombre incorrecto"}),sex:m.enum(["MASCULINO","FEMENINO"],{required_error:"Este campo es requerido"}),nationality:ia,department:m.string({required_error:"Este campo es requerido"}),municipality:m.string({required_error:"Este campo es requerido"}),address:m.string({required_error:"Este campo es requerido"}).min(10,{message:"La dirección debe de tener al menos 10 caracteres"}),action:m.enum(["now","date"]).nullable(),date:m.date().refine(s=>{const r=new Date,n=new Date(s);r.setHours(0,0,0,0),n.setHours(0,0,0,0);const t=r.getFullYear()-n.getFullYear(),a=r.getMonth()-n.getMonth(),i=r.getDate()-n.getDate(),o=a>0||a===0&&i>=0?t:t-1;return n<=r&&o<=18},{message:"La fecha de nacimiento debe indicar que el paciente tiene 18 años o menos"})}),zl=m.object({name:m.string({required_error:"Este campo es requerido"}).min(10,{message:"Ingrese un nombre válido"}).max(130,{message:"Nombre incorrecto"}),sex:m.enum(["MASCULINO","FEMENINO"],{required_error:"Este campo es requerido"}),nationality:ia,department:m.string({required_error:"Este campo es requerido"}),municipality:m.string({required_error:"Este campo es requerido"}),address:m.string({required_error:"Este campo es requerido"}).min(10,{message:"La dirección debe de tener al menos 10 caracteres"}),action:m.enum(["now","date"]).nullable(),date:m.date({required_error:"Este campo es requerido"}).refine(s=>{const r=new Date;r.setHours(0,0,0,0);const n=new Date(r);return n.setFullYear(r.getFullYear()-16),s<=n},{message:"Debe tener al menos 16 años"}),phone:m.string().min(8,{message:"El número debe de tener al menos 8 caracteres"}).max(8,{message:"El número debe de tener 8 caracteres como máximo"}).optional().nullable(),Dni:m.string().length(16,"Complete la Cédula").refine(s=>/^[A-Za-z]$/.test(s[s.length-1]),{message:"El último carácter debe ser una letra"}).optional().nullable(),foreign:m.string().optional().nullable(),dateDni:m.date().optional().nullable()}),Ll=m.object({phones:m.array(m.string()).min(1,{message:"Mínimo 1"}),sms:m.string().min(4,{message:"Mínimo 4 caracteres"})}),es=x.forwardRef(({className:s,...r},n)=>e.jsx(bn,{ref:n,className:q("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...r,children:e.jsx(Ot,{className:q("flex items-center justify-center text-current"),children:e.jsx(as,{className:"h-4 w-4"})})}));es.displayName=bn.displayName;async function Vl(s){const n=await(await F.patients.sms.$get({query:{id:s}})).json();if(!n.success)throw new Error("Error al cargar los datos del paciente");return n.data}function Gs({id:s}){const[r,n]=x.useState(!1),[t,a]=x.useState(null);x.useEffect(()=>{if(t!==null||r===!1||!i)return;const j=An(_n,{auth:{token:i}});return j.on("error",b=>{k.error(b)}),j.on("successMessage",b=>{k.success(b)}),a(j),()=>{j.disconnect()}},[r]);const{data:i}=$({queryKey:["sessionService"],queryFn:async()=>(await(await F.auth.whatsapp.$get()).json()).data,staleTime:1e3*60*20,enabled:r}),{isLoading:l,error:o,data:c}=$({queryKey:["infoPatient",s],queryFn:()=>Vl(s),enabled:r}),u=O({resolver:V(Ll),defaultValues:{sms:"",phones:[]}}),h=Qr({data:c||[],columns:[{id:"select",cell:({row:j})=>e.jsx(es,{checked:u.watch("phones").includes(j.original.phone),onCheckedChange:b=>{const N=j.original,A=u.watch("phones");N.phone?b?A.includes(N.phone)||u.setValue("phones",[...A,N.phone]):u.setValue("phones",A.filter(S=>S!==N.phone)):j.toggleSelected(!1)},"aria-label":"Select row"}),enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:"Nombre",cell:({row:j})=>{const b=j.original;return e.jsx("p",{className:b.isPatient?"font-bold":"",children:b.name})}},{accessorKey:"phone",header:"Teléfono",cell:({row:j})=>{const b=j.original;return e.jsx("p",{children:fs(b.phone)})}}],getCoreRowModel:Wr()}),v=j=>{t!==null&&t.emit("message",j),u.resetField("sms")};return e.jsxs(B,{open:r,onOpenChange:n,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsx(D,{size:"icon",className:"ml-2",children:e.jsx(Ht,{})})})}),e.jsx(K,{children:"Enviar un mensaje"})]})}),e.jsxs(_,{children:[e.jsx(Q,{children:"Enviar mensajes por WhatsApp"}),e.jsx(we,{children:"Puedes enviar un mensaje al paciente o a uno de sus familiares"}),e.jsxs("pre",{children:[l&&"Cargando...",o&&"Error al cargar la información"]}),c&&e.jsx(G,{...u,children:e.jsxs("form",{onSubmit:u.handleSubmit(v),children:[e.jsx(w,{control:u.control,name:"phones",render:()=>{var j;return e.jsxs(f,{children:[e.jsx(p,{children:"Selecciona:"}),e.jsx(y,{children:e.jsxs(ze,{children:[e.jsx(Le,{children:h.getHeaderGroups().map(b=>e.jsx(te,{children:b.headers.map(N=>e.jsx(re,{children:N.isPlaceholder?null:Is(N.column.columnDef.header,N.getContext())},N.id))},b.id))}),e.jsx(Ve,{children:(j=h.getRowModel().rows)!=null&&j.length?h.getRowModel().rows.map(b=>e.jsx(te,{"data-state":b.getIsSelected()&&"selected",children:b.getVisibleCells().map(N=>e.jsx(L,{children:Is(N.column.columnDef.cell,N.getContext())},N.id))},b.id)):e.jsx(te,{children:e.jsx(L,{colSpan:2,className:"h-24 text-center",children:"No results."})})})]})}),e.jsx(C,{})]})}}),e.jsxs("div",{className:"my-2",children:[e.jsx(w,{control:u.control,name:"sms",render:({field:j})=>e.jsxs(f,{children:[e.jsx(p,{children:"Mensaje"}),e.jsx(y,{children:e.jsx(I,{onChange:j.onChange,value:j.value,type:"text"})}),e.jsx(C,{})]})}),e.jsx(ne,{className:"mt-2",children:e.jsx(T,{disabled:l,type:"submit",children:"Enviar"})})]})]})})]})]})}function Ol(){const{data:s,isLoading:r,isError:n}=$({queryKey:["upcomingDates"],queryFn:async()=>(await(await F.dates.current.$get()).json()).data}),[t,a]=x.useState(""),i=s?s.filter(o=>o.patient.toLowerCase().includes(t.toLowerCase())):[],l=s?s.length:0;return e.jsxs("div",{className:" p-4  ",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Citas para hoy (",l,"):"]}),e.jsx(I,{placeholder:"Buscar...",value:t,onChange:o=>a(o.target.value),className:"max-w-xs"})]}),e.jsxs("div",{className:"",children:[r&&e.jsx("div",{children:"Cargando..."}),n&&e.jsx("div",{children:"Ocurrió un error al cargar los datos."}),s&&e.jsxs(ze,{children:[e.jsx(Le,{children:e.jsxs(te,{children:[e.jsx(re,{children:"Paciente"}),e.jsx(re,{children:"Hora"})]})}),e.jsx(Ve,{children:i.map(o=>e.jsxs(te,{children:[e.jsx(L,{children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{children:e.jsx("div",{className:"font-medium",children:o.patient})})})}),e.jsxs(L,{children:[ie(new Date(o.start),"hh:mm a")," -"," ",ie(new Date(o.end),"hh:mm a")]}),e.jsx(L,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Gs,{id:o.patientId})})}),e.jsx(L,{children:e.jsx(Ns,{id:o.id})})]},o.id))})]})]})]})}const Hl=zs("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ws({className:s,variant:r,...n}){return e.jsx("div",{className:q(Hl({variant:r}),s),...n})}function _l(){const{data:s,isPending:r}=$({queryKey:["process"],queryFn:async()=>(await(await F.queries.process.$get()).json()).data});return e.jsxs("div",{className:" p-4  ",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Consultas en proceso:"})}),e.jsxs("div",{className:"",children:[r&&e.jsx("div",{children:"Cargando..."}),e.jsxs(ze,{children:[e.jsx(Le,{children:e.jsxs(te,{children:[e.jsx(re,{children:"Paciente"}),e.jsx(re,{children:"Emergencia"})]})}),e.jsxs(Ve,{children:[s&&s.length>0&&s.map(n=>e.jsxs(te,{children:[e.jsx(L,{children:n.patientName}),e.jsx(L,{children:n.emergency?e.jsx(ws,{variant:"destructive",children:"Emergencia"}):""}),e.jsx(L,{children:e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(D,{variant:"outline",size:"icon",children:e.jsx(Me,{to:"/doctor/queries",search:{querieId:n.id},children:e.jsx(_t,{})})})}),e.jsx(K,{children:"Continuar con la consulta"})]})})})]},n.id)),s&&s.length===0&&e.jsx(te,{children:e.jsx(L,{colSpan:2,children:"No hay consultas en proceso"})})]})]})]})]})}function me(s){return new Intl.NumberFormat("es-NI",{style:"currency",currency:"NIO",minimumFractionDigits:2,maximumFractionDigits:2}).format(s).replace("NIO","").trim()}function Cs(s){return new Intl.NumberFormat("es-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(s).replace("USD","").trim()}function la({monto:s,querieId:r,patientName:n}){const t=H(),[a,i]=x.useState(!1),{data:l}=$({queryKey:["exchangeRate"],queryFn:async()=>(await(await F.services.rate.$get()).json()).data}),o=m.object({cordobasReceived:m.number({required_error:"Por favor, ingrese el monto en efectivo",invalid_type_error:"Por favor, ingrese un monto válido"}).min(0,"Por favor, ingrese el monto en efectivo").max(1e4,"Máximo  $10,000.00").default(0),dollarsReceived:m.number({required_error:"Por favor, ingrese el monto en efectivo",invalid_type_error:"Por favor, ingrese un monto válido"}).min(0,"Por favor, ingrese el monto en efectivo").max(2e3,"Máximo  $2000.00").default(0),total:m.number({required_error:"Monto Insuficiente",invalid_type_error:"Monto Insuficiente"}).min(s,"Monto Insuficiente").default(0)}),c=O({resolver:V(o),defaultValues:{cordobasReceived:0,dollarsReceived:0}}),u=N=>{const A=N.target.value;if(/^\d*$/.test(A))return c.trigger(),parseInt(A)||0},d=()=>{const N=c.watch("dollarsReceived")??0;return(c.watch("cordobasReceived")??0)+N*l},h=()=>{const A=d()-s;return A<0||isNaN(A)?0:A},v=()=>{const A=(c.watch("dollarsReceived")??0)*l,S=s-A-(c.watch("cordobasReceived")??0);return S>0?S:0};x.useEffect(()=>{const N=d();c.setValue("total",N??0),c.trigger()},[c.watch("dollarsReceived"),c.watch("cordobasReceived")]);const j=R({mutationFn:async N=>{const S=await(await F.queries.charge[":querieId"].$patch({param:{querieId:r},json:{cordobas:N.cordobasReceived-h(),dolares:N.dollarsReceived}})).json();if(S.success)return t.invalidateQueries({queryKey:["recents"]}),t.invalidateQueries({queryKey:["process"]}),t.invalidateQueries({queryKey:["money"]}),t.invalidateQueries({queryKey:["earings"]}),i(!1),S;throw new Error("Error al guardar el registro")},onSuccess:()=>{k.success("Cobro realizado con éxito")},onError:N=>{k.error(N.message||"Error al realizar el cobro"),i(!1)}}),b=N=>{j.mutate(N)};return e.jsxs(B,{open:a,onOpenChange:i,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsxs(D,{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})}),e.jsx("span",{children:"Cobrar"})]})})}),e.jsx(K,{children:"Realizar cobro"})]})}),e.jsxs(_,{className:"sm:max-w-[425px]",children:[e.jsxs(X,{children:[e.jsx(Q,{className:"text-2xl font-bold",children:"Confirmar Cobro"}),e.jsxs(we,{className:"text-lg",children:["Paciente: ",e.jsx("span",{className:"font-medium",children:n})]})]}),e.jsx(G,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(b),children:[e.jsx("div",{className:"my-3 text-sm",children:l&&e.jsxs("p",{children:["Tasa de cambio: ",me(l)]})}),e.jsx("div",{className:"my-3 text-lg",children:e.jsxs("p",{children:["Costo de la consulta:",e.jsxs("span",{className:"font-semibold text-accent",children:[" ","C$ ",s.toFixed(2)]})]})}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(w,{control:c.control,name:"cordobasReceived",render:({field:N})=>e.jsxs(f,{className:"flex-1",children:[e.jsx(p,{htmlFor:"cordobasReceived",children:"Córdobas C$"}),e.jsx(y,{children:e.jsx(I,{id:"cordobasReceived",type:"text",inputMode:"numeric",pattern:"\\d*",value:N.value??"",onChange:A=>{const S=u(A);N.onChange(S)},className:" text-sm px-2"})}),e.jsx(C,{})]})}),e.jsx(w,{control:c.control,name:"dollarsReceived",render:({field:N})=>e.jsxs(f,{className:"flex-1",children:[e.jsx(p,{htmlFor:"dollarsReceived",children:"Dólares $"}),e.jsx(y,{children:e.jsx(I,{id:"dollarsReceived",type:"text",inputMode:"numeric",pattern:"\\d*",value:N.value??"",onChange:A=>{const S=u(A);N.onChange(S)},className:" text-sm px-2"})}),e.jsx(C,{})]})})]}),e.jsx("div",{className:"my-3",children:e.jsx("p",{className:"text-sm",children:v()>0?`Faltan ${me(v())}`:""})}),e.jsx("div",{className:"my-3",children:e.jsxs("p",{children:["Cambio:",e.jsx("span",{className:"font-semibold",children:me(h())})]})}),e.jsx(ne,{className:"flex justify-between",children:e.jsx(T,{loading:j.isPending,type:"submit",className:"mt-4 w-full",children:"Confirmar"})})]})})]})]})}function Kl(){const{data:s}=$({queryKey:["recents"],queryFn:async()=>(await(await F.queries.recent.$get()).json()).data});return e.jsxs("div",{className:" p-4  ",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Atendido recientemente:"})}),e.jsx("div",{className:"",children:e.jsxs(ze,{children:[e.jsx(Le,{children:e.jsxs(te,{children:[e.jsx(re,{children:"Paciente"}),e.jsx(re,{children:"Costo"}),e.jsx(re,{children:"Cobrada"})]})}),e.jsxs(Ve,{children:[s&&s.length>0&&s.map(r=>e.jsxs(te,{children:[e.jsx(L,{children:r.patientName}),e.jsx(L,{children:r.price&&r.price.toFixed(2)+" C$"}),e.jsx(L,{children:r.pending?e.jsx(Kt,{className:"w-5 h-5 text-green-500"}):e.jsx(la,{querieId:r.id,patientName:r.patientName,monto:r.price})})]},r.id)),s&&s.length===0&&e.jsx(te,{children:e.jsx(L,{colSpan:2,children:"No hay consultas atendidas recientemente"})})]})]})})]})}const Gl=ee("/doctor/_doctor/upcoming")({component:()=>e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2",children:[e.jsx(Ol,{}),e.jsx($l,{}),e.jsx(_l,{}),e.jsx(Kl,{})]})});function oa(){const{data:s}=$({queryKey:["earings"],queryFn:async()=>(await(await F.queries.earrings.$get()).json()).data});return e.jsxs("div",{children:[e.jsx("div",{className:"w-full flex justify-between items-center",children:e.jsx("p",{className:"text-sm font-semibold",children:"Consultas que no han sido cobradas"})}),e.jsx("div",{children:e.jsxs(ze,{children:[e.jsx(Le,{children:e.jsxs(te,{children:[e.jsx(re,{children:"Paciente"}),e.jsx(re,{children:"Fecha"}),e.jsx(re,{children:"Emergencia"}),e.jsx(re,{children:"Monto"})]})}),e.jsx(Ve,{children:!s||s.length===0?e.jsx(te,{children:e.jsx(L,{className:"text-center",colSpan:5,children:"No hay datos para mostrar..."})}):s.map((r,n)=>{const t=In(r.date);return e.jsxs(te,{children:[e.jsx(L,{children:r.patientName}),e.jsx(L,{children:ie(t,"dd/MM/yyyy")}),e.jsx(L,{children:r.emergency?"Emergencia":""}),e.jsx(L,{children:e.jsx(ws,{className:"bg-accent",children:r.price&&r.price.toFixed(2)+" C$"})}),e.jsx(L,{children:r.price&&e.jsx(la,{querieId:r.id,monto:r.price,patientName:r.patientName})})]},n)})})]})})]})}function Bl(){const{data:s}=$({queryKey:["collected"],queryFn:async()=>(await(await F.queries.collected.$get()).json()).data}),r=(s==null?void 0:s.reduce((n,t)=>n+(t.price??0),0))??0;return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-full flex justify-between items-center",children:e.jsx("p",{className:"text-sm font-semibold",children:"Consultas recientes cobradas por mi asistente"})}),e.jsx("div",{children:e.jsxs(ze,{children:[e.jsx(Le,{children:e.jsxs(te,{children:[e.jsx(re,{children:"Paciente"}),e.jsx(re,{children:"Fecha"}),e.jsx(re,{children:"Emergencia"}),e.jsx(re,{children:"Monto"})]})}),e.jsx(Ve,{children:!s||s.length===0?e.jsx(te,{children:e.jsx(L,{className:"text-center",colSpan:4,children:"No hay datos para mostrar..."})}):s.map(n=>{const t=In(n.date);return e.jsxs(te,{children:[e.jsx(L,{children:n.patientName}),e.jsx(L,{children:ie(t,"dd/MM/yyyy")}),e.jsx(L,{children:n.emergency?"Emergencia":""}),e.jsx(L,{children:e.jsx(ws,{variant:"secondary",children:n.price!==null?`C$ ${n.price.toFixed(2)}`:"N/A"})})]},n.id)})}),e.jsx(Cr,{children:e.jsxs(te,{children:[e.jsx(L,{colSpan:3,children:"Total"}),e.jsxs(L,{className:"text-left",children:["C$ ",r.toFixed(2)]})]})})]})})]})}const Ul=m.object({amount:m.number({invalid_type_error:"Ingresa un valor",required_error:"Este campo es requerido"}).positive("No se aceptan valores negativos").min(10,"Agrega al menos C$ 10.00")}),Ql=m.object({rate:m.number({invalid_type_error:"Ingresa un valor",required_error:"Este campo es requerido"}).positive().min(35)});function Wl({cordobas:s,dolares:r}){return m.object({totalCordobas:m.number().max(s,`No puedes arquear un monto mayor a C$ ${s}`).default(0),totalDolares:m.number().max(r,`No puedes arquear un monto mayor a $ ${r}`).default(0),d1:m.number().int().max(100,"Máximo 100").default(0),d5:m.number().int().max(75,"Máximo 75").default(0),d10:m.number().int().max(50,"Máximo 50").default(0),d20:m.number().int().max(45,"Máximo 45").default(0),d50:m.number().int().max(25,"Máximo 25").default(0),d100:m.number().int().max(20,"Máximo 20").default(0),c5:m.number().int().max(500,"Máximo 500").default(0),c10:m.number().int().max(500,"Máximo 500").default(0),c20:m.number().int().max(500,"Máximo 500").default(0),c50:m.number().int().max(400,"Máximo 400").default(0),c100:m.number().int().max(400,"Máximo 400").default(0),c200:m.number().int().max(300,"Máximo 300").default(0),c500:m.number().int().max(200,"Máximo 200").default(0),c1000:m.number().int().max(100,"Máximo 100").default(0)})}function Jl({amount:s}){const r=H(),[n,t]=x.useState(!1),a=O({resolver:V(Ul),defaultValues:{amount:0}}),i=R({mutationFn:async o=>{if((await(await F.services.change.$patch({json:o})).json()).success)k.success("Registrado correctamente"),r.invalidateQueries({queryKey:["money"]});else throw new Error("Error al guardar el cambio");t(!1)},onError:o=>{k.error(o.message)}}),l=o=>{i.mutate(o)};return e.jsxs(B,{open:n,onOpenChange:t,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsxs(D,{className:"w-full justify-start text-primary hover:text-primary hover:bg-primary/10 transition-colors",variant:"ghost",children:[e.jsx(Nn,{className:"mr-2 h-4 w-4"}),"Aperturar"]})})}),e.jsx(K,{children:"Entregar efectivo"})]})}),e.jsxs(_,{className:"sm:max-w-[425px]",children:[e.jsxs(X,{children:[e.jsx(Q,{className:"text-2xl font-bold text-center text-primary",children:"Aperturar"}),e.jsx(we,{children:"Define el monto que deseas entregar a tu asistente"})]}),e.jsx(G,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(l),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(f,{children:[e.jsx(p,{className:"text-sm font-medium",children:"Efectivo actual"}),e.jsx(y,{children:e.jsxs("div",{className:"relative",children:[e.jsx(Or,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-primary h-4 w-4"}),e.jsx(I,{readOnly:!0,value:s.toFixed(2),disabled:i.isPending,className:"pl-10 pr-3 text-right font-semibold bg-primary/5"})]})}),e.jsx(C,{})]}),e.jsx(w,{control:a.control,name:"amount",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{className:"text-sm font-medium",children:"Efectivo a sumar"}),e.jsx(y,{children:e.jsxs("div",{className:"relative",children:[e.jsx(Or,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-primary h-4 w-4"}),e.jsx(I,{...o,disabled:i.isPending,value:o.value===0?"":o.value,onChange:c=>{const u=c.target.value;o.onChange(u===""?0:Number(u))},type:"number",step:"0.01",min:"0",placeholder:"0.00",className:"pl-10 pr-3 text-right font-semibold border-primary/20 focus:border-primary focus:ring-primary"})]})}),e.jsx(C,{})]})})]}),e.jsxs("div",{className:"p-4 bg-primary/5 rounded-lg",children:[e.jsx("p",{className:"text-sm  font-medium mb-2",children:"Resumen de la transacción"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Nuevo total:"}),e.jsx("span",{className:"text-lg font-bold text-primary",children:me(s+(a.watch("amount")||0))})]})]}),e.jsx(ne,{children:e.jsx(T,{loading:i.isPending,type:"submit",className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",children:"Guardar Cambio"})})]})})]})]})}const ca=x.forwardRef(({className:s,...r},n)=>e.jsx(wn,{className:q("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...r,ref:n,children:e.jsx(Gt,{className:q("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));ca.displayName=wn.displayName;function Yl({cordobas:s,dolares:r}){const[n,t]=x.useState(!1),[a,i]=x.useState(!1),l=H(),o=Wl({cordobas:s,dolares:r}),c=m.object({cordobas:m.number().max(s,`Máximo C$ ${s}`).default(0),dolares:m.number().max(r,`Máximo $ ${r}`).default(0)}),u=O({resolver:V(c)}),d=O({resolver:V(o),defaultValues:{totalCordobas:0,totalDolares:0,d1:0,d5:0,d10:0,d20:0,d50:0,d100:0,c5:0,c10:0,c20:0,c50:0,c100:0,c200:0,c500:0,c1000:0}}),h=()=>{const P={c5:d.watch("c5")*5,c10:d.watch("c10")*10,c20:d.watch("c20")*20,c50:d.watch("c50")*50,c100:d.watch("c100")*100,c200:d.watch("c200")*200,c500:d.watch("c500")*500,c1000:d.watch("c1000")*1e3},g={d1:d.watch("d1")*1,d5:d.watch("d5")*5,d10:d.watch("d10")*10,d20:d.watch("d20")*20,d50:d.watch("d50")*50,d100:d.watch("d100")*100},E=Object.values(P).reduce((M,ce)=>M+ce,0),z=Object.values(g).reduce((M,ce)=>M+ce,0);d.setValue("totalCordobas",isNaN(E)?0:E),d.setValue("totalDolares",isNaN(z)?0:z)},v=R({mutationFn:async()=>{(await(await F.services.conciliation.$patch({json:{cordobas:d.watch("totalCordobas"),dolares:d.watch("totalDolares")}})).json()).success?(k.success("Caja arqueada con exito"),l.invalidateQueries({queryKey:["money"]}),t(!1)):k.error("Error al arquear la caja. Por favor, intenta de nuevo.")}}),j=R({mutationFn:async()=>{(await(await F.services.conciliation.$patch({json:{cordobas:u.watch("cordobas"),dolares:u.watch("dolares")}})).json()).success?(k.success("Caja arqueada con exito"),l.invalidateQueries({queryKey:["money"]}),t(!1)):k.error("Error al arquear la caja. Por favor, intenta de nuevo.")}}),b=()=>{v.mutate()};x.useEffect(()=>{a&&h()},[d.watch()]);const N=()=>{j.mutate()},A=()=>{d.reset()},S=P=>{const g=P.target.value;if(/^\d*$/.test(g))return d.trigger(),parseInt(g)||0};return e.jsxs(B,{open:n,onOpenChange:t,children:[e.jsx(U,{asChild:!0,children:e.jsxs(D,{className:"w-full justify-start text-primary hover:text-primary hover:bg-primary/10 transition-colors",variant:"ghost",children:[e.jsx(Bt,{className:"mr-2 h-4 w-4"}),"Arqueo"]})}),e.jsxs(_,{style:{maxWidth:a?"750px":"500px"},children:[e.jsxs(X,{children:[e.jsx(Q,{className:"text-2xl font-bold",children:"Arqueo"}),e.jsx(we,{children:"Verifica la cantidad de dinero recaudado"})]}),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex sm:space-x-5 space-x-3 bg-primary/5 p-4 rounded-sm",children:[e.jsxs("p",{children:["Cordobas:"," ",e.jsx("span",{className:"font-semibold",children:me(s)})]}),e.jsxs("p",{children:["Dolares:",e.jsx("span",{className:"font-semibold",children:Cs(r)})]})]}),e.jsxs("div",{className:"flex justify-between ",children:[e.jsxs("div",{className:"flex space-x-2 items-center",children:[e.jsx(ca,{checked:a,onCheckedChange:i,id:"bill"}),e.jsx(Z,{className:"text-xs font-medium",htmlFor:"bill",children:"Usar contador de billetes"})]}),e.jsx("div",{children:a&&e.jsx(D,{variant:"secondary",size:"sm",onClick:A,children:"Limpiar"})})]}),e.jsx("div",{children:a?e.jsxs(G,{...d,children:[e.jsx(xe,{children:e.jsx("p",{children:"Ingresa la cantidad de cada denominación"})}),e.jsxs("form",{onSubmit:d.handleSubmit(b),className:"  w-full",children:[e.jsxs("div",{className:"w-full grid grid-cols-1 my-2 sm:grid-cols-2 gap-3 ",children:[e.jsxs("div",{className:" border  p-3 rounded-sm grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsx(w,{control:d.control,name:"c5",render:({field:P})=>e.jsxs(f,{children:[e.jsx(p,{children:"C$ 5"}),e.jsx(y,{children:e.jsx(I,{id:"c5",type:"text",inputMode:"numeric",pattern:"\\d*",value:P.value??"",onChange:g=>{const E=S(g);P.onChange(E)},className:" text-sm px-2"})}),e.jsx(xe,{}),e.jsx(C,{})]})}),e.jsx(w,{control:d.control,name:"c10",render:({field:P})=>e.jsxs(f,{children:[e.jsx(p,{children:"C$ 10"}),e.jsx(y,{children:e.jsx(I,{id:"c10",type:"text",inputMode:"numeric",pattern:"\\d*",value:P.value??"",onChange:g=>{const E=S(g);P.onChange(E)},className:"w-full h-10 text-sm px-2"})}),e.jsx(xe,{}),e.jsx(C,{})]})}),e.jsx(w,{control:d.control,name:"c20",render:({field:P})=>e.jsxs(f,{children:[e.jsx(p,{children:"C$ 20"}),e.jsx(y,{children:e.jsx(I,{id:"c20",type:"text",inputMode:"numeric",pattern:"\\d*",value:P.value??"",onChange:g=>{const E=S(g);P.onChange(E)},className:"w-full h-10 text-sm px-2"})}),e.jsx(xe,{}),e.jsx(C,{})]})}),e.jsx(w,{control:d.control,name:"c50",render:({field:P})=>e.jsxs(f,{children:[e.jsx(p,{children:"C$ 50"}),e.jsx(y,{children:e.jsx(I,{id:"c50",type:"text",inputMode:"numeric",pattern:"\\d*",value:P.value??"",onChange:g=>{const E=S(g);P.onChange(E)},className:"w-full h-10 text-sm px-2"})}),e.jsx(xe,{}),e.jsx(C,{})]})}),e.jsx(w,{control:d.control,name:"c100",render:({field:P})=>e.jsxs(f,{children:[e.jsx(p,{children:"C$ 100"}),e.jsx(y,{children:e.jsx(I,{id:"c100",type:"text",inputMode:"numeric",pattern:"\\d*",value:P.value??"",onChange:g=>{const E=S(g);P.onChange(E)},className:"w-full h-10 text-sm px-2"})}),e.jsx(xe,{}),e.jsx(C,{})]})}),e.jsx(w,{control:d.control,name:"c200",render:({field:P})=>e.jsxs(f,{children:[e.jsx(p,{children:"C$ 200"}),e.jsx(y,{children:e.jsx(I,{id:"c200",type:"text",inputMode:"numeric",pattern:"\\d*",value:P.value??"",onChange:g=>{const E=S(g);P.onChange(E)},className:"w-full h-10 text-sm px-2"})}),e.jsx(xe,{}),e.jsx(C,{})]})}),e.jsx(w,{control:d.control,name:"c500",render:({field:P})=>e.jsxs(f,{children:[e.jsx(p,{children:"C$ 500"}),e.jsx(y,{children:e.jsx(I,{id:"c500",type:"text",inputMode:"numeric",pattern:"\\d*",value:P.value??"",onChange:g=>{const E=S(g);P.onChange(E)},className:"w-full h-10 text-sm px-2"})}),e.jsx(xe,{}),e.jsx(C,{})]})}),e.jsx(w,{control:d.control,name:"c1000",render:({field:P})=>e.jsxs(f,{children:[e.jsx(p,{children:"C$ 1000"}),e.jsx(y,{children:e.jsx(I,{id:"c1000",type:"text",inputMode:"numeric",pattern:"\\d*",value:P.value??"",onChange:g=>{const E=S(g);P.onChange(E)},className:"w-full h-10 text-sm px-2"})}),e.jsx(xe,{}),e.jsx(C,{})]})})]}),e.jsxs("div",{className:" border  p-3 rounded-sm grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsx(w,{control:d.control,name:"d1",render:({field:P})=>e.jsxs(f,{children:[e.jsx(p,{children:"$ 1"}),e.jsx(y,{children:e.jsx(I,{id:"d1",type:"text",inputMode:"numeric",pattern:"\\d*",value:P.value??"",onChange:g=>{const E=S(g);P.onChange(E)},className:"w-full h-10 text-sm px-2"})}),e.jsx(xe,{}),e.jsx(C,{})]})}),e.jsx(w,{control:d.control,name:"d5",render:({field:P})=>e.jsxs(f,{children:[e.jsx(p,{children:"$ 5"}),e.jsx(y,{children:e.jsx(I,{id:"d5",type:"text",inputMode:"numeric",pattern:"\\d*",value:P.value??"",onChange:g=>{const E=S(g);P.onChange(E)},className:"w-full h-10 text-sm px-2"})}),e.jsx(xe,{}),e.jsx(C,{})]})}),e.jsx(w,{control:d.control,name:"d10",render:({field:P})=>e.jsxs(f,{children:[e.jsx(p,{children:"$ 10"}),e.jsx(y,{children:e.jsx(I,{id:"d10",type:"text",inputMode:"numeric",pattern:"\\d*",value:P.value??"",onChange:g=>{const E=S(g);P.onChange(E)},className:"w-full h-10 text-sm px-2"})}),e.jsx(xe,{}),e.jsx(C,{})]})}),e.jsx(w,{control:d.control,name:"d20",render:({field:P})=>e.jsxs(f,{children:[e.jsx(p,{children:"$ 20"}),e.jsx(y,{children:e.jsx(I,{id:"d20",type:"text",inputMode:"numeric",pattern:"\\d*",value:P.value??"",onChange:g=>{const E=S(g);P.onChange(E)},className:"w-full h-10 text-sm px-2"})}),e.jsx(xe,{}),e.jsx(C,{})]})}),e.jsx(w,{control:d.control,name:"d50",render:({field:P})=>e.jsxs(f,{children:[e.jsx(p,{children:"$ 50"}),e.jsx(y,{children:e.jsx(I,{id:"d50",type:"text",inputMode:"numeric",pattern:"\\d*",value:P.value??"",onChange:g=>{const E=S(g);P.onChange(E)},className:"w-full h-10 text-sm px-2"})}),e.jsx(xe,{}),e.jsx(C,{})]})}),e.jsx(w,{control:d.control,name:"d100",render:({field:P})=>e.jsxs(f,{children:[e.jsx(p,{children:"$ 100"}),e.jsx(y,{children:e.jsx(I,{id:"d100",type:"text",inputMode:"numeric",pattern:"\\d*",value:P.value??"",onChange:g=>{const E=S(g);P.onChange(E)},className:"w-full h-10 text-sm px-2"})}),e.jsx(xe,{}),e.jsx(C,{})]})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Total Córdobas:"}),e.jsx("div",{className:"space-y-1",children:e.jsxs("span",{className:"text-lg font-semibold",children:["C$ ",d.watch("totalCordobas").toLocaleString()]})}),d.formState.errors.totalCordobas&&e.jsx(C,{className:"text-xs",children:d.formState.errors.totalCordobas.message})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Total Dólares:"}),e.jsx("div",{className:"space-y-1",children:e.jsxs("span",{className:"text-lg font-semibold",children:["$ ",d.watch("totalDolares").toLocaleString()]})}),d.formState.errors.totalDolares&&e.jsx(C,{className:"text-xs",children:d.formState.errors.totalDolares.message})]}),e.jsx(T,{type:"submit",children:"Confirmar"})]})]}):e.jsxs(G,{...u,children:[e.jsx(xe,{children:"Escribe los montos que deseas arquear."}),e.jsxs("form",{onSubmit:u.handleSubmit(N),children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(w,{control:u.control,name:"cordobas",render:({field:P})=>e.jsxs(f,{className:"flex-1",children:[e.jsx(p,{htmlFor:"cordobas",children:"Córdobas C$"}),e.jsx(y,{children:e.jsx(I,{id:"cordobas",type:"text",inputMode:"numeric",pattern:"\\d*",value:P.value??"",onChange:g=>{const E=S(g);P.onChange(E)},className:"w-full h-10 text-sm px-2"})}),e.jsx(C,{})]})}),e.jsx(w,{control:u.control,name:"dolares",render:({field:P})=>e.jsxs(f,{className:"flex-1",children:[e.jsx(p,{htmlFor:"dolares",children:"Dólares $"}),e.jsx(y,{children:e.jsx(I,{id:"dolares",type:"text",inputMode:"numeric",pattern:"\\d*",value:P.value??"",onChange:g=>{const E=S(g);P.onChange(E)},className:"w-full h-10 text-sm px-2"})}),e.jsx(C,{})]})})]}),e.jsx("div",{className:"flex w-full justify-end my-2",children:e.jsx(T,{loading:j.isPending,type:"submit",children:"Confirmar"})})]})]})})]})]})]})}function Zl(){const{data:s}=$({queryKey:["money"],queryFn:async()=>(await(await F.services.money.$get()).json()).data??null}),r=[{title:"Apertura",value:me((s==null?void 0:s.change)??0),actionComponent:e.jsx(Jl,{amount:(s==null?void 0:s.change)??0})},{title:"Efectivo Total",value:me(((s==null?void 0:s.total)??0)+((s==null?void 0:s.change)??0)),actionComponent:e.jsx(Yl,{cordobas:((s==null?void 0:s.cordobas)??0)+((s==null?void 0:s.change)??0),dolares:(s==null?void 0:s.dollars)??0})},{title:"Gastos del día",value:me((s==null?void 0:s.expencesTotal)??0),actionComponent:e.jsx(Me,{to:"/doctor/expences",className:"w-full",children:e.jsxs(D,{className:"w-full justify-start text-primary hover:text-primary hover:bg-primary/10 transition-colors",variant:"ghost",children:[e.jsx(Cn,{className:"mr-2 h-4 w-4"}),"Ver detalle"]})})}];return e.jsxs("div",{className:"container mx-auto px-4 ",children:[e.jsx("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:r.map((n,t)=>e.jsx(eo,{item:n,index:t},n.title))}),e.jsx("div",{className:"sm:mt-5 mt-3",children:e.jsx(Bl,{})})]})}const Xl={initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5}};function eo({item:s,index:r}){return e.jsx(Ce.div,{...Xl,transition:{delay:r*.1},children:e.jsxs(he,{className:"h-full sm:p-3 p-2 flex flex-col",children:[e.jsxs(je,{className:"p-0 flex-grow",children:[e.jsx(ve,{className:"text-sm font-medium text-muted-foreground",children:s.title}),s.value!==void 0?e.jsx("p",{className:"text-lg font-bold text-primary",children:s.value}):e.jsx("p",{className:"text-xl font-bold text-muted-foreground"})]}),s.actionComponent&&e.jsx(ta,{className:"p-0",children:s.actionComponent})]})})}const so=ee("/doctor/_doctor/services")({component:ro}),os=[{id:"assistant-consultations",title:"Cobradas",icon:e.jsx(ao,{className:"h-4 w-4"}),render:()=>e.jsx(Zl,{})},{id:"pending",title:"Pendientes",icon:e.jsx(no,{className:"h-4 w-4"}),render:()=>e.jsx(oa,{})}];function ro(){const[s,r]=x.useState(os[0].id),[n,t]=x.useState(!1);x.useEffect(()=>{const i=()=>{const l=window.scrollY;for(let o=os.length-1;o>=0;o--){const c=document.getElementById(os[o].id);if(c&&c.offsetTop<=l+200){r(os[o].id);break}}};return window.addEventListener("scroll",i),()=>window.removeEventListener("scroll",i)},[]);const a=i=>{const l=document.getElementById(i);l&&l.scrollIntoView({behavior:"smooth"}),t(!1)};return e.jsxs("div",{className:"flex min-h-screen w-full",children:[e.jsx(D,{className:"fixed top-20 left-0 z-20 ",variant:"ghost",onClick:()=>t(!n),children:e.jsx(Cn,{className:"h-6 w-6"})}),e.jsx("aside",{className:`fixed inset-y-0 z-20 pt-32 sm:pt-24  flex flex-col items-start gap-4 border-r p-4 bg-background transition-transform duration-300 ease-in-out ${n?"translate-x-0":"-translate-x-full"} md:translate-x-0`,children:os.map(i=>e.jsxs(D,{variant:s===i.id?"default":"ghost",className:"w-full justify-start",onClick:()=>a(i.id),children:[e.jsx("span",{className:"mr-2",children:i.icon}),e.jsx("span",{children:i.title})]},i.id))}),e.jsx("main",{className:"flex-1 mx-7 md:ml-56 p-6 ",children:os.map(i=>e.jsxs("section",{id:i.id,className:"mb-20 scroll-mt-24",children:[e.jsx("h2",{className:"mb-4 text-2xl font-bold",children:i.title}),e.jsx("div",{children:i.render()})]},i.id))})]})}function no(s){return e.jsxs("svg",{...s,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),e.jsx("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"})]})}function ao(s){return e.jsxs("svg",{...s,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}m.object({reason:m.string().max(700,{message:"Máximo 15 caracteres"})});m.object({history:m.string().max(700,{message:"Máximo 700 caracteres"})});m.object({interrogation:m.string().max(700,{message:"Máximo 700 caracteres"})});m.object({price:m.number().positive(),pay:m.boolean().default(!1)});m.object({data:m.string().max(700,{message:"Máximo 700 caracteres"}),autoType:m.enum(["history","interrogation","reason","abd","anus","aspects","diag","exInf","exSup","gen","neu","obs","skin"])});const da=m.object({craneo:m.string().optional().nullable(),ojos:m.string().optional().nullable(),orejas:m.string().optional().nullable(),nariz:m.string().optional().nullable(),boca:m.string().optional().nullable(),cuello:m.string().optional().nullable()}),ua=m.object({pulmonares:m.string().optional().nullable(),mamas:m.string().optional().nullable(),caja:m.string().optional().nullable(),cardiaco:m.string().optional().nullable()}),to=({textAreaRef:s,triggerAutoSize:r,maxHeight:n=Number.MAX_SAFE_INTEGER,minHeight:t=0})=>{const[a,i]=x.useState(!0);x.useEffect(()=>{if(s){a&&(s.style.minHeight=`${t+2}px`,n>t&&(s.style.maxHeight=`${n}px`),i(!1)),s.style.height=`${t+2}px`;const o=s.scrollHeight;o>n?s.style.height=`${n}px`:s.style.height=`${o+2}px`}},[s,r])},ae=x.forwardRef(({maxHeight:s=Number.MAX_SAFE_INTEGER,minHeight:r=52,className:n,onChange:t,value:a,...i},l)=>{const o=x.useRef(null),[c,u]=x.useState("");return to({textAreaRef:o.current,triggerAutoSize:c,maxHeight:s,minHeight:r}),x.useImperativeHandle(l,()=>({textArea:o.current,focus:()=>{var d;return(d=o.current)==null?void 0:d.focus()},maxHeight:s,minHeight:r})),x.useEffect(()=>{u(a)},[i==null?void 0:i.defaultValue,a]),e.jsx("textarea",{...i,value:a,ref:o,className:q("flex w-full font-semibold rounded-md border border-input bg-background px-3 py-2  ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),onChange:d=>{u(d.target.value),t==null||t(d)}})});ae.displayName="AutosizeTextarea";function io({querieId:s,data:r}){const[n,t]=x.useState(!1),a=H(),i=O({resolver:V(da),defaultValues:r??{}}),l=R({mutationFn:async c=>{const d=await(await F.queries.head[":querieId"].$patch({param:{querieId:s},json:c})).json();d.success||k(d.error),k.success("Guardado correctamente"),a.invalidateQueries({queryKey:["groups",s]}),t(!1)}}),o=async c=>l.mutate(c);return e.jsxs(B,{open:n,onOpenChange:t,children:[e.jsx(U,{children:e.jsx(D,{className:"",size:"icon",children:e.jsx(Se,{})})}),e.jsxs(_,{className:"max-w-[1200px]",children:[e.jsx(Q,{children:"Cabeza y cuello"}),e.jsx(G,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(o),children:[e.jsxs("div",{className:" w-full grid grid-cols-2 gap-4 ",children:[e.jsx(w,{control:i.control,name:"craneo",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Cráneo y cuero cabelludo"}),e.jsx(y,{children:e.jsx(ae,{value:c.value??"",onChange:c.onChange,disabled:l.isPending})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"ojos",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Ojos"}),e.jsx(y,{children:e.jsx(ae,{value:c.value??"",onChange:c.onChange,disabled:l.isPending})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"orejas",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Orejas y oídos"}),e.jsx(y,{children:e.jsx(ae,{value:c.value??"",onChange:c.onChange,disabled:l.isPending})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"nariz",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Nariz"}),e.jsx(y,{children:e.jsx(ae,{value:c.value??"",onChange:c.onChange,disabled:l.isPending})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"boca",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Boca"}),e.jsx(y,{children:e.jsx(ae,{value:c.value??"",onChange:c.onChange,disabled:l.isPending})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"cuello",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Cuello"}),e.jsx(y,{children:e.jsx(ae,{value:c.value??"",onChange:c.onChange,disabled:l.isPending})}),e.jsx(C,{})]})})]}),e.jsx(ne,{children:e.jsx(T,{loading:l.isPending,className:"my-2",children:"Guardar"})})]})})]})]})}function lo({querieId:s,data:r}){const n=oo(r);return e.jsxs(he,{children:[e.jsx(je,{className:"my-0 py-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ve,{className:"text-lg font-semibold",children:"Cabeza y Cuello"}),e.jsx(io,{querieId:s,data:n})]})}),e.jsx(pe,{className:"pt-0 mt-0 px-6",children:n?Object.entries(n).map(([t,a])=>a!=null?e.jsxs("div",{className:"my-1 w-full",children:[e.jsx("span",{className:" font-bold",children:`${t.charAt(0).toUpperCase()}${t.slice(1)}: `}),e.jsx("span",{className:"",children:a.split(`
`).map((i,l)=>e.jsxs(Ts.Fragment,{children:[i,e.jsx("br",{})]},l))})]},t):null):e.jsx("div",{children:"Sin datos para mostrar"})})]})}function oo(s){if(!s)return null;try{const r=JSON.parse(s);return da.parse(r)}catch{return null}}function co({querieId:s,data:r}){const[n,t]=x.useState(!1),a=H(),i=O({resolver:V(ua),defaultValues:r??{}}),l=c=>o.mutate(c),o=R({mutationFn:async c=>{const d=await(await F.queries.torax[":querieId"].$patch({param:{querieId:s},json:c})).json();d.success||k.error(d.error),k.success("Guardado correctamente"),a.invalidateQueries({queryKey:["groups",s]}),t(!1)}});return e.jsxs(B,{open:n,onOpenChange:t,children:[e.jsx(U,{children:e.jsx(D,{className:"",size:"icon",children:e.jsx(Se,{})})}),e.jsxs(_,{className:"max-w-[1200px]",children:[e.jsx(Q,{children:"Tórax"}),e.jsx(G,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(l),children:[e.jsxs("div",{className:" w-full grid grid-cols-2 gap-4 ",children:[e.jsx(w,{control:i.control,name:"caja",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Caja torácica"}),e.jsx(y,{children:e.jsx(ae,{value:c.value??"",onChange:c.onChange,disabled:o.isPending})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"mamas",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Mamas"}),e.jsx(y,{children:e.jsx(ae,{value:c.value??"",onChange:c.onChange,disabled:o.isPending})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"cardiaco",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Cardíaco"}),e.jsx(y,{children:e.jsx(ae,{value:c.value??"",onChange:c.onChange,disabled:o.isPending})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"pulmonares",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Campos Pulmonares"}),e.jsx(y,{children:e.jsx(ae,{value:c.value??"",onChange:c.onChange,disabled:o.isPending})}),e.jsx(C,{})]})})]}),e.jsx(ne,{children:e.jsx(T,{className:"my-2",type:"submit",loading:o.isPending,children:"Guardar"})})]})})]})]})}function uo({querieId:s,data:r}){const n=mo(r);return e.jsxs(he,{children:[e.jsx(je,{className:"my-0 py-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ve,{className:"text-lg font-semibold ",children:"Tórax:"}),e.jsx(co,{querieId:s,data:n})]})}),e.jsx(pe,{className:"pt-0 mt-0 px-6",children:n?Object.entries(n).map(([t,a])=>a!=null?e.jsxs("div",{className:"my-1 w-full",children:[e.jsx("span",{className:" font-bold",children:`${t.charAt(0).toUpperCase()}${t.slice(1)}: `}),e.jsx("span",{className:"",children:a.split(`
`).map((i,l)=>e.jsxs(Ts.Fragment,{children:[i,e.jsx("br",{})]},l))})]},t):null):e.jsx("div",{children:"Sin datos para mostrar"})})]})}function mo(s){if(!s)return null;try{const r=JSON.parse(s);return ua.parse(r)}catch{return null}}const xo=m.object({FC:m.number().int().min(30,{message:"La frecuencia cardíaca mínima es 30"}).max(220,{message:"La frecuencia cardíaca máxima es 220"}).nullable().optional(),SA:m.number().int().min(0,{message:"Mínimo 0"}).max(10,{message:"Máximo 10"}).nullable().optional(),FR:m.number().int().min(10,{message:"La frecuencia respiratoria mínima es 10"}).max(60,{message:"La frecuencia respiratoria máxima es 60"}).nullable().optional(),T:m.number().min(30,{message:"La temperatura mínima es 30°C"}).max(45,{message:"La temperatura máxima es 45°C"}).nullable().optional(),PA:m.object({a:m.number().min(10,{message:"La presión sistólica mínima es 10"}).max(300,{message:"La presión sistólica máxima es 300"}).nullable().optional(),b:m.number().min(10,{message:"La presión diastólica mínima es 10"}).max(300,{message:"La presión diastólica máxima es 300"}).nullable().optional()}).superRefine((s,r)=>{const{a:n,b:t}=s;n==null&&t!==null&&t!==void 0&&r.addIssue({path:["PA","a"],code:m.ZodIssueCode.custom,message:"Debe proporcionar la presión sistólica si se proporciona la diastólica."}),t==null&&n!==null&&n!==void 0&&r.addIssue({path:["PA","b"],code:m.ZodIssueCode.custom,message:"Debe proporcionar la presión diastólica si se proporciona la sistólica."}),n==null&&t==null&&r.addIssue({path:["PA"],code:m.ZodIssueCode.custom,message:"Debe proporcionar ambos valores o ninguno."})}).nullable().optional()}),ho=m.object({IMC:m.number().min(10,{message:"El IMC mínimo es 10"}).max(50,{message:"El IMC máximo es 50"}).nullable().optional(),W:m.object({peso:m.number().min(1,"El peso mínimo es 1").max(300,"El peso máximo es 300"),unit:m.string()}).nullable().optional(),TL:m.number().min(30,{message:"La talla mínima es 30 cm"}).max(300,{message:"La talla máxima es 300 cm"}).nullable().optional(),PC:m.number().min(25,{message:"El perímetro cefálico mínimo es 25 cm"}).max(60,{message:"El perímetro cefálico máximo es 60 cm"}).nullable().optional(),PRA:m.number().min(40,{message:"El perímetro abdominal mínimo es 40 cm"}).max(150,{message:"El perímetro abdominal máximo es 150 cm"}).nullable().optional(),ASC:m.number().min(.5,{message:"El área superficial corporal mínima es 0.5 m²"}).max(3,{message:"El área superficial corporal máxima es 3.0 m²"}).nullable().optional(),PT:m.number().min(60,{message:"El perímetro torácico mínimo es 60 cm"}).max(140,{message:"El perímetro torácico máximo es 140 cm"}).nullable().optional()});function jo({querieId:s,data:r,specialtie:n}){var u,d;const t=H(),[a,i]=x.useState(!1),l=O({resolver:V(xo),defaultValues:{FC:r==null?void 0:r.FC,FR:r==null?void 0:r.FR,SA:r==null?void 0:r.SA,PA:{a:(u=r==null?void 0:r.PA)==null?void 0:u.a,b:(d=r==null?void 0:r.PA)==null?void 0:d.b},T:r==null?void 0:r.T}}),o=R({mutationFn:async h=>{const j=await(await F.queries.vitals[":querieId"].$post({param:{querieId:s},json:h})).json();return j.success||k.error(j.error),t.invalidateQueries({queryKey:["exam"]}),i(!1),j}}),c=h=>{o.mutate(h)};return e.jsxs(B,{open:a,onOpenChange:i,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsx(D,{size:"icon",className:"ml-2",children:e.jsx(Se,{})})})}),e.jsx(K,{children:"Guardar signos vitales"})]})}),e.jsxs(_,{className:"sm:max-w-4xl w-full",children:[e.jsx(X,{children:e.jsx(Q,{children:"Signos vitales"})}),e.jsx(G,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(c),children:[e.jsxs("div",{className:"w-full sm:flex sm:space-y-0 space-y-3  justify-between",children:[e.jsx(w,{control:l.control,name:"FC",render:({field:h})=>{var v;return e.jsxs(f,{children:[e.jsx(p,{children:"Frecuencia cardíaca:"}),e.jsx(y,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-[80px]",onChange:j=>{const b=j.target.value;h.onChange(b===""?null:Number(b))},value:(v=h.value)==null?void 0:v.toString(),disabled:o.isPending,type:"number"}),e.jsx("span",{className:"text-muted-foreground",children:"LPM"})]})}),e.jsx(C,{})]})}}),e.jsx(w,{control:l.control,name:"FR",render:({field:h})=>{var v;return e.jsxs(f,{children:[e.jsx(p,{children:"Frecuencia Respiratoria:"}),e.jsx(y,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-[80px]",onChange:j=>{const b=j.target.value;h.onChange(b===""?null:Number(b))},value:(v=h.value)==null?void 0:v.toString(),disabled:o.isPending,type:"number"}),e.jsx("span",{className:"text-muted-foreground",children:"RPM"})]})}),e.jsx(C,{})]})}}),e.jsx(w,{control:l.control,name:"PA",render:({field:h})=>{var v,j,b,N,A,S,P,g;return e.jsxs(f,{children:[e.jsx(p,{children:"Presión Arterial:"}),e.jsx(y,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-[60px]",onChange:E=>{var M;const z=E.target.value;h.onChange({a:z===""?null:Number(z),b:(M=h.value)==null?void 0:M.b})},value:(j=(v=h.value)==null?void 0:v.a)==null?void 0:j.toString(),disabled:o.isPending,type:"number"}),e.jsx("span",{className:"text-muted-foreground",children:"/"}),e.jsx(I,{className:"w-[60px]",onChange:E=>{var M;const z=E.target.value;h.onChange({a:(M=h.value)==null?void 0:M.a,b:z===""?null:Number(z)})},value:(N=(b=h.value)==null?void 0:b.b)==null?void 0:N.toString(),disabled:o.isPending,type:"number"}),e.jsx("span",{className:"text-muted-foreground",children:"mmHg"}),e.jsx("p",{className:"text-[0.8rem] font-medium text-destructive",children:((S=(A=l.formState.errors.PA)==null?void 0:A.a)==null?void 0:S.message)||((g=(P=l.formState.errors.PA)==null?void 0:P.b)==null?void 0:g.message)||""})]})})]})}}),e.jsx(w,{control:l.control,name:"T",render:({field:h})=>{var v;return e.jsxs(f,{children:[e.jsx(p,{children:"Temperatura:"}),e.jsx(y,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-[80px]",onChange:j=>{const b=j.target.value;h.onChange(b===""?null:Number(b))},value:(v=h.value)==null?void 0:v.toString(),disabled:o.isPending,type:"number"}),e.jsx("span",{className:"text-muted-foreground",children:"°C"})]})}),e.jsx(C,{})]})}}),n!=="GENERAL"&&e.jsx(w,{control:l.control,name:"SA",render:({field:h})=>e.jsxs(f,{children:[e.jsx(p,{children:"Silverman Andersen:"}),e.jsx(y,{children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(I,{className:"w-[80px]",onChange:v=>{const j=v.target.value;/^[0-9]*$/.test(j)&&h.onChange(j===""?null:Number(j))},value:h.value||"",disabled:o.isPending,type:"number"})})}),e.jsx(C,{})]})})]}),e.jsx(T,{className:"sm:mt-8",loading:o.isPending,type:"submit",children:"Guardar"})]})})]})]})}function po({querieId:s,data:r,specialtie:n}){const t=H(),[a,i]=x.useState(!1),l=O({resolver:V(ho),defaultValues:r||{}}),o=R({mutationFn:async v=>{const b=await(await F.queries.antro[":querieId"].$post({param:{querieId:s},json:v})).json();return b.success||k.error(b.error),t.invalidateQueries({queryKey:["exam"]}),i(!1),b}}),c=(v,j)=>v&&j?Math.round(v/Math.pow(j/100,2)):null,u=(v,j)=>v&&j?.007184*Math.pow(v,.425)*Math.pow(j,.725):null,d=(v,j)=>j==="Lb"?v*.453592:v,h=v=>{o.mutate(v)};return e.jsxs(B,{open:a,onOpenChange:i,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsx(D,{size:"icon",className:"ml-2",children:e.jsx(Se,{})})})}),e.jsx(K,{children:"Guardar Datos antropométricos"})]})}),e.jsxs(_,{className:"sm:max-w-4xl w-full",children:[e.jsx(X,{children:e.jsx(Q,{children:"Datos antropométricos:"})}),e.jsx(G,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(h),children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mt-4",children:[e.jsx(w,{control:l.control,name:"W",render:({field:v})=>{var j,b,N,A,S,P;return e.jsxs(f,{children:[e.jsx(p,{children:"Peso:"}),e.jsx(y,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-[80px]",onChange:g=>{var ce;const E=g.target.value,z=E===""?null:Number(E),M=((ce=v.value)==null?void 0:ce.unit)||"Kg";if(z!=null){const Ie=d(z,M),We=u(Ie,l.getValues("TL")??null),ye=c(Ie,l.getValues("TL")??null);v.onChange({peso:z,unit:M}),l.setValue("ASC",We),l.setValue("IMC",ye)}},value:((j=v.value)==null?void 0:j.peso)||"",disabled:o.isPending,type:"number"}),e.jsxs(be,{onValueChange:g=>{var Ie;const E=(Ie=v.value)==null?void 0:Ie.peso,z=d(E||0,g),M=u(z,l.getValues("TL")??null),ce=c(z,l.getValues("TL")??null);v.onChange({peso:E,unit:g}),l.setValue("ASC",M),l.setValue("IMC",ce)},defaultValue:"Kg",value:((b=v.value)==null?void 0:b.unit)||"Kg",children:[e.jsx(fe,{className:"w-[60px]",children:e.jsx(Ne,{})}),e.jsxs(ge,{children:[e.jsx(se,{value:"Kg",children:"Kg"}),e.jsx(se,{value:"Lb",children:"Lb"})]})]})]})}),((A=(N=l.formState.errors.W)==null?void 0:N.peso)==null?void 0:A.message)&&e.jsx("p",{className:"text-[0.8rem] font-medium text-destructive",children:(P=(S=l.formState.errors.W)==null?void 0:S.peso)==null?void 0:P.message})]})}}),e.jsx(w,{control:l.control,name:"TL",render:({field:v})=>e.jsxs(f,{children:[e.jsx(p,{children:"Talla:"}),e.jsx(y,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-[80px]",onChange:j=>{var P,g;const b=j.target.value,N=b===""?null:Number(b),A=u(((P=l.getValues("W"))==null?void 0:P.peso)??null,N),S=c(((g=l.getValues("W"))==null?void 0:g.peso)??null,N);v.onChange(N),l.setValue("ASC",A),l.setValue("IMC",S)},value:v.value||"",disabled:o.isPending,type:"number"}),e.jsx("span",{className:"text-muted-foreground",children:"CM"})]})}),e.jsx(C,{})]})}),n!=="GENERAL"&&e.jsxs(e.Fragment,{children:[e.jsx(w,{control:l.control,name:"PC",render:({field:v})=>e.jsxs(f,{children:[e.jsx(p,{children:"Perímetro Cefálico:"}),e.jsx(y,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-[80px]",onChange:j=>{const b=j.target.value;v.onChange(b===""?null:Number(b))},value:v.value||"",disabled:o.isPending,type:"number"}),e.jsx("span",{className:"text-muted-foreground",children:"CM"})]})}),e.jsx(C,{})]})}),e.jsx(w,{control:l.control,name:"PT",render:({field:v})=>e.jsxs(f,{children:[e.jsx(p,{children:"Perímetro Torácico:"}),e.jsx(y,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-[80px]",onChange:j=>{const b=j.target.value;v.onChange(b===""?null:Number(b))},value:v.value||"",disabled:o.isPending,type:"number"}),e.jsx("span",{className:"text-muted-foreground",children:"CM"})]})}),e.jsx(C,{})]})}),e.jsx(w,{control:l.control,name:"PRA",render:({field:v})=>e.jsxs(f,{children:[e.jsx(p,{children:"Perímetro Abdominal:"}),e.jsx(y,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-[80px]",onChange:j=>{const b=j.target.value;v.onChange(b===""?null:Number(b))},value:v.value||"",disabled:o.isPending,type:"number"}),e.jsx("span",{className:"text-muted-foreground",children:"CM"})]})}),e.jsx(C,{})]})})]}),e.jsx(w,{control:l.control,name:"IMC",render:({field:v})=>e.jsxs(f,{children:[e.jsx(p,{children:"IMC:"}),e.jsx(y,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-[80px]",onChange:j=>{const b=j.target.value;v.onChange(b===""?null:Number(b))},value:v.value||"",disabled:!0,type:"number"}),e.jsx("span",{className:"text-muted-foreground"})]})}),e.jsx(C,{})]})}),e.jsx(w,{control:l.control,name:"ASC",render:({field:v})=>e.jsxs(f,{children:[e.jsx(p,{children:"Área Superficial Corporal:"}),e.jsx(y,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-[80px]",onChange:j=>{const b=j.target.value;v.onChange(b===""?null:Number(b))},value:v.value||"",disabled:!0,type:"number"}),e.jsx("span",{className:"text-muted-foreground",children:"m²"})]})}),e.jsx(C,{})]})})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(D,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancelar"}),e.jsx(T,{type:"submit",loading:o.isPending,loadingText:"Guardando",children:"Guardar"})]})]})})]})]})}function ma({querieId:s,specialtie:r}){var l,o,c,u,d,h,v,j,b,N,A,S,P,g,E,z;const{data:n,isPending:t}=$({queryFn:async()=>(await(await F.queries.exam.$get({query:{querieId:s}})).json()).data,queryKey:["exam"]});if(t)return e.jsx("div",{children:"Cargando..."});const a=[{icon:e.jsx(Hr,{className:"text-ring"}),label:"Frecuencia cardíaca:",value:(l=n==null?void 0:n.vitals)!=null&&l.FC?`${n.vitals.FC}`:null,unit:"LPM"},{icon:e.jsx(_i,{className:"text-ring"}),label:"Frecuencia Respiratoria:",value:(o=n==null?void 0:n.vitals)!=null&&o.FR?`${n.vitals.FR}`:null,unit:"RPM"},{icon:e.jsx(Hr,{className:"text-ring"}),label:"Presión Arterial:",value:(u=(c=n==null?void 0:n.vitals)==null?void 0:c.PA)!=null&&u.a?`${n.vitals.PA.a}/${n.vitals.PA.b}`:null,unit:"mmHg"},{icon:e.jsx(Ki,{className:"text-ring"}),label:"Temperatura:",value:(d=n==null?void 0:n.vitals)!=null&&d.T?`${n.vitals.T}`:null,unit:"°C"},{icon:e.jsx(rs,{className:"text-ring"}),label:"Silverman Andersen:",value:(h=n==null?void 0:n.vitals)!=null&&h.SA?`${n.vitals.SA}`:null,unit:"cm"}],i=[{icon:e.jsx(Gi,{className:"text-ring"}),label:"Peso:",value:(j=(v=n==null?void 0:n.antropometrics)==null?void 0:v.W)!=null&&j.peso?`${n.antropometrics.W.peso}`:null,unit:(N=(b=n==null?void 0:n.antropometrics)==null?void 0:b.W)==null?void 0:N.unit},{icon:e.jsx(rs,{className:"text-ring"}),label:"Talla:",value:(A=n==null?void 0:n.antropometrics)!=null&&A.TL?`${n.antropometrics.TL}`:null,unit:"cm"},{icon:e.jsx(rs,{className:"text-ring"}),label:"Perímetro Cefálico:",value:(S=n==null?void 0:n.antropometrics)!=null&&S.PC?`${n.antropometrics.PC}`:null,unit:"cm"},{icon:e.jsx(rs,{className:"text-ring"}),label:"Perímetro Torácico:",value:(P=n==null?void 0:n.antropometrics)!=null&&P.PT?`${n.antropometrics.PT}`:null,unit:"cm"},{icon:e.jsx(rs,{className:"text-ring"}),label:"Perímetro Abdominal:",value:(g=n==null?void 0:n.antropometrics)!=null&&g.PRA?`${n.antropometrics.PRA}`:null,unit:"cm"},{icon:e.jsx(rs,{className:"text-ring"}),label:"Área superficie corporal:",value:(E=n==null?void 0:n.antropometrics)!=null&&E.ASC?`${n.antropometrics.ASC}`:null,unit:"m²"},{icon:e.jsx(rs,{className:"text-ring"}),label:"Indice de masa corporal",value:(z=n==null?void 0:n.antropometrics)!=null&&z.IMC?`${n.antropometrics.IMC}`:null,unit:""}];return e.jsx("section",{className:"space-y-4",children:e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsx("h1",{className:"text-lg font-semibold  mr-2",children:"Signos Vitales"}),e.jsx(jo,{specialtie:r,data:n==null?void 0:n.vitals,querieId:s}),a.map((M,ce)=>M.value&&e.jsx(Gr,{icon:M.icon,label:M.label,value:`${M.value} ${M.unit}`},ce)),e.jsx("h1",{className:"text-lg font-semibold  mr-2",children:"Datos antropométricos: "}),e.jsx(po,{specialtie:r,data:n==null?void 0:n.antropometrics,querieId:s}),i.map((M,ce)=>M.value&&e.jsx(Gr,{icon:M.icon,label:M.label,value:`${M.value} ${M.unit}`},ce))]})})}function Gr({icon:s,label:r,value:n}){return e.jsxs("div",{className:"min-w-32 flex items-center gap-2 p-2 bg-card border border-customborder rounded shadow-sm",children:[e.jsx("div",{children:e.jsx("p",{className:"text-xs font-medium",children:r})}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs",children:[e.jsx("div",{className:"flex-shrink-0",children:s}),e.jsx("p",{className:"font-bold",children:n})]})]})}const fo=m.object({tradeName:m.string({required_error:"Este campo es requerido"}),presentation:m.string({required_error:"Este campo es requerido"}).min(1,{message:"Error"}),indications:m.string({required_error:"Este campo es requerido"}).min(1,{message:"Error"}),genericName:m.string().optional(),drugId:m.string()}),go=m.object({details:m.array(fo)}),Bs=x.forwardRef(({className:s,...r},n)=>e.jsx(Pe,{ref:n,className:q("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",s),...r}));Bs.displayName=Pe.displayName;const xa=x.forwardRef(({className:s,...r},n)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(Sn,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(Pe.Input,{ref:n,className:q("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),...r})]}));xa.displayName=Pe.Input.displayName;const Sr=x.forwardRef(({className:s,...r},n)=>e.jsx(Pe.List,{ref:n,className:q("max-h-[300px] overflow-y-auto overflow-x-hidden",s),...r}));Sr.displayName=Pe.List.displayName;const Us=x.forwardRef((s,r)=>e.jsx(Pe.Empty,{ref:r,className:"py-6 text-center text-sm",...s}));Us.displayName=Pe.Empty.displayName;const Qs=x.forwardRef(({className:s,...r},n)=>e.jsx(Pe.Group,{ref:n,className:q("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...r}));Qs.displayName=Pe.Group.displayName;const vo=x.forwardRef(({className:s,...r},n)=>e.jsx(Pe.Separator,{ref:n,className:q("-mx-1 h-px bg-border",s),...r}));vo.displayName=Pe.Separator.displayName;const Ws=x.forwardRef(({className:s,...r},n)=>e.jsx(Pe.Item,{ref:n,className:q("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r}));Ws.displayName=Pe.Item.displayName;const Js=Qt,Ys=Wt,Es=x.forwardRef(({className:s,align:r="center",sideOffset:n=4,...t},a)=>e.jsx(Ut,{children:e.jsx(Pn,{ref:a,align:r,sideOffset:n,className:q("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t})}));Es.displayName=Pn.displayName;const yo=s=>{var v;const{data:r,onSelect:n}=s,[t,a]=x.useState(!1),[i,l]=x.useState(""),[o,c]=x.useState(""),[u,d]=x.useState(r),h=j=>{if(u.find(N=>N.value===j))l(j),n(j);else if(o){const N={value:o,label:o};d(A=>[...A,N]),l(o),n(o)}a(!1)};return e.jsxs(Js,{open:t,onOpenChange:a,children:[e.jsx(Ys,{asChild:!0,children:e.jsxs(D,{variant:"outline",role:"combobox","aria-expanded":t,className:"w-[200px] justify-between",children:[i?(v=u.find(j=>j.value===i))==null?void 0:v.label:o||"Presentación...",e.jsx(Ke,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(Es,{className:"w-[200px] p-0",children:e.jsxs(Bs,{children:[e.jsx(xa,{value:o,onValueChange:j=>c(j),placeholder:"Presentación..."}),e.jsx(Us,{children:e.jsx(D,{onClick:()=>h(o),children:"Agregar"})}),e.jsx(Qs,{children:u.map(j=>e.jsxs(Ws,{value:j.value,onSelect:()=>h(j.value),children:[e.jsx(as,{className:q("mr-2 h-4 w-4",i===j.value?"opacity-100":"opacity-0")}),j.label]},j.value))})]})})]})},Pr=m.object({genericName:m.string().optional().nullable(),tradeName:m.string({required_error:"Este campo es requerido"}).min(4,{message:"Mínimo 4 caracteres"}),presentations:m.string().array()});function bo(s){const r=H(),[n,t]=x.useState(!1),[a,i]=x.useState(""),[l,o]=x.useState(s.prescriptionDetails),c=R({mutationFn:async()=>{const P={tradeName:a.toLowerCase(),presentations:[]};if(!Pr.safeParse(P).success){k.error("Error al crear el nuevo medicamento");return}const z=await(await F.drugs.$post({json:{tradeName:P.tradeName,presentations:P.presentations}})).json();z.success||k.error(z.error),z.result&&j({drugId:z.result.id,tradeName:z.result.tradeName,genericName:z.result.genericName,presentations:z.result.presentations??[]})}}),u=()=>{k.promise(c.mutateAsync(),{loading:"Espere..."})},d=O({resolver:V(go),defaultValues:{details:l}}),{data:h,isLoading:v}=$({queryKey:["searchDrugs",a],queryFn:async()=>a===""?[]:(await(await F.drugs.search.$get({query:{q:a}})).json()).data}),j=P=>{if(!l.find(g=>g.drugId===P.drugId)){const g=[...l,{drugId:P.drugId,tradeName:P.tradeName,genericName:P.genericName??"",presentation:"",indications:""}];o(g),d.setValue("details",g)}};function b(P){if(!h)return[];const g=h.find(E=>E.drugId===P);return g===void 0?[]:g.presentations.map(E=>({value:E,label:E}))}const N=P=>{const g=l.filter(E=>E.drugId!==P);o(g),d.setValue("details",g)},A=R({mutationFn:async P=>{if(r.getQueryData(["prescription",s.querieId]).length>0){const z=await(await F.prescriptions[":querieId"].$put({param:{querieId:s.querieId},json:{details:P.details}})).json();if(!z.success){k.error(z.error);return}r.invalidateQueries({queryKey:["prescription"]}),k.success("Prescripción Guardada"),t(!1)}else{const z=await(await F.prescriptions.create[":querieId"].$post({param:{querieId:s.querieId},json:{details:P.details}})).json();if(!z.success){k.error(z.error);return}r.invalidateQueries({queryKey:["prescription"]}),k.success("Prescripción Creada"),t(!1)}}}),S=P=>{A.mutate(P)};return e.jsxs(B,{open:n,onOpenChange:t,children:[e.jsx(U,{children:e.jsxs(D,{variant:"outline",children:[e.jsx(Jt,{className:"mr-2 h-4 w-4"}),"Agregar Prescripción"]})}),e.jsxs(_,{className:"max-w-full ",children:[e.jsxs(Q,{children:["Nueva prescripción para ",e.jsx("strong",{children:s.patientName})]}),e.jsxs("section",{className:"sm:flex w-full",children:[e.jsxs("aside",{className:"sm:w-1/3 gap-2 p-2",children:[e.jsx(Z,{className:"mb-2 font-semibold text-2sm",children:"Buscar Fármacos"}),e.jsxs("div",{className:"flex w-auto items-center",children:[e.jsx(I,{className:"w-200",placeholder:"Buscar Fármacos",onChange:P=>{const E=P.target.value.replace(/[^a-zA-Z\s]/g,"");i(E)}}),e.jsx(D,{variant:"outline",className:"ml-3",onClick:u,size:"sm",children:"Guardar"})]}),e.jsx("div",{className:" w-full my-4",children:e.jsx(js,{className:"h-auto w-full rounded-md border",children:e.jsxs(e.Fragment,{children:[v&&e.jsx("div",{children:"Cargando..."}),h&&h.map(P=>e.jsx("div",{children:e.jsxs("div",{className:"flex items-center justify-between p-2",children:[e.jsx("p",{className:"font-semibold",children:P.tradeName}),e.jsx("p",{className:"font-medium mx-4",children:P.genericName}),e.jsx(D,{onClick:()=>{j(P)},size:"sm",children:"Agregar"})]})},P.drugId))]})})})]}),e.jsx("div",{className:"sm:w-2/3",children:e.jsx(js,{className:"w-full h-96 rounded-md",children:e.jsx(G,{...d,children:e.jsxs("form",{className:"mr-5",onSubmit:d.handleSubmit(S),children:[d.watch("details").map((P,g)=>e.jsxs("div",{className:"flex flex-wrap w-full space-y-2 md:space-y-0 md:flex-nowrap md:items-start border-b py-2",children:[e.jsx("div",{className:"w-full md:w-auto px-2",children:e.jsx(D,{size:"icon",className:"mt-8",variant:"destructive",onClick:()=>N(P.drugId),children:e.jsx(ks,{})})}),e.jsx("div",{className:"w-full md:w-1/2 px-2",children:e.jsx(w,{control:d.control,name:`details.${g}.tradeName`,render:({field:E})=>e.jsxs(f,{children:[e.jsx(p,{children:"Fármaco"}),e.jsx(y,{children:e.jsx(I,{value:E.value,readOnly:!0})}),e.jsx(C,{})]})})}),e.jsx("div",{className:"w-full md:w-1/2 px-2",children:e.jsx(w,{control:d.control,name:`details.${g}.genericName`,render:({field:E})=>e.jsxs(f,{children:[e.jsx(p,{children:"Generico"}),e.jsx(y,{children:e.jsx(I,{defaultValue:P.genericName,...E})}),e.jsx(C,{})]})})}),e.jsx("div",{className:"w-full md:w-1/4 px-2",children:e.jsx(w,{control:d.control,name:`details.${g}.presentation`,render:({field:E})=>e.jsxs(f,{children:[e.jsx(p,{children:"Presentación"}),e.jsx(y,{children:e.jsx(yo,{data:b(P.drugId),onSelect:z=>{E.onChange(z);const M=l.map((ce,Ie)=>Ie===g?{...ce,presentation:z}:ce);o(M)}})}),e.jsx(C,{})]})})}),e.jsx("div",{className:"w-full md:w-1/2 px-2",children:e.jsx(w,{control:d.control,name:`details.${g}.indications`,render:({field:E})=>e.jsxs(f,{children:[e.jsx(p,{children:"Dosis o Indicaciones"}),e.jsx(y,{children:e.jsx(ae,{placeholder:"Indicaciones",...E})}),e.jsx(C,{})]})})})]},g)),l.length>0&&e.jsx("div",{className:"flex justify-end p-2",children:e.jsx(T,{variant:"default",type:"submit",children:"Guardar"})})]})})})})]})]})]})}const No=({items:s,className:r})=>{let[n,t]=x.useState(null);return e.jsx("div",{className:q("grid grid-cols-1 md:grid-cols-2  lg:grid-cols-3  py-2",r),children:s.map((a,i)=>e.jsxs("div",{className:"relative group  block p-2 h-full w-full",onMouseEnter:()=>t(i),onMouseLeave:()=>t(null),children:[e.jsx(ps,{children:n===i&&e.jsx(Ce.span,{className:"absolute inset-0 h-full w-full bg-neutral-200 dark:bg-slate-800/[0.8] block  rounded-3xl",layoutId:"hoverBackground",initial:{opacity:0},animate:{opacity:1,transition:{duration:.15}},exit:{opacity:0,transition:{duration:.15,delay:.2}}})}),e.jsx(he,{className:"w-full max-w-md rounded-2xl h-full  py-2 overflow-hidden relative z-20",children:e.jsxs(pe,{className:"grid gap-3 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"grid gap-1",children:[e.jsx("h3",{className:"font-semibold text-base",children:a.tradeName}),e.jsx("p",{className:"text-muted-foreground text-xs",children:a.indications})]}),e.jsx("div",{className:"bg-primary px-4 py-1 rounded-full text-primary-foreground text-xs font-medium",children:a.presentation})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("p",{className:"text-muted-foreground text-xs",children:a.genericName})})]})})]},a==null?void 0:a.tradeName))})};function wo({querieId:s,patientName:r}){const{data:n,isPending:t,error:a}=$({queryKey:["prescription",s],queryFn:async()=>{const l=await(await F.prescriptions.$get({query:{q:s}})).json();if(l.error)throw new Error(l.error);return l.exist===!1?[]:l.data}});return t?e.jsxs(he,{children:[e.jsx(je,{children:e.jsx(ve,{children:"Prescripción"})}),e.jsx(pe,{children:e.jsx(ns,{})})]}):e.jsxs(e.Fragment,{children:[a&&e.jsx("p",{children:a.message}),e.jsx("div",{children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 ",children:[e.jsxs("div",{className:"flex items-center justify-between ",children:[e.jsx("p",{className:"text-lg font-semibold ",children:"Prescripción"}),e.jsx(bo,{querieId:s,patientName:r,prescriptionDetails:n??[]})]}),e.jsx(No,{items:n})]})})]})}function Co(){return e.jsxs(B,{children:[e.jsx(U,{asChild:!0,children:e.jsxs(D,{variant:"outline",className:"flex ",children:[e.jsx(Yt,{className:"mr-2 h-4 w-4"}),"Contra referencias"]})}),e.jsx(_,{children:e.jsx(Q,{children:"Referencias"})})]})}function So({querieId:s,patientName:r}){return e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 ",children:e.jsxs("div",{className:"flex items-center justify-between ",children:[e.jsx("p",{className:"text-lg font-semibold ",children:"Referencias y contra referencias"}),e.jsx(Co,{})]})})})})}const ha=x.createContext(null),kr=()=>{const s=x.useContext(ha);if(!s)throw new Error("useFileUpload must be used within a FileUploaderProvider");return s},Er=x.forwardRef(({className:s,dropzoneOptions:r,value:n,onValueChange:t,reSelect:a,orientation:i="vertical",children:l,dir:o,...c},u)=>{const[d,h]=x.useState(!1),[v,j]=x.useState(!1),[b,N]=x.useState(-1),{maxFiles:A=1,maxSize:S=4*1024*1024,multiple:P=!0}=r,g=A===1?!0:a,E=o==="rtl"?"rtl":"ltr",z=x.useCallback(ye=>{if(!n)return;const Be=n.filter((is,Ue)=>Ue!==ye);t(Be)},[n,t]),M=x.useCallback(ye=>{var vs;if(ye.preventDefault(),ye.stopPropagation(),!n)return;const Be=()=>{const ke=b+1;N(ke>n.length-1?0:ke)},is=()=>{const ke=b-1;N(ke<0?n.length-1:ke)},Ue=i==="horizontal"?E==="ltr"?"ArrowLeft":"ArrowRight":"ArrowUp",Ds=i==="horizontal"?E==="ltr"?"ArrowRight":"ArrowLeft":"ArrowDown";if(ye.key===Ds)Be();else if(ye.key===Ue)is();else if(ye.key==="Enter"||ye.key==="Space")b===-1&&((vs=We.inputRef.current)==null||vs.click());else if(ye.key==="Delete"||ye.key==="Backspace"){if(b!==-1){if(z(b),n.length-1===0){N(-1);return}is()}}else ye.key==="Escape"&&N(-1)},[n,b,z]),ce=x.useCallback((ye,Be)=>{var Ds,vs;const is=ye;if(!is){k.error("Error con los archivos");return}const Ue=n?[...n]:[];if(g&&Ue.splice(0,Ue.length),is.forEach(ke=>{Ue.length<A&&Ue.push(ke)}),t(Ue),Be.length>0)for(let ke=0;ke<Be.length;ke++){if(((Ds=Be[ke].errors[0])==null?void 0:Ds.code)==="file-too-large"){k.error(`El actual archivo es demasiado grande. El tamaño maximo es ${S/1024/1024}MB`);break}if(((vs=Be[ke].errors[0])==null?void 0:vs.code)==="Too many files"){k.error("Se superaron los archivos permitidos");break}else{k.error(Be[ke].errors[0].message);break}}},[g,n]);x.useEffect(()=>{if(n){if(n.length===A){j(!0);return}j(!1)}},[n,A]);const We=pi({...r||{maxFiles:A,maxSize:S,multiple:P},onDrop:ce,onDropRejected:()=>h(!0),onDropAccepted:()=>h(!1)});return e.jsx(ha.Provider,{value:{dropzoneState:We,isLOF:v,isFileTooBig:d,removeFileFromSet:z,activeIndex:b,setActiveIndex:N,orientation:i,direction:E},children:e.jsx("div",{ref:u,tabIndex:0,onKeyDownCapture:M,className:q("grid w-full focus:outline-none overflow-hidden ",s,{"gap-2":n&&n.length>0}),dir:o,...c,children:l})})});Er.displayName="FileUploader";const Dr=x.forwardRef(({children:s,className:r,...n},t)=>{const{orientation:a}=kr(),i=x.useRef(null);return e.jsx("div",{className:q("w-full px-1"),ref:i,"aria-description":"content file holder",children:e.jsx("div",{...n,ref:t,className:q("flex rounded-xl gap-1",a==="horizontal"?"flex-raw flex-wrap":"flex-col",r),children:s})})});Dr.displayName="FileUploaderContent";const Ar=x.forwardRef(({className:s,index:r,children:n,...t},a)=>{const{removeFileFromSet:i,activeIndex:l,direction:o}=kr(),c=r===l;return e.jsxs("div",{ref:a,className:q(Ms({variant:"ghost"}),"h-6 p-1 justify-between cursor-pointer relative",s,c?"bg-muted":""),...t,children:[e.jsxs("button",{type:"button",className:q("absolute",o==="rtl"?"top-1 left-1":"top-1 right-1"),onClick:()=>i(r),children:[e.jsxs("span",{className:"sr-only",children:["Borrar archivo ",r]}),e.jsx(ks,{className:"w-4 h-4 hover:stroke-destructive duration-200 ease-in-out"})]}),e.jsx("div",{className:"font-medium leading-none tracking-tight flex items-center gap-1.5 h-full w-full",children:n})]})});Ar.displayName="FileUploaderItem";const Ir=x.forwardRef(({className:s,children:r,...n},t)=>{const{dropzoneState:a,isFileTooBig:i,isLOF:l}=kr(),o=l?{}:a.getRootProps();return e.jsxs("div",{ref:t,...n,className:`relative w-full ${l?"opacity-50 cursor-not-allowed ":"cursor-pointer "}`,children:[e.jsx("div",{className:q(`w-full rounded-lg duration-300 ease-in-out
         ${a.isDragAccept?"border-green-500":a.isDragReject||i?"border-red-500":"border-gray-300"}`,s),...o,children:r}),e.jsx(I,{ref:a.inputRef,disabled:l,...a.getInputProps(),className:`${l?"cursor-not-allowed":""}`})]})});Ir.displayName="FileInput";function Po({querieId:s}){const r=H(),n={maxFiles:5,maxSize:1024*1024*3,multiple:!0},t=["application/pdf","image/jpeg","image/png","image/webp","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel.sheet.binary.macroEnabled.12","application/vnd.ms-excel.sheet.macroEnabled.12"],[a,i]=x.useState(null),l=R({mutationFn:async()=>{const c=new FormData;if(!a)return;if(!a.every(v=>t.includes(v.type))){k.error("Tipo de archivo no admitido");return}a&&a.forEach((v,j)=>{c.append(`files[${j}]`,v)});const h=await(await fetch(`/api/media/resources/${s}`,{method:"POST",body:c})).json();h.success?(k.success("Archivos subidos con éxito"),i(null),r.invalidateQueries({queryKey:["resources",s]})):k.error(h.error)}}),o=()=>{l.mutate()};return e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"",children:[e.jsx("h1",{className:"text-lg font-semibold mb-2",children:"Adjuntar archivos"}),e.jsxs(Er,{value:a,onValueChange:i,dropzoneOptions:n,className:"w-full  sm:m-4 m-3",children:[e.jsx(Ir,{className:"h-[200px] w-full rounded-lg border-2 border-dashed border-muted-foreground/25 hover:border-muted-foreground/50 transition-colors",children:e.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center space-y-2 text-center",children:[e.jsx(Ce.div,{className:" p-4",animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:2,ease:"easeInOut"},children:e.jsx(Gn,{className:"h-8 w-8 text-customborder"})}),e.jsxs("div",{className:"text-sm font-medium",children:[e.jsx("span",{className:"text-primary",children:"Haz clic para subir"})," o arrastra y suelta"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"PNG, JPG, PDF, DOCX, XLS (max. 3MB)"})]})}),e.jsx(ps,{children:a&&a.length>0&&e.jsx(Ce.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mt-4",children:e.jsx(Dr,{children:a.map((c,u)=>e.jsx(Ce.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{delay:u*.1},children:e.jsx(Ar,{index:u,className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(nr,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:c.name})]})})},u))})})})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(T,{disabled:!a,loading:l.isPending,onClick:o,children:"Adjuntar estos archivos"})})]})}const ja=x.createContext(null);function Zs(){const s=x.useContext(ja);if(!s)throw new Error("useCarousel must be used within a <Carousel />");return s}const pa=x.forwardRef(({orientation:s="horizontal",opts:r,setApi:n,plugins:t,className:a,children:i,...l},o)=>{const[c,u]=fi({...r,axis:s==="horizontal"?"x":"y"},t),[d,h]=x.useState(!1),[v,j]=x.useState(!1),b=x.useCallback(P=>{P&&(h(P.canScrollPrev()),j(P.canScrollNext()))},[]),N=x.useCallback(()=>{u==null||u.scrollPrev()},[u]),A=x.useCallback(()=>{u==null||u.scrollNext()},[u]),S=x.useCallback(P=>{P.key==="ArrowLeft"?(P.preventDefault(),N()):P.key==="ArrowRight"&&(P.preventDefault(),A())},[N,A]);return x.useEffect(()=>{!u||!n||n(u)},[u,n]),x.useEffect(()=>{if(u)return b(u),u.on("reInit",b),u.on("select",b),()=>{u==null||u.off("select",b)}},[u,b]),e.jsx(ja.Provider,{value:{carouselRef:c,api:u,opts:r,orientation:s||((r==null?void 0:r.axis)==="y"?"vertical":"horizontal"),scrollPrev:N,scrollNext:A,canScrollPrev:d,canScrollNext:v},children:e.jsx("div",{ref:o,onKeyDownCapture:S,className:q("relative",a),role:"region","aria-roledescription":"carousel",...l,children:i})})});pa.displayName="Carousel";const fa=x.forwardRef(({className:s,...r},n)=>{const{carouselRef:t,orientation:a}=Zs();return e.jsx("div",{ref:t,className:"overflow-hidden",children:e.jsx("div",{ref:n,className:q("flex",a==="horizontal"?"-ml-4":"-mt-4 flex-col",s),...r})})});fa.displayName="CarouselContent";const ga=x.forwardRef(({className:s,...r},n)=>{const{orientation:t}=Zs();return e.jsx("div",{ref:n,role:"group","aria-roledescription":"slide",className:q("min-w-0 shrink-0 grow-0 basis-full",t==="horizontal"?"pl-4":"pt-4",s),...r})});ga.displayName="CarouselItem";const va=x.forwardRef(({className:s,variant:r="outline",size:n="icon",...t},a)=>{const{orientation:i,scrollPrev:l,canScrollPrev:o}=Zs();return e.jsxs(D,{ref:a,variant:r,size:n,className:q("absolute  h-8 w-8 rounded-full",i==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",s),disabled:!o,onClick:l,...t,children:[e.jsx(xr,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Previous slide"})]})});va.displayName="CarouselPrevious";const ya=x.forwardRef(({className:s,variant:r="outline",size:n="icon",...t},a)=>{const{orientation:i,scrollNext:l,canScrollNext:o}=Zs();return e.jsxs(D,{ref:a,variant:r,size:n,className:q("absolute h-8 w-8 rounded-full",i==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",s),disabled:!o,onClick:l,...t,children:[e.jsx(hr,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Next slide"})]})});ya.displayName="CarouselNext";function ko({resourceId:s,queryId:r}){const n=H(),[t,a]=x.useState(!1),i=R({mutationFn:async()=>{const o=s.split(".").shift(),u=await(await F.media.resources[":queryId"][":resourceId"].$delete({param:{queryId:r,resourceId:o}})).json();if(u.error){k.error(u.error);return}u.success&&k.success("Recurso eliminado correctamente"),n.invalidateQueries({queryKey:["resources",r]}),a(!1)}}),l=()=>{i.mutate()};return e.jsxs(B,{open:t,onOpenChange:a,children:[e.jsx(U,{asChild:!0,children:e.jsx(D,{size:"icon",variant:"destructive",className:"absolute h-5 w-5 top-2 right-2 m-1 rounded-sm",children:e.jsx(ks,{className:"h-3 w-3"})})}),e.jsxs(_,{children:[e.jsx(X,{children:e.jsx(Q,{children:"¿Quieres eliminar este recurso?"})}),e.jsx(ne,{children:e.jsx(T,{variant:"destructive",loading:i.isPending,onClick:l,children:"Eliminar"})})]})]})}function Eo({querieId:s}){const{data:r,isPending:n}=$({queryKey:["resources",s],queryFn:async()=>{const a=await(await F.media.resources[":queryId"].$get({param:{queryId:s}})).json();if("error"in a)throw new Error(a.error);if("resources"in a)return a.resources;throw new Error("Respuesta inesperada del servidor.")}});return n?e.jsx("div",{children:"Cargando recursos..."}):e.jsx("div",{children:r&&r.length>0&&e.jsxs(pa,{opts:{align:"start"},className:"w-auto sm:mx-8 mx-4",children:[e.jsx(fa,{children:r.map(t=>{const a=t.id.split(".").pop().split("?")[0],i=["image/jpeg","image/png","image/webp"];return e.jsx(ga,{className:"md:basis-1/4 lg:basis-1/6",children:e.jsx("div",{className:"p-1",children:e.jsxs("div",{className:"relative flex-1 aspect-square items-center justify-center p-2",children:[a==="sheet"&&e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"object-cover w-full h-full flex items-center justify-center",children:e.jsxs("svg",{className:"w-1/2 h-1/2",xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 512 512",viewBox:"0 0 512 512",id:"xls-file",children:[e.jsx("path",{fill:"#3DD68C","fill-rule":"evenodd",d:`M168.585,0h173.368l153.091,153.091v293.98c0,35.698-29.231,64.929-64.929,64.929h-261.53
		c-35.698,0-64.929-29.231-64.929-64.929V64.929C103.655,29.231,132.887,0,168.585,0L168.585,0z`,"clip-rule":"evenodd"}),e.jsx("path",{fill:"#33B074","fill-rule":"evenodd",d:"M341.953,0l153.091,153.091H358.456c-9.07,0-16.503-7.432-16.503-16.532V0z","clip-rule":"evenodd"}),e.jsx("path",{fill:"#20573E","fill-rule":"evenodd",d:`M31.207,218.02h352.589c7.842,0,14.25,6.408,14.25,14.25V361.63c0,7.842-6.408,14.25-14.25,14.25H31.207
		c-7.842,0-14.25-6.408-14.25-14.25V232.27C16.956,224.428,23.365,218.02,31.207,218.02L31.207,218.02z`,"clip-rule":"evenodd"}),e.jsx("path",{fill:"#33B074",d:`M247.105,341.207c0,4.565-3.701,8.266-8.266,8.266h-53.196c-4.565,0-8.266-3.701-8.266-8.266v-88.542
		c0-4.565,3.701-8.266,8.266-8.266c4.565,0,8.266,3.701,8.266,8.266v80.276h44.93C243.404,332.941,247.105,336.641,247.105,341.207z
		 M153.062,245.579c-3.914-2.351-8.992-1.084-11.343,2.829l-19.512,32.477l-19.512-32.477c-2.351-3.912-7.426-5.179-11.343-2.829
		c-3.913,2.351-5.179,7.429-2.829,11.343l24.041,40.014L88.523,336.95c-2.351,3.913-1.085,8.992,2.829,11.343
		c1.333,0.8,2.8,1.181,4.249,1.181c2.806,0,5.543-1.429,7.094-4.01l19.512-32.477l19.512,32.477c1.55,2.581,4.287,4.01,7.094,4.01
		c1.449,0,2.916-0.381,4.249-1.181c3.913-2.351,5.179-7.429,2.829-11.343l-24.041-40.014l24.041-40.014
		C158.241,253.008,156.975,247.93,153.062,245.579z M297.242,288.669c-21.064,0-22.778-6.274-22.778-13.855
		c0-7.655,6.216-13.884,13.855-13.884h13.167c5.226,0,9.641,4.415,9.641,9.641c0,4.565,3.701,8.266,8.266,8.266
		s8.266-3.701,8.266-8.266c0-14.432-11.741-26.173-26.173-26.173h-13.167c-16.755,0-30.387,13.645-30.387,30.416
		c0,14.831,7.613,22.058,13.999,25.509c6.244,3.374,14.05,4.878,25.311,4.878c7.656,0,13.885,6.229,13.885,13.884
		c0,7.64-6.229,13.856-13.885,13.856h-13.167c-5.299,0-9.611-4.312-9.611-9.613c0-4.565-3.701-8.266-8.266-8.266
		s-8.266,3.701-8.266,8.266c0,14.416,11.728,26.145,26.143,26.145h13.167c16.772,0,30.417-13.632,30.417-30.388
		C327.659,302.314,314.014,288.669,297.242,288.669z`})]})}),a==="application/pdf"&&e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"object-cover w-full h-full flex justify-center items-center",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",baseProfile:"tiny",version:"1.2",viewBox:"0 0 512 512",id:"pdf-file",className:"w-1/2 h-1/2",children:e.jsxs("g",{children:[e.jsxs("g",{children:[e.jsxs("g",{children:[e.jsx("path",{fill:"#FFF",d:"M422.3 477.9c0 7.6-6.2 13.8-13.8 13.8h-305c-7.6 0-13.8-6.2-13.8-13.8V34.1c0-7.6 6.2-13.8 13.8-13.8h230.1V109h88.7v368.9z"}),e.jsx("path",{fill:"#2B669F",d:"M333.6 6H103.5C88 6 75.4 18.6 75.4 34.1v443.8c0 15.5 12.6 28.1 28.1 28.1h305c15.5 0 28.1-12.6 28.1-28.1V109.1L333.6 6zm88.7 471.9c0 7.6-6.2 13.8-13.8 13.8h-305c-7.6 0-13.8-6.2-13.8-13.8V34.1c0-7.6 6.2-13.8 13.8-13.8h230.1V109h88.7v368.9z"}),e.jsx("path",{fill:"#084272",d:"M333.6 6v103.1h103z"})]}),e.jsxs("g",{children:[e.jsx("path",{fill:"#084272",d:"M465.9 450.8H46.1V308c0-9.8 7.9-17.7 17.7-17.7h384.3c9.8 0 17.7 7.9 17.7 17.7v142.8z"}),e.jsx("path",{fill:"#1A252D",d:"M436.6 450.8v19.5l29.3-19.5zM75.4 450.8v19.5l-29.3-19.5z"}),e.jsx("path",{fill:"#2B669F",d:"M64.1 308.4h383.7v124.5H64.1z"})]}),e.jsx("g",{fill:"#2B669F",children:e.jsx("path",{d:"M298.3 78.6h-177a6.7 6.7 0 010-13.4h177a6.7 6.7 0 010 13.4zM298.3 110.6h-177a6.7 6.7 0 010-13.4h177a6.7 6.7 0 010 13.4zM391.8 142.5H121.3a6.7 6.7 0 010-13.4h270.5a6.7 6.7 0 010 13.4zM391.8 174.5H121.3a6.7 6.7 0 010-13.4h270.5a6.7 6.7 0 010 13.4zM391.8 206.5H121.3a6.7 6.7 0 010-13.4h270.5a6.7 6.7 0 010 13.4zM391.8 238.4H121.3a6.7 6.7 0 010-13.4h270.5a6.7 6.7 0 010 13.4zM391.8 270.4H121.3a6.7 6.7 0 010-13.4h270.5a6.7 6.7 0 010 13.4z"})})]}),e.jsx("g",{fill:"#FFF",children:e.jsx("path",{d:"M229.3 373.3c0 6.9-1.6 12.5-4.7 16.7-3.1 4.2-7.5 6.3-13.2 6.3-2.2 0-4.2-.4-5.9-1.3-1.7-.9-3.2-2.1-4.5-3.7v21.8h-14.4v-63.8h13.6l.4 5c1.3-1.9 2.8-3.3 4.6-4.3 1.8-1 3.8-1.5 6.1-1.5 5.7 0 10.1 2.2 13.3 6.6 3.1 4.4 4.7 10.2 4.7 17.4v.8zm-14.3-.9c0-3.9-.6-7-1.7-9.4-1.1-2.4-3-3.5-5.4-3.5-1.6 0-3 .3-4.1.9-1.1.6-2 1.5-2.7 2.6v19.2c.7 1 1.6 1.7 2.7 2.2 1.1.5 2.5.7 4.1.7 2.5 0 4.3-1 5.4-3.1 1.1-2.1 1.6-5 1.6-8.7v-.9zM239.8 372.4c0-7.2 1.6-13 4.7-17.4 3.1-4.4 7.6-6.6 13.3-6.6 2.1 0 4 .5 5.8 1.5 1.7 1 3.3 2.4 4.6 4.2V329h14.4v66.4H270l-1-5.6c-1.4 2.1-3 3.7-4.9 4.8-1.9 1.1-4 1.7-6.4 1.7-5.7 0-10.1-2.1-13.2-6.3-3.1-4.2-4.7-9.7-4.7-16.6v-1zm14.4.9c0 3.7.5 6.7 1.6 8.7 1.1 2.1 2.9 3.1 5.5 3.1 1.5 0 2.8-.3 4-.8 1.1-.6 2.1-1.4 2.8-2.4v-18.6c-.7-1.2-1.7-2.2-2.8-2.8-1.1-.7-2.4-1-3.9-1-2.6 0-4.4 1.2-5.5 3.5-1.1 2.4-1.7 5.5-1.7 9.4v.9zM300 395.4v-36.1h-6.6v-10h6.6v-4.8c0-5.3 1.6-9.3 4.8-12.2 3.2-2.9 7.7-4.3 13.5-4.3 1.1 0 2.2.1 3.3.2 1.1.2 2.4.4 3.8.7l-1.1 10.6c-.8-.1-1.5-.2-2.1-.3-.6-.1-1.3-.1-2.2-.1-1.8 0-3.2.5-4.2 1.4-1 .9-1.4 2.3-1.4 4v4.8h9.1v10h-9.1v36.1H300z"})})]})})}),a==="application/msword"&&e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"object-cover w-full h-full flex justify-center items-center",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg","enable-background":"new 0 0 512 512",viewBox:"0 0 512 512",id:"docx-file",className:"w-1/2 h-1/2",children:[e.jsx("path",{fill:"#008bf5","fill-rule":"evenodd",d:`M168.579,0h173.378l153.1,153.07v293.997c0,35.729-29.233,64.933-64.933,64.933H168.579
		c-35.7,0-64.933-29.204-64.933-64.933V64.933C103.647,29.203,132.88,0,168.579,0L168.579,0z`,"clip-rule":"evenodd"}),e.jsx("path",{fill:"#006fc4","fill-rule":"evenodd",d:"M341.958 0l153.1 153.07H358.491c-9.1 0-16.533-7.403-16.533-16.504V0zM31.193 218.003h352.638c7.813 0 14.251 6.408 14.251 14.251v129.368c0 7.842-6.438 14.28-14.251 14.28H31.193c-7.842 0-14.251-6.438-14.251-14.28V232.254C16.943 224.411 23.351 218.003 31.193 218.003L31.193 218.003z","clip-rule":"evenodd"}),e.jsx("path",{fill:"#fff",d:`M169.779,244.413c-19.225,0-34.865,15.641-34.865,34.865v35.348c0,19.225,15.641,34.865,34.865,34.865
		c19.226,0,34.866-15.641,34.866-34.865v-35.348C204.645,260.053,189.005,244.413,169.779,244.413z M188.112,314.626
		c0,10.108-8.224,18.332-18.333,18.332c-10.108,0-18.332-8.224-18.332-18.332v-35.348c0-10.108,8.224-18.332,18.332-18.332
		c10.109,0,18.333,8.224,18.333,18.332V314.626z M232.327,279.278v35.348c0,10.108,8.224,18.332,18.332,18.332
		c10.109,0,18.333-8.224,18.333-18.332c0-4.566,3.701-8.267,8.267-8.267c4.566,0,8.266,3.701,8.266,8.267
		c0,19.225-15.641,34.865-34.866,34.865c-19.225,0-34.865-15.641-34.865-34.865v-35.348c0-19.225,15.641-34.865,34.865-34.865
		c19.226,0,34.866,15.641,34.866,34.865c0,4.566-3.701,8.267-8.266,8.267c-4.566,0-8.267-3.701-8.267-8.267
		c0-10.108-8.224-18.332-18.333-18.332C240.551,260.946,232.327,269.17,232.327,279.278z M87.494,244.413H60.895
		c-4.566,0-8.266,3.701-8.266,8.266v88.546c0,4.566,3.701,8.266,8.266,8.266h26.599c19.225,0,34.865-15.641,34.865-34.865v-35.348
		C122.36,260.053,106.719,244.413,87.494,244.413z M105.827,314.626c0,10.108-8.224,18.332-18.332,18.332H69.162v-72.013h18.332
		c10.108,0,18.332,8.224,18.332,18.332V314.626z M361.188,336.968c2.351,3.913,1.085,8.992-2.829,11.343
		c-1.333,0.8-2.801,1.181-4.249,1.181c-2.807,0-5.544-1.43-7.094-4.01l-19.513-32.479l-19.513,32.479
		c-1.55,2.581-4.288,4.01-7.094,4.01c-1.45,0-2.916-0.381-4.249-1.181c-3.913-2.351-5.18-7.43-2.829-11.343l24.042-40.016
		l-24.042-40.016c-2.351-3.913-1.085-8.992,2.829-11.343c3.915-2.351,8.992-1.084,11.343,2.829l19.513,32.479l19.513-32.479
		c2.351-3.913,7.429-5.18,11.343-2.829c3.913,2.351,5.18,7.43,2.829,11.343l-24.042,40.016L361.188,336.968z`})]})}),i.includes(a)&&e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"object-cover w-full h-full",children:e.jsx("img",{src:t.url,alt:t.id,className:"object-cover w-full h-full"})}),e.jsx(ko,{resourceId:t.id,queryId:s})]})})},t.id)})}),e.jsx(va,{}),e.jsx(ya,{})]})})}function Do({querieId:s,patientName:r}){return e.jsxs(B,{children:[e.jsx(U,{children:e.jsx(D,{variant:"outline",children:"Constancias de abandono"})}),e.jsxs(_,{children:[e.jsxs(Q,{children:["Nueva constancia de abandono para ",r]}),"new constancia de abandano",e.jsx("pre",{children:s})]})]})}function Ao({querieId:s,patientName:r}){return e.jsx("div",{className:"max-w-6xl mx-auto px-4 my-4 ",children:e.jsxs("div",{className:"flex items-center justify-between ",children:[e.jsx("p",{className:"text-lg font-semibold ",children:"Constancia de abandono"}),e.jsx(Do,{querieId:s,patientName:r})]})})}function qr({patientName:s,patientId:r,size:n}){const{data:t,isPending:a}=$({queryKey:["imagePatient",r],queryFn:async()=>(await(await F.media.patient.$get({query:{patientId:r}})).json()).data,staleTime:36e5,refetchOnWindowFocus:!1});return e.jsx(e.Fragment,{children:a||!t?e.jsx(bs,{children:e.jsx(Ks,{className:"w-full h-full text-sm bg-accent",children:aa(s)})}):e.jsx("a",{href:t,children:e.jsx(bs,{className:`w-${n} h-${n}`,children:e.jsx(wr,{src:t,alt:"@"+s,className:"w-full h-full object-cover"})})})})}function ba({patientName:s,patientId:r}){const n=H(),[t,a]=x.useState(!1),i={maxFiles:1,maxSize:1024*1024*3,multiple:!1},l=["image/jpeg","image/png","image/webp"],[o,c]=x.useState(null),u=R({mutationFn:async()=>{const d=new FormData;if(o===null||o.length===0)return;if(!o.every(b=>l.includes(b.type))){k.error("Tipo de archivo no admitido");return}d.append("file",o[0]);const j=await(await fetch(`/api/media/patient/${r}`,{method:"POST",body:d})).json();j.success||k.error(j.error),n.invalidateQueries({queryKey:["imagePatient",r]}),k.success("La foto ha sido actualizada correctamente"),a(!1)}});return e.jsxs(B,{open:t,onOpenChange:a,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsx(D,{variant:"outline",className:"w-6 h-6 p-0.5  ",children:e.jsx(nr,{className:"  w-4 h-4 "})})})}),e.jsx(K,{children:"Actualizar foto"})]})}),e.jsxs(_,{className:"sm:max-w-[425px]",children:[e.jsx(X,{children:e.jsxs(Q,{children:["Actualizar foto de ",e.jsx("span",{className:"font-bold",children:s})]})}),e.jsxs(Er,{value:o,onValueChange:c,dropzoneOptions:i,className:"w-full",children:[e.jsx(Ir,{className:"h-[200px] w-full rounded-lg border-2 border-dashed border-muted-foreground/25 hover:border-muted-foreground/50 transition-colors",children:e.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center space-y-2 text-center",children:[e.jsx(Ce.div,{className:" p-4",animate:{scale:[1,1.1,1]},transition:{repeat:1/0,duration:2,ease:"easeInOut"},children:e.jsx(Gn,{className:"h-8 w-8 text-customborder"})}),e.jsxs("div",{className:"text-sm font-medium",children:[e.jsx("span",{className:"text-primary",children:"Haz clic para subir"})," o arrastra y suelta"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"PNG, JPG o Webp (max. 3MB)"})]})}),e.jsx(ps,{children:o&&o.length>0&&e.jsx(Ce.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"mt-4",children:e.jsx(Dr,{children:o.map((d,h)=>e.jsx(Ce.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{delay:h*.1},children:e.jsx(Ar,{index:h,className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(nr,{className:"h-4 w-4 mr-2 text-muted-foreground"}),e.jsx("div",{className:"text-sm p-2 w-56 truncate text-muted-foreground",children:d.name})]})})},h))})})})]}),e.jsx(T,{loading:u.isPending,className:"w-full mt-4",onClick:()=>u.mutate(),children:"Guardar"})]})]})}function Io({current:s}){const r=H(),[n,t]=x.useState(!1),a=O({resolver:V(Ql),defaultValues:{rate:s??0}}),i=R({mutationFn:async o=>{if(o.rate===s){k.error("La tasa de cambio no puede ser la misma que la actual");return}const u=await(await F.services.rate.$patch({json:o})).json();return u.success===!1&&k.error("Error al actualizar la tasa de cambio"),k.success("Tasa de cambio actualizada correctamente"),r.invalidateQueries({queryKey:["exchangeRate"]}),t(!1),u}}),l=o=>{i.mutate(o)};return e.jsxs(B,{open:n,onOpenChange:t,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsx(D,{size:"icon",className:"ml-2",variant:"outline",children:e.jsx(ss,{})})})}),e.jsx(K,{children:"Actualizar tasa de cambio"})]})}),e.jsxs(_,{children:[e.jsxs(X,{children:[e.jsx(Q,{children:"Actualizar Tasa de Cambio"}),e.jsx(we,{children:"Ingrese la nueva tasa de cambio. Esta tasa se utilizará para todas las conversiones futuras."})]}),e.jsx(G,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(l),children:[e.jsxs("div",{className:"flex gap-4 ",children:[e.jsxs(f,{children:[e.jsx(p,{htmlFor:"current",children:"Tasa de cambio Actual"}),e.jsx(I,{className:"border-none",id:"current",value:s,readOnly:!0})]}),e.jsx(w,{control:a.control,name:"rate",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{htmlFor:"rate",children:"Nueva tasa de cambio"}),e.jsx(y,{children:e.jsx(I,{type:"number",value:o.value??0,onChange:c=>{const u=parseFloat(c.target.value)??0;o.onChange(u)},placeholder:"Tasa de cambio",className:"w-full"})}),e.jsx(C,{})]})})]}),e.jsx(ne,{className:"mt-2",children:e.jsx(T,{loading:i.isPending,type:"submit",children:"Guardar"})})]})})]})]})}function qo({querieId:s,patientName:r}){const n=H(),t=Qe(),[a,i]=x.useState(!1),{data:l}=$({queryKey:["exchangeRate"],queryFn:async()=>(await(await F.services.rate.$get()).json()).data}),o=N=>{const A=N.target.value;if(/^\d*$/.test(A))return u.trigger(),parseInt(A)||0},c=m.object({price:m.number({required_error:"Por favor, ingrese el monto en efectivo",invalid_type_error:"Por favor, ingrese un monto válido"}).min(200,"El precio debe ser mayor o igual a C$ 200.00").default(0),pay:m.boolean(),cordobasReceived:m.number({required_error:"Por favor, ingrese el monto en efectivo",invalid_type_error:"Por favor, ingrese un monto válido"}).min(0,"Por favor, ingrese el monto en efectivo").default(0).optional(),dollarsReceived:m.number({required_error:"Por favor, ingrese el monto en efectivo",invalid_type_error:"Por favor, ingrese un monto válido"}).min(0,"Por favor, ingrese el monto en efectivo").default(0).optional(),total:m.number({required_error:"Monto Insuficiente",invalid_type_error:"Monto Insuficiente"}).default(0)}).superRefine((N,A)=>{N.total<N.price&&N.pay===!0&&A.addIssue({code:m.ZodIssueCode.custom,message:"Monto Insuficiente, el total debe ser igual o mayor que el precio",path:["total"]})}),u=O({resolver:V(c),defaultValues:{price:0,pay:!1,cordobasReceived:0,dollarsReceived:0,total:0}}),d=R({mutationFn:async N=>{const S=await(await F.queries.end[":querieId"].$patch({param:{querieId:s},json:{price:N.price,pay:N.pay}})).json();S.success?(k.success("Consulta finalizada correctamente"),i(!1),n.invalidateQueries({queryKey:[""]}),t({to:"/doctor/upcoming"})):k.error(S.error)}}),h=N=>{d.mutate(N)},v=()=>{const N=u.watch("dollarsReceived")??0;return(u.watch("cordobasReceived")??0)+N*l},j=()=>{const A=v()-u.watch("price");return A<0||isNaN(A)?0:A},b=()=>{const A=(u.watch("dollarsReceived")??0)*l,S=u.watch("price")-A-(u.watch("cordobasReceived")??0);return S>0?S:0};return x.useEffect(()=>{const N=v();u.setValue("total",N??0),u.trigger()},[u.watch("price"),u.watch("dollarsReceived"),u.watch("cordobasReceived")]),e.jsx("div",{className:"fixed bottom-3 left-0 right-0 flex justify-center items-center z-50",children:e.jsxs(B,{open:a,onOpenChange:i,children:[e.jsx(U,{asChild:!0,children:e.jsxs(D,{className:"flex items-center gap-2 rounded-sm",children:[e.jsx(ss,{}),e.jsx("span",{children:"Terminar consulta"})]})}),e.jsxs(_,{className:"sm:max-w-[500px]",children:[e.jsxs(X,{children:[e.jsx(Q,{children:"¿Terminar consulta?"}),e.jsxs(we,{children:["Guarda la información de ",r,". Una vez guardado, no podrás modificar el precio."]})]}),e.jsx(G,{...u,children:e.jsxs("form",{className:"space-y-4",onSubmit:u.handleSubmit(h),children:[e.jsx(w,{control:u.control,name:"price",render:({field:N})=>e.jsxs(f,{children:[e.jsx(p,{htmlFor:"price",children:"Costo: C$"}),e.jsx(y,{children:e.jsx(I,{id:"price",type:"text",inputMode:"numeric",pattern:"\\d*",value:N.value??"",onChange:A=>{const S=o(A);N.onChange(S)},className:" text-sm px-2"})}),e.jsx(C,{})]})}),e.jsx(w,{control:u.control,name:"pay",render:({field:N})=>e.jsxs(f,{className:"flex items-center space-x-3",children:[e.jsx(y,{children:e.jsx(es,{checked:N.value,className:"mt-2",onCheckedChange:N.onChange})}),e.jsx(p,{className:"",children:"Cobrar personalmente"})]})}),e.jsx(ps,{children:u.watch("pay")&&e.jsxs(Ce.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("p",{className:"text-lg",children:["Tasa de cambio actual:"," ",e.jsxs("span",{className:"font-semibold",children:["C$",l]})]}),e.jsx(Io,{current:l})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(w,{control:u.control,name:"cordobasReceived",render:({field:N})=>e.jsxs(f,{className:"flex-1",children:[e.jsx(p,{htmlFor:"cordobasReceived",children:"Córdobas"}),e.jsx(y,{children:e.jsx(I,{id:"cordobasReceived",type:"text",inputMode:"numeric",pattern:"\\d*",value:N.value??"",onChange:A=>{const S=o(A);N.onChange(S)},className:" text-sm px-2"})}),e.jsx(C,{})]})}),e.jsx(w,{control:u.control,name:"dollarsReceived",render:({field:N})=>e.jsxs(f,{className:"flex-1",children:[e.jsx(p,{htmlFor:"dollarsReceived",children:"Dólares"}),e.jsx(y,{children:e.jsx(I,{id:"dollarsReceived",type:"text",inputMode:"numeric",pattern:"\\d*",value:N.value??"",onChange:A=>{const S=o(A);N.onChange(S)},className:" text-sm px-2"})}),e.jsx(C,{})]})})]}),e.jsxs(Ce.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},children:[e.jsxs("div",{className:`p-1 border rounded-lg  w-full flex flex-col
                       justify-center items-center gap-4`,children:[e.jsx("div",{className:"text-center",children:b()>0&&e.jsxs("p",{className:"text-xl font-semibold text-destructive",children:["Faltan"," ",me(b())]})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm",children:"Cambio:"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:me(j())})]})]}),u.formState.errors.cordobasReceived&&e.jsx(C,{children:u.formState.errors.cordobasReceived.message})]})]})}),e.jsx(ne,{children:e.jsx(T,{loading:d.isPending,type:"submit",children:"Guardar"})})]})})]})]})})}function De({querieId:s,fieldValue:r,label:n,autoType:t}){const[a,i]=x.useState(r||""),[l,o]=x.useState(null),c=d=>{i(d),u.mutate(d)},u=R({mutationFn:async d=>{if(d==="")return;const v=await(await F.queries.auto[":querieId"].$patch({param:{querieId:s},json:{data:d,autoType:t}})).json();v.success?(o(!0),setTimeout(()=>o(null),2e3)):(o(!1),console.log(v.error))}});return e.jsxs("div",{children:[e.jsx(Z,{className:`text-lg font-semibold ${l?"text-green-500":""}`,children:n}),e.jsxs("div",{className:"relative flex items-center",children:[e.jsx(ae,{value:a,onChange:d=>i(d.target.value),className:`w-full transition-all ${l?"border-green-500 border-2":" border"}`}),l&&e.jsx(as,{className:"text-green-500 w-5 h-5 absolute right-2 top-1/2 transform -translate-y-1/2 transition-opacity"})]}),e.jsx(gi,{data:a,onSave:c,interval:1500})]})}const ir=ee("/doctor/_doctor/queries")({async validateSearch({querieId:s}){return s},component:Fo});function Fo(){const{querieId:s}=ir.useSearch(),{data:r}=ir.useRouteContext(),{data:n,isLoading:t}=$({queryKey:["querieBase",s],queryFn:async()=>{if(!s)return null;const c=await(await F.queries.base.$get({query:{querieId:s}})).json();return c.success||k("Error al cargar la consulta"),c.data}}),{data:a,isLoading:i}=$({queryKey:["query",s],queryFn:async()=>{if(!s)return null;const c=await(await F.queries.data.$get({query:{querieId:s}})).json();return c.success||k("Error al cargar la consulta"),c.data}}),{data:l}=$({queryKey:["groups",s],queryFn:async()=>{const c=await(await F.queries.grups.$get({query:{querieId:s}})).json();return!c.success||!c.data||c.data===void 0?null:c.data}});return e.jsxs("div",{className:"relative min-h-screen",children:[e.jsxs("div",{className:"w-full ",children:[i&&e.jsx("div",{children:"Cargando consulta..."}),!i&&a&&e.jsx("section",{className:"p-6 sm:m-8 m-4",children:e.jsxs("div",{className:"flex  justify-center sm:space-x-8 items-center  text-center sm:text-left",children:[e.jsxs("div",{className:"flex items-center space-x-2 ",children:[e.jsxs("div",{className:"mr-4 flex items-end",children:[e.jsx(ba,{patientId:a.patientId,patientName:a.name}),e.jsx(qr,{patientName:a.name,patientId:a.patientId,size:"24"})]}),e.jsxs("div",{className:"",children:[e.jsx(Z,{className:"text-sm font-medium",children:"Paciente:"}),e.jsx("span",{className:"block text-xl font-semibold",children:a.name})]})]}),e.jsxs("div",{className:"",children:[e.jsx(Z,{className:"text-sm font-medium",children:"Expediente:"}),e.jsx("span",{className:"block text-xl font-semibold",children:a.idFile})]}),a.emergency&&e.jsx("div",{className:"",children:e.jsx(Z,{className:"mt-6 inline-block bg-destructive text-lg font-semibold py-1 px-3 rounded-full",children:"Emergencia"})})]})}),e.jsxs("section",{className:"sm:space-y-5 mt-5 space-y-3 sm:m-8 m-4",children:[t&&e.jsxs("div",{className:"grid sm:grid-cols-3 grid-cols-1 gap-2",children:[e.jsx(ns,{}),e.jsx(ns,{}),e.jsx(ns,{})]}),n&&e.jsxs("div",{className:"grid sm:grid-cols-2 grid-cols-1 gap-2",children:[e.jsxs("div",{className:"gap-2",children:[e.jsx(De,{querieId:n.querieId,fieldValue:n.reason,label:"Motivo de la consulta:",autoType:"reason"}),e.jsx(De,{querieId:n.querieId,fieldValue:n.history,label:"Historia de la Enfermedad Actual:",autoType:"history"}),e.jsx(De,{querieId:n.querieId,fieldValue:n.interrogation,label:"Interrogatorio por aparatos y sistemas:",autoType:"interrogation"})]}),e.jsx(Po,{querieId:n.querieId})]}),e.jsx("div",{className:"w-full",children:a&&e.jsx(Eo,{querieId:a.id})}),e.jsxs("div",{children:[i&&e.jsx("div",{children:"Cargando consulta..."}),!i&&a&&e.jsx(ma,{specialtie:r==null?void 0:r.doctor.specialtie,querieId:a.id})]}),t&&e.jsxs("div",{className:"grid sm:grid-cols-2 grid-cols-1 gap-2",children:[e.jsx(Ae,{}),e.jsx(Ae,{})]}),n&&e.jsxs("div",{className:"grid sm:grid-cols-2 grid-cols-1 gap-2",children:[e.jsx(De,{querieId:n.querieId,fieldValue:n.aspects,label:"Aspecto General:",autoType:"aspects"}),e.jsx(De,{querieId:n.querieId,fieldValue:n.skin,label:"Piel y mucosas:",autoType:"skin"})]}),e.jsxs("div",{className:"grid sm:gap-4 gap-2 sm:grid-cols-2 grid-cols-1",children:[a&&e.jsx(lo,{querieId:a.id,data:JSON.stringify(l==null?void 0:l.head)}),a&&e.jsx(uo,{querieId:a.id,data:JSON.stringify(l==null?void 0:l.torax)})]}),t&&e.jsxs("div",{className:"grid sm:grid-cols-2 grid-cols-1 gap-2",children:[e.jsx(Ae,{}),e.jsx(Ae,{}),e.jsx(Ae,{}),e.jsx(Ae,{}),e.jsx(Ae,{}),e.jsx(Ae,{})]}),n&&e.jsxs("div",{className:"grid pt-4 sm:grid-cols-2 grid-cols-1 gap-2 border border-customborder p-4 rounded-sm",children:[e.jsx(De,{querieId:n.querieId,fieldValue:n.abd,label:"Abdomen y Pelvis:",autoType:"abd"}),e.jsx(De,{querieId:n.querieId,fieldValue:n.anus,label:"Ano y recto (cuando aplique el caso):",autoType:"anus"}),e.jsx(De,{querieId:n.querieId,fieldValue:n.exSup,label:"Extremidades superiores:",autoType:"exSup"}),e.jsx(De,{querieId:n.querieId,fieldValue:n.exInf,label:"Extremidades inferiores:",autoType:"exInf"}),e.jsx(De,{querieId:n.querieId,fieldValue:n.genitu,label:"Genitourinario (cuando aplique el caso):",autoType:"gen"}),e.jsx(De,{querieId:n.querieId,fieldValue:n.neuro,label:"Examen neurológico:",autoType:"gen"})]}),t&&e.jsxs("div",{className:"grid sm:grid-cols-2 grid-cols-1 gap-2",children:[e.jsx(Ae,{}),e.jsx(Ae,{})]}),n&&e.jsxs("div",{className:"mt-4 grid sm:gap-4 gap-2 sm:grid-cols-2 grid-cols-1",children:[e.jsx(De,{querieId:n.querieId,fieldValue:n.observations,label:"Observaciones y Análisis:",autoType:"obs"}),e.jsx(De,{querieId:n.querieId,fieldValue:n.diag,label:"Diagnósticos o Problemas:",autoType:"diag"})]}),a&&e.jsxs("div",{className:"border border-customborder p-4 rounded-sm ",children:[e.jsx("p",{className:"text-lg font-semibold",children:"Planes"}),e.jsx(wo,{querieId:a.id,patientName:a.name}),e.jsx(So,{querieId:a.id,patientName:a.name}),e.jsx(Ao,{querieId:a.id,patientName:a.name})]})]})]}),a&&e.jsx(qo,{querieId:a==null?void 0:a.id,patientName:a==null?void 0:a.name})]})}const Na=["SOLTERO","SOLTERA","CASADO","CASADA","DIVORCIADO","DIVORCIADA","VIUDO","VIUDA"],wa=["MADRE","PADRE","HIJO","HIJA","ESPOSO","ESPOSA","TIA","TIO","HERMANO","HERMANA","ABUELO","ABUELA","CUÑADO","CUÑADA","SUEGRO","SUEGRA"],Mo=m.object({country:m.string(),countryCode:m.number(),flag:m.string()}),Ro=m.object({name:m.string({required_error:"Este campo es requerido"}).min(10,{message:"Nombre incorrecto"}).max(130,{message:"Nombre incorrecto"}),phone:m.string({required_error:"Este campo es requerido"}).max(8,{message:"Teléfono incorrecto"}).min(8,{message:"Teléfono incorrecto"}),nationality:Mo,DNI:m.string({required_error:"Este campo es requerido"}).max(16,{message:"Cédula incorrecta"}).min(16,{message:"Cédula incorrecta"}),relation:m.enum(wa,{required_error:"Este campo es requerido"}),civilStatus:m.enum(Na,{required_error:"Este campo es requerido"}),patientId:m.string()}),Fr=x.forwardRef(({className:s,containerClassName:r,...n},t)=>e.jsx(vi,{ref:t,containerClassName:q("flex items-center gap-1 has-[:disabled]:opacity-50",r),className:q("disabled:cursor-not-allowed",s),...n}));Fr.displayName="InputOTP";const ms=x.forwardRef(({className:s,...r},n)=>e.jsx("div",{ref:n,className:q("flex items-center",s),...r}));ms.displayName="InputOTPGroup";const le=x.forwardRef(({index:s,className:r,...n},t)=>{const a=x.useContext(yi),{char:i,hasFakeCaret:l,isActive:o}=a.slots[s];return e.jsxs("div",{ref:t,className:q("relative flex h-8 w-8 items-center justify-center border-y border-r border-input text-sm shadow-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",o&&"z-10 ring-1 ring-ring",r),...n,children:[i,l&&e.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});le.displayName="InputOTPSlot";const $o=x.forwardRef(({...s},r)=>e.jsx("div",{ref:r,role:"separator",...s,children:e.jsx(Zt,{})}));$o.displayName="InputOTPSeparator";function Ca({onMunicipalityChange:s,onDateChange:r,onFullIdChange:n,onErrorChange:t,value:a}){const i=u=>{if(u.length!==6)return null;const d=parseInt(u.slice(0,2),10),h=parseInt(u.slice(2,4),10)-1,v=parseInt(u.slice(4),10);if(h<0||h>11||d<1||d>31)return null;const b=v>=30?v+1900:v+2e3,N=new Date(b,h,d);return hi(N)?N:null},[l,o]=x.useState(window.innerWidth>=768?"8":"4");x.useEffect(()=>{const u=()=>{o(window.innerWidth>=768?"8":"6")};return window.addEventListener("resize",u),()=>{window.removeEventListener("resize",u)}},[]);const c=u=>{n(u);const d=u.split("");let h="",v=null;d.length<=3?(h=d.join(""),s(h)):(d.length<=9||d.length<=14)&&(h=d.slice(0,3).join(""),v=d.slice(3,9).join(""),s(h));const j=v?i(v):null;if(v&&j===null){t("Cédula incorrecta");return}r(j),t(null)};return e.jsxs(Fr,{pattern:bi,maxLength:14,value:a??"",onChange:c,children:[e.jsxs(ms,{children:[e.jsx(le,{className:`w-${l} h-${l}`,index:0}),e.jsx(le,{className:`w-${l} h-${l}`,index:1}),e.jsx(le,{className:`w-${l} h-${l}`,index:2})]}),e.jsxs(ms,{children:[e.jsx(le,{className:`w-${l} h-${l}`,index:3}),e.jsx(le,{className:`w-${l} h-${l}`,index:4}),e.jsx(le,{className:`w-${l} h-${l}`,index:5}),e.jsx(le,{className:`w-${l} h-${l}`,index:6}),e.jsx(le,{className:`w-${l} h-${l}`,index:7}),e.jsx(le,{className:`w-${l} h-${l}`,index:8})]}),e.jsxs(ms,{children:[e.jsx(le,{className:`w-${l} h-${l}`,index:9}),e.jsx(le,{className:`w-${l} h-${l}`,index:10}),e.jsx(le,{className:`w-${l} h-${l}`,index:11}),e.jsx(le,{className:`w-${l} h-${l}`,index:12}),e.jsx(le,{className:`w-${l} h-${l}`,index:13})]})]})}function Mr({onSelect:s}){const r={country:"Nicaragua",countryCode:505,flag:"https://flagcdn.com/ni.svg"},[n,t]=x.useState(!1),[a,i]=x.useState(r),[l,o]=x.useState(""),{data:c=[],isFetching:u}=$({queryKey:["countries",l],queryFn:async()=>l===""?[]:(await(await F.locations.countries.$get({query:{q:l}})).json()).countries,staleTime:5*60*1e3});return e.jsxs(Js,{open:n,onOpenChange:t,children:[e.jsx(Ys,{asChild:!0,children:e.jsxs(D,{variant:"outline",role:"combobox","aria-expanded":n,className:"w-full justify-between",children:[a?e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:a.flag,alt:`${a.country} flag`,className:"mr-2 h-4 w-4"}),a.country]}):"Nacionalidad...",e.jsx(mr,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(Es,{className:"w-full p-0",children:e.jsxs(Bs,{children:[e.jsx("div",{className:"m-3",children:e.jsx(I,{placeholder:"Buscar",value:l,onChange:d=>o(d.target.value)})}),e.jsxs(Sr,{children:[u&&e.jsx("div",{className:"w-5 flex m-auto h-5",children:e.jsx(Rs,{})}),e.jsx(Us,{children:"Sin resultados"}),e.jsx(Qs,{children:c.map(d=>e.jsxs(Ws,{value:d.countryCode.toString(),onSelect:()=>{i(d),s(d),t(!1)},children:[e.jsx("img",{src:d.flag,alt:`${d.country} flag`,className:"mr-2 h-4 w-4"}),d.country,e.jsx(as,{className:q("ml-auto h-4 w-4",(a==null?void 0:a.countryCode)===d.countryCode?"opacity-100":"opacity-0")})]},d.countryCode))})]})]})})]})}function Rr({id:s}){const r=H(),[n,t]=x.useState(!1),[a,i]=x.useState(null),l={country:"Nicaragua",countryCode:505,flag:"https://flagcdn.com/ni.svg"},o=O({resolver:V(Ro),defaultValues:{patientId:s,name:"",DNI:"",civilStatus:"SOLTERA",relation:"MADRE",phone:"",nationality:l}}),c=R({mutationFn:async j=>{const N=await(await F.file.relative.$post({json:j})).json();if(!N.success)throw new Error(N.error);return k.success("El familiar se agregó correctamente"),r.invalidateQueries({queryKey:["relativeList"]}),t(!1),N},onError:j=>{k.error(j.message)}}),u=j=>{c.mutate(j)},d=j=>{j?o.setError("DNI",{type:"custom",message:j}):o.clearErrors("DNI")},h=j=>{i(j);const b=j.slice(-1).toUpperCase(),N=j.slice(0,-1)+b,A=`${N.slice(0,3)}-${N.slice(3,9)}-${N.slice(9)}`;o.setValue("DNI",A)},v=o.watch("nationality");return e.jsxs(B,{open:n,onOpenChange:t,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsx(D,{size:"icon",className:"ml-2",children:e.jsx(Se,{})})})}),e.jsx(K,{children:"Nuevo familiar"})]})}),e.jsxs(_,{className:"",children:[e.jsx(X,{children:e.jsx(Q,{children:"Agregar un familiar"})}),e.jsx("div",{className:"w-full ",children:e.jsx(G,{...o,children:e.jsxs("form",{className:"w-full",onSubmit:o.handleSubmit(u),children:[e.jsx(w,{control:o.control,name:"name",render:({field:j})=>e.jsxs(f,{children:[e.jsx(p,{children:"Nombre y apellidos"}),e.jsx(y,{children:e.jsx(I,{...j,type:"text"})}),e.jsx(C,{})]})}),e.jsx(w,{control:o.control,name:"DNI",render:({field:j})=>e.jsxs(f,{children:[e.jsx(p,{children:"Cédula de identidad"}),e.jsx(y,{children:(v==null?void 0:v.country)==="Nicaragua"?e.jsx(Ca,{value:a??"",onMunicipalityChange:()=>{},onDateChange:()=>{},onFullIdChange:h,onErrorChange:d}):e.jsx(I,{value:o.watch("DNI")??"",placeholder:"Cédula",onChange:b=>{o.setValue("DNI",b.target.value)}})}),e.jsx(C,{})]})}),e.jsx(w,{control:o.control,name:"nationality",render:({field:j})=>e.jsxs(f,{children:[e.jsx(p,{children:"Nacionalidad"}),e.jsx(y,{children:e.jsx(Mr,{onSelect:b=>j.onChange(b)})}),e.jsx(C,{})]})}),e.jsx(w,{control:o.control,name:"phone",render:({field:j})=>e.jsxs(f,{children:[e.jsx(p,{children:"Teléfono"}),e.jsx(y,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"+"+(v==null?void 0:v.countryCode)}),e.jsx(I,{...j,type:"text",pattern:"^[0-9]+$",maxLength:8,className:"w-full"})]})}),e.jsx(C,{})]})}),e.jsx(w,{control:o.control,name:"relation",render:({field:j})=>e.jsxs(f,{children:[e.jsx(p,{children:"Familiaridad"}),e.jsx(y,{children:e.jsxs(be,{...j,onValueChange:b=>j.onChange(b),children:[e.jsx(fe,{className:"w-full",children:e.jsx(Ne,{placeholder:"Seleccione la familiaridad"})}),e.jsx(ge,{children:e.jsxs(Kr,{children:[e.jsx(tr,{children:"Familiaridad"}),wa.map(b=>e.jsx(se,{value:b,children:b},b))]})})]})}),e.jsx(C,{})]})}),e.jsx(w,{control:o.control,name:"civilStatus",render:({field:j})=>e.jsxs(f,{children:[e.jsx(p,{children:"Estado civil"}),e.jsx(y,{children:e.jsxs(be,{...j,onValueChange:b=>j.onChange(b),children:[e.jsx(fe,{className:"w-full",children:e.jsx(Ne,{placeholder:"Seleccione el estado civil"})}),e.jsx(ge,{children:e.jsxs(Kr,{children:[e.jsx(tr,{children:"Estado Civil"}),Na.map(b=>e.jsx(se,{value:b,children:b},b))]})})]})}),e.jsx(C,{})]})}),e.jsx(ne,{className:"flex justify-end pt-4",children:e.jsx(T,{loading:c.isPending,type:"submit",children:"Guardar"})})]})})})]})]})}const To=m.object({gesta:m.string().max(300,"error").nullable().optional(),para:m.string().max(300,"error").nullable().optional(),aborto:m.string().max(300,"error").nullable().optional(),cesarea:m.string().max(300,"error").nullable().optional(),fum:m.string().max(300,"error").nullable().optional(),abortosInfo:m.string().max(300,"error").nullable().optional(),cesareaMotivos:m.string().max(300,"error").nullable().optional(),cesareaLugar:m.string().max(300,"error").nullable().optional(),cpnInfo:m.string().max(300,"error").nullable().optional(),enfermedadesPrevias:m.string().max(300,"error").nullable().optional(),enfermedadesEmbarazo:m.string().max(300,"error").nullable().optional(),medicacionEmbarazo:m.string().max(300,"error").nullable().optional(),hospitalizaciones:m.string().max(300,"error").nullable().optional()}),zo=m.object({lugarAtencionParto:m.string({required_error:"Este campo es requerido"}),horaNacimiento:m.date({required_error:"Este campo es requerido"}),duracionParto:m.string({required_error:"Este campo es requerido"}),edadGestacional:m.number({required_error:"Este campo es requerido"}).min(22,"La edad gestacional debe ser al menos 22 semanas").max(42,"La edad gestacional no puede exceder 42 semanas"),atencionParto:m.string({required_error:"Este campo es requerido"}),viaParto:m.enum(["Vaginal","Cesárea"],{errorMap:()=>({message:"Debe seleccionar la vía del parto (Vaginal o Cesárea)"})}),presentacion:m.string().optional().nullable(),eventualidades:m.string().optional()}),Lo=m.object({apgar1:m.string().min(1,"APGAR 1° es requerido"),apgar5:m.string().min(1,"APGAR 5° es requerido"),peso:m.string().min(1,"Peso es requerido"),talla:m.string().min(1,"Talla es requerida"),asfixia:m.boolean(),asfixiaEspecifique:m.string().optional().nullable(),alojamientoConjunto:m.boolean(),tiempoJuntoMadre:m.enum(["Permanente","Transitorio"]).optional(),horasJuntoMadre:m.string().optional(),hospitalizacion:m.string().optional()}).refine(s=>!(s.asfixia&&!s.asfixiaEspecifique),{message:"Si asfixia es true, debe especificar",path:["asfixiaEspecifique"]}).refine(s=>!(s.alojamientoConjunto&&!s.tiempoJuntoMadre),{message:"Si alojamiento conjunto es true, debe especificar el tiempo junto a la madre",path:["tiempoJuntoMadre"]}).refine(s=>!(s.tiempoJuntoMadre==="Transitorio"&&!s.horasJuntoMadre),{message:"Si el tiempo junto a la madre es Transitorio, debe especificar las horas",path:["horasJuntoMadre"]}),Vo=m.object({exclusiveBreastfeeding:m.boolean({required_error:"Este campo es requerido"}),mixedFeeding:m.boolean({required_error:"Este campo es requerido"}),exclusiveBreastfeedingDuration:m.string().optional(),mixedFeedingDuration:m.string().optional(),weaning:m.string().optional()}),Oo=m.object({fixedGaze:m.boolean().optional(),fixedGazeAge:m.number().int().min(0).optional(),heldHeadUp:m.boolean().optional(),heldHeadUpAge:m.number().int().min(0).optional(),smiled:m.boolean().optional(),smiledAge:m.number().int().min(0).optional(),satUp:m.boolean().optional(),satUpAge:m.number().int().min(0).optional(),crawled:m.boolean().optional(),crawledAge:m.number().int().min(0).optional(),walked:m.boolean().optional(),walkedAge:m.number().int().min(0).optional(),projected:m.boolean().optional(),projectedAge:m.number().int().min(0).optional()}),Ho=Oo.superRefine((s,r)=>{["fixedGaze","heldHeadUp","smiled","satUp","crawled","walked","projected"].forEach(t=>{s[t]===!0&&s[`${t}Age`]===void 0&&r.addIssue({code:m.ZodIssueCode.custom,message:"Por favor, complete la edad",path:[`${t}Age`]})})}),_o=m.object({infections:m.string().optional(),chronicDiseases:m.string().optional(),surgeries:m.string().optional(),hospitalizations:m.string().optional(),others:m.string().optional()});function Ko({fileId:s,data:r}){const n=[{key:"fixedGaze",ageKey:"fixedGazeAge",title:"Fijó la mirada"},{key:"heldHeadUp",ageKey:"heldHeadUpAge",title:"Sostuvo la cabeza"},{key:"smiled",ageKey:"smiledAge",title:"Se sonrió"},{key:"satUp",ageKey:"satUpAge",title:"Se sentó"},{key:"crawled",ageKey:"crawledAge",title:"Gateó"},{key:"walked",ageKey:"walkedAge",title:"Caminó"},{key:"projected",ageKey:"projectedAge",title:"Se proyectó"}];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{children:"Desarrollo Psicomotor"}),e.jsx(Go,{fileId:s,defaultValues:r})]}),e.jsx("div",{className:"grid sm:grid-cols-6 grid-cols-3 gap-2",children:n.map(({title:t,key:a,ageKey:i})=>{const l=(r==null?void 0:r[a])??void 0,o=(r==null?void 0:r[i])??void 0;return l!==void 0?e.jsxs(he,{className:"p-2",children:[e.jsx(je,{className:"p-0",children:e.jsx(ve,{className:"text-sm font-medium",children:t})}),e.jsx(pe,{className:"p-0 pt-1",children:e.jsx("p",{className:"text-sm",children:l?e.jsxs(e.Fragment,{children:["Sí",o!==void 0&&` (${o} ${o===1?"mes":"meses"})`]}):"No"})})]},a):null})})]})}function Go({fileId:s,defaultValues:r}){const[n,t]=x.useState(!1),a=H(),i=O({resolver:V(Ho),defaultValues:r||{fixedGaze:void 0,fixedGazeAge:void 0,heldHeadUp:void 0,heldHeadUpAge:void 0,smiled:void 0,smiledAge:void 0,satUp:void 0,satUpAge:void 0,crawled:void 0,crawledAge:void 0,walked:void 0,walkedAge:void 0,projected:void 0,projectedAge:void 0}}),l=R({mutationFn:async u=>{(await(await fetch(`/api/file/pediatric/${s}/apnp/psico`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).json()).success||k.error("Error al guardar"),a.invalidateQueries({queryKey:["apnp"]}),k.success("Guardado correctamente"),t(!1)}});async function o(u){const d=Object.fromEntries(Object.entries(u).filter(([h,v])=>v!==void 0));l.mutate(d),t(!1)}const c=[{name:"fixedGaze",label:"Fijó la mirada"},{name:"heldHeadUp",label:"Sostuvo la cabeza"},{name:"smiled",label:"Se sonrió"},{name:"satUp",label:"Se sentó"},{name:"crawled",label:"Gateó"},{name:"walked",label:"Caminó"},{name:"projected",label:"Se proyectó"}];return e.jsxs(B,{open:n,onOpenChange:t,children:[e.jsx(U,{asChild:!0,children:e.jsx(D,{size:"icon",onClick:()=>t(!0),children:e.jsx(Se,{className:"h-4 w-4"})})}),e.jsxs(_,{children:[e.jsx(X,{children:e.jsx(Q,{children:"Desarrollo Psicomotor"})}),e.jsx(G,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(o),className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsx("div",{}),e.jsx("div",{className:"font-semibold text-center",children:"Sí/No"}),e.jsx("div",{className:"font-semibold text-center",children:"Edad (meses)"})]}),c.map(u=>e.jsxs("div",{className:"grid grid-cols-3 gap-1 items-center",children:[e.jsx(p,{children:u.label}),e.jsx(w,{control:i.control,name:u.name,render:({field:d})=>e.jsx(f,{className:"flex items-center justify-center space-x-2",children:e.jsx(y,{children:e.jsx(es,{checked:d.value===!0,onCheckedChange:h=>d.onChange(h===!0?!0:void 0)})})})}),e.jsx(w,{control:i.control,name:`${u.name}Age`,render:({field:d})=>{var h;return e.jsxs(f,{children:[e.jsx(y,{children:e.jsx(I,{type:"number",onChange:v=>{const j=v.target.value;d.onChange(j===""?void 0:parseInt(j,10))},value:((h=d.value)==null?void 0:h.toString())??"",disabled:!i.watch(u.name)})}),e.jsx(C,{})]})}})]},u.name)),e.jsx(ne,{children:e.jsx(T,{type:"submit",loading:i.formState.isSubmitting,children:"Guardar"})})]})})]})]})}function Bo({fileId:s,data:r}){const n=[{title:"Gesta:",key:"gesta"},{title:"Para:",key:"para"},{title:"Abortos (No. e intervalos):",key:"aborto"},{title:"Cesárea:",key:"cesarea"},{title:"FUM:",key:"fum"}],t=[{title:"Abortos:",key:"abortosInfo"},{title:"Cesáreas (motivos):",key:"cesareaMotivos"},{title:"Lugar de la/s cesárea/s: ",key:"cesareaLugar"},{title:"Lugar y No. de CPN:",key:"cpnInfo"},{title:"Enf. Previas y/o crónicas de la madre:",key:"enfermedadesPrevias"},{title:"Enf. De la madre durante el embarazo:",key:"enfermedadesEmbarazo"},{title:"Medicación durante el embarazo:",key:"medicacionEmbarazo"},{title:"Hospitalizaciones y complicaciones durante el embarazo:",key:"hospitalizaciones"}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between my-2",children:[e.jsx("p",{children:"Antecedentes prenatales"}),e.jsx(Uo,{fileId:s,defaultValues:r})]}),e.jsxs("section",{className:"space-y-2",children:[e.jsx("div",{className:"grid sm:grid-cols-5 grid-cols-3 gap-2",children:r&&n.map(({title:a,key:i})=>{const l=r[i];return l?e.jsxs(he,{className:"p-2",children:[e.jsx(je,{className:"p-0",children:e.jsx(ve,{children:a})}),e.jsx(pe,{className:"p-0",children:l.split(`
`).map((o,c)=>e.jsx("p",{className:"mb-2 last:mb-0 whitespace-pre-wrap text-sm",children:o},c))})]},i):null})}),e.jsx("div",{className:"grid sm:grid-cols-2 grid-cols-1 gap-2",children:r&&t.map(({title:a,key:i})=>{const l=r[i];return l?e.jsxs(he,{className:"p-2",children:[e.jsx(je,{className:"p-0",children:e.jsx(ve,{children:a})}),e.jsx(pe,{className:"p-0",children:l.split(`
`).map((o,c)=>e.jsx("p",{className:"mb-2 last:mb-0 whitespace-pre-wrap text-sm",children:o},c))})]},i):null})})]})]})}function Uo({fileId:s,defaultValues:r}){const[n,t]=x.useState(!1),a=H(),i=O({resolver:V(To),defaultValues:r===null?{}:r});function l(c){o.mutate(c)}const o=R({mutationFn:async c=>{(await(await fetch(`/api/file/pediatric/${s}/apnp/prenatales`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).json()).success||k.error("Error al guardar"),a.invalidateQueries({queryKey:["apnp"]}),k.success("Guardado correctamente"),t(!1)}});return e.jsxs(B,{open:n,onOpenChange:t,children:[e.jsx(U,{asChild:!0,children:e.jsx(D,{size:"icon",children:e.jsx(Se,{})})}),e.jsxs(_,{className:"sm:max-w-[600px] md:max-w-[800px] lg:max-w-[1000px] xl:max-w-[1200px]",children:[e.jsx(X,{children:e.jsx(Q,{children:"Antecendentes Prenatales"})}),e.jsx(G,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(l),className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsx(w,{control:i.control,name:"gesta",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Gesta"}),e.jsx(y,{children:e.jsx(I,{type:"number",onChange:c.onChange,value:c.value??""})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"para",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Para"}),e.jsx(y,{children:e.jsx(I,{type:"number",onChange:c.onChange,value:c.value??""})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"aborto",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Aborto"}),e.jsx(y,{children:e.jsx(I,{type:"number",onChange:c.onChange,value:c.value??""})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"cesarea",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Cesárea"}),e.jsx(y,{children:e.jsx(I,{type:"number",onChange:c.onChange,value:c.value??""})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"fum",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"FUM (fecha)"}),e.jsx(y,{children:e.jsx(I,{onChange:c.onChange,value:c.value??""})}),e.jsx(C,{})]})})]}),e.jsxs("div",{className:"grid sm:grid-cols-4 gap-3",children:[e.jsx(w,{control:i.control,name:"abortosInfo",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Abortos (Número e intervalos)"}),e.jsx(y,{children:e.jsx(ae,{onChange:c.onChange,value:c.value??""})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"cesareaMotivos",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Cesáreas (Motivos)"}),e.jsx(y,{children:e.jsx(ae,{onChange:c.onChange,value:c.value??""})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"cesareaLugar",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Lugar de la/s cesárea/s"}),e.jsx(y,{children:e.jsx(ae,{onChange:c.onChange,value:c.value??""})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"cpnInfo",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Lugar y Número de CPN"}),e.jsx(y,{children:e.jsx(ae,{onChange:c.onChange,value:c.value??""})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"enfermedadesPrevias",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Enfermedades previas y/o crónicas de la madre"}),e.jsx(y,{children:e.jsx(ae,{onChange:c.onChange,value:c.value??""})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"enfermedadesEmbarazo",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Enfermedades de la madre durante el embarazo"}),e.jsx(y,{children:e.jsx(ae,{onChange:c.onChange,value:c.value??""})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"medicacionEmbarazo",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Medicación durante el embarazo"}),e.jsx(y,{children:e.jsx(ae,{onChange:c.onChange,value:c.value??""})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"hospitalizaciones",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Hospitalizaciones y complicaciones durante el embarazo"}),e.jsx(y,{children:e.jsx(ae,{onChange:c.onChange,value:c.value??""})}),e.jsx(C,{})]})})]}),e.jsx(ne,{children:e.jsx(T,{type:"submit",children:"Guardar"})})]})})]})]})}function Qo(s){return/^(0[0-9]|1[0-9]|2[0-3])$/.test(s)}function Wo(s){return/^(0[1-9]|1[0-2])$/.test(s)}function Jo(s){return/^[0-5][0-9]$/.test(s)}function Xs(s,{max:r,min:n=0,loop:t=!1}){let a=parseInt(s,10);return isNaN(a)?"00":(t?(a>r&&(a=n),a<n&&(a=r)):(a>r&&(a=r),a<n&&(a=n)),a.toString().padStart(2,"0"))}function Sa(s){return Qo(s)?s:Xs(s,{max:23})}function Pa(s){return Wo(s)?s:Xs(s,{min:1,max:12})}function $s(s){return Jo(s)?s:Xs(s,{max:59})}function $r(s,{min:r,max:n,step:t}){let a=parseInt(s,10);return isNaN(a)?"00":(a+=t,Xs(String(a),{min:r,max:n,loop:!0}))}function Yo(s,r){return $r(s,{min:0,max:23,step:r})}function Zo(s,r){return $r(s,{min:1,max:12,step:r})}function Br(s,r){return $r(s,{min:0,max:59,step:r})}function Xo(s,r){const n=$s(r);return s.setMinutes(parseInt(n,10)),s}function ec(s,r){const n=$s(r);return s.setSeconds(parseInt(n,10)),s}function sc(s,r){const n=Sa(r);return s.setHours(parseInt(n,10)),s}function rc(s,r,n){const t=parseInt(Pa(r),10),a=tc(t,n);return s.setHours(a),s}function lr(s,r,n,t){switch(n){case"minutes":return Xo(s,r);case"seconds":return ec(s,r);case"hours":return sc(s,r);case"12hours":return t?rc(s,r,t):s;default:return s}}function nc(s,r){if(!s)return"00";switch(r){case"minutes":return $s(String(s.getMinutes()));case"seconds":return $s(String(s.getSeconds()));case"hours":return Sa(String(s.getHours()));case"12hours":const n=ka(s.getHours());return Pa(String(n));default:return"00"}}function ac(s,r,n){switch(n){case"minutes":return Br(s,r);case"seconds":return Br(s,r);case"hours":return Yo(s,r);case"12hours":return Zo(s,r);default:return"00"}}function tc(s,r){return r==="PM"?s<=11?s+12:s:r==="AM"&&s===12?0:s}function ka(s){return s===0||s===12?"12":s>=22?`${s-12}`:s%12>9?`${s}`:`0${s%12}`}function ic(s){return Array.from({length:12},(r,n)=>({value:n,label:ie(new Date(2021,n),"MMMM",{locale:s})}))}function lc(s,r=50){const n=new Date;return Array.from({length:r*2+1},(t,a)=>({value:n.getFullYear()-r+a,label:(n.getFullYear()-r+a).toString()}))}function Ea({className:s,classNames:r,showOutsideDays:n=!0,yearRange:t=50,...a}){const i=x.useMemo(()=>ic(a.locale||ar),[]),l=x.useMemo(()=>lc(a.locale||ar,t),[]);return e.jsx(Ni,{showOutsideDays:n,className:q("p-3",s),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0 justify-center",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:q(Ms({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:q(Ms({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...r},components:{IconLeft:({...o})=>e.jsx(ei,{className:"h-4 w-4"}),IconRight:({...o})=>e.jsx(si,{className:"h-4 w-4"}),CaptionLabel:({displayMonth:o})=>e.jsxs("div",{className:"inline-flex gap-2",children:[e.jsxs(be,{defaultValue:o.getMonth().toString(),onValueChange:c=>{var d;const u=new Date(o);u.setMonth(parseInt(c,10)),(d=a.onMonthChange)==null||d.call(a,u)},children:[e.jsx(fe,{className:"w-fit border-none p-0 focus:bg-accent focus:text-accent-foreground",children:e.jsx(Ne,{})}),e.jsx(ge,{children:i.map(c=>e.jsx(se,{value:c.value.toString(),children:c.label},c.value))})]}),e.jsxs(be,{defaultValue:o.getFullYear().toString(),onValueChange:c=>{var d;const u=new Date(o);u.setFullYear(parseInt(c,10)),(d=a.onMonthChange)==null||d.call(a,u)},children:[e.jsx(fe,{className:"w-fit border-none p-0 focus:bg-accent focus:text-accent-foreground",children:e.jsx(Ne,{})}),e.jsx(ge,{children:l.map(c=>e.jsx(se,{value:c.value.toString(),children:c.label},c.value))})]})]})},...a})}Ea.displayName="Calendar";const Da=x.forwardRef(({period:s,setPeriod:r,date:n,onDateChange:t,onLeftFocus:a,onRightFocus:i},l)=>{const o=u=>{u.key==="ArrowRight"&&(i==null||i()),u.key==="ArrowLeft"&&(a==null||a())},c=u=>{if(r==null||r(u),n){const d=new Date(n),h=ka(n.getHours());t==null||t(lr(d,h.toString(),"12hours",s==="AM"?"PM":"AM"))}};return e.jsx("div",{className:"flex h-10 items-center",children:e.jsxs(be,{defaultValue:s,onValueChange:u=>c(u),children:[e.jsx(fe,{ref:l,className:"w-[65px] focus:bg-accent focus:text-accent-foreground",onKeyDown:o,children:e.jsx(Ne,{})}),e.jsxs(ge,{children:[e.jsx(se,{value:"AM",children:"AM"}),e.jsx(se,{value:"PM",children:"PM"})]})]})})});Da.displayName="TimePeriodSelect";const As=x.forwardRef(({className:s,type:r="tel",value:n,id:t,name:a,date:i=new Date(new Date().setHours(0,0,0,0)),onDateChange:l,onChange:o,onKeyDown:c,picker:u,period:d,onLeftFocus:h,onRightFocus:v,...j},b)=>{const[N,A]=x.useState(!1),[S,P]=x.useState("0");x.useEffect(()=>{if(N){const M=setTimeout(()=>{A(!1)},2e3);return()=>clearTimeout(M)}},[N]);const g=x.useMemo(()=>nc(i,u),[i,u]),E=M=>u==="12hours"&&N&&g.slice(1,2)==="1"&&S==="0"?"0"+M:N?g.slice(1,2)+M:"0"+M,z=M=>{if(M.key!=="Tab"){if(M.preventDefault(),M.key==="ArrowRight"&&(v==null||v()),M.key==="ArrowLeft"&&(h==null||h()),["ArrowUp","ArrowDown"].includes(M.key)){const ce=M.key==="ArrowUp"?1:-1,Ie=ac(g,ce,u);N&&A(!1);const We=i?new Date(i):new Date;l==null||l(lr(We,Ie,u,d))}if(M.key>="0"&&M.key<="9"){u==="12hours"&&P(M.key);const ce=E(M.key);N&&(v==null||v()),A(We=>!We);const Ie=i?new Date(i):new Date;l==null||l(lr(Ie,ce,u,d))}}};return e.jsx(I,{ref:b,id:t||u,name:a||u,className:q("w-[48px] text-center  text-base tabular-nums caret-transparent focus:bg-accent focus:text-accent-foreground [&::-webkit-inner-spin-button]:appearance-none",s),value:n||g,onChange:M=>{M.preventDefault(),o==null||o(M)},type:r,inputMode:"decimal",onKeyDown:M=>{c==null||c(M),z(M)},...j})});As.displayName="TimePickerInput";const Ss=x.forwardRef(({date:s,onChange:r,hourCycle:n=24,granularity:t="second"},a)=>{const i=x.useRef(null),l=x.useRef(null),o=x.useRef(null),c=x.useRef(null),[u,d]=x.useState(s&&s.getHours()>=12?"PM":"AM");return x.useImperativeHandle(a,()=>({minuteRef:i.current,hourRef:l.current,secondRef:o.current,periodRef:c.current}),[i,l,o]),e.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:[e.jsx(As,{picker:n===24?"hours":"12hours",date:s,id:"datetime-picker-hour-input",onDateChange:r,ref:l,period:u,onRightFocus:()=>{var h;return(h=i.current)==null?void 0:h.focus()}}),(t==="minute"||t==="second")&&e.jsx(e.Fragment,{children:e.jsx(As,{picker:"minutes",date:s,onDateChange:r,ref:i,onLeftFocus:()=>{var h;return(h=l.current)==null?void 0:h.focus()},onRightFocus:()=>{var h;return(h=o.current)==null?void 0:h.focus()}})}),t==="second"&&e.jsx(e.Fragment,{children:e.jsx(As,{picker:"seconds",date:s,onDateChange:r,ref:o,onLeftFocus:()=>{var h;return(h=i.current)==null?void 0:h.focus()},onRightFocus:()=>{var h;return(h=c.current)==null?void 0:h.focus()}})}),n===12&&e.jsx("div",{className:"grid gap-1 text-center",children:e.jsx(Da,{period:u,setPeriod:d,date:s,onDateChange:h=>{r==null||r(h),h&&(h==null?void 0:h.getHours())>=12?d("PM"):d("AM")},ref:c,onLeftFocus:()=>{var h;return(h=o.current)==null?void 0:h.focus()}})})]})});Ss.displayName="TimePicker";const er=x.forwardRef(({locale:s=ar,value:r,onChange:n,hourCycle:t=24,yearRange:a=50,disabled:i=!1,displayFormat:l,granularity:o="second",placeholder:c="Pick a date",...u},d)=>{const[h,v]=x.useState(r??new Date),j=x.useRef(null),b=A=>{if(!A)return;if(!r){n==null||n(A),v(A);return}const P=(A.getTime()-r.getTime())/(1e3*60*60*24),g=ji(r,{days:Math.ceil(P)});n==null||n(g),v(g)};x.useImperativeHandle(d,()=>({...j.current,value:r}),[r]);const N={hour24:(l==null?void 0:l.hour24)??"PPP HH:mm:ss",hour12:(l==null?void 0:l.hour12)??"PP hh:mm:ss b"};return e.jsxs(Js,{children:[e.jsx(Ys,{asChild:!0,disabled:i,children:e.jsxs(D,{variant:"outline",className:q("w-[200px] justify-start text-left font-normal",!r&&"text-muted-foreground"),ref:j,children:[e.jsx(Xt,{className:"mr-2 h-4 w-4"}),r?ie(r,t===24?N.hour24:N.hour12,{locale:s}):e.jsx("span",{children:c})]})}),e.jsxs(Es,{className:"w-auto p-0",children:[e.jsx(Ea,{mode:"single",selected:r,month:h,onSelect:A=>b(A),onMonthChange:b,initialFocus:!0,yearRange:a,locale:s,...u}),o!=="day"&&e.jsx("div",{className:"border-t border-border p-3",children:e.jsx(Ss,{onChange:n,date:r,hourCycle:t,granularity:o})})]})]})});er.displayName="DateTimePicker";function oc({fileId:s,data:r}){const n=[{title:"Lugar de la atención del parto:",key:"lugarAtencionParto"},{title:"Fecha y hora del nacimiento:",key:"horaNacimiento"},{title:"Duración del parto:",key:"duracionParto"},{title:"Edad gestacional:",key:"edadGestacional"},{title:"Atención del parto:",key:"atencionParto"},{title:"Vía:",key:"viaParto"},{title:"Presentación:",key:"presentacion"},{title:"Eventualidades durante el parto:",key:"eventualidades"}];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between my-2",children:[e.jsx("p",{children:"Antecedentes del parto"}),r!==void 0?null:e.jsx(cc,{fileId:s})]}),e.jsx("div",{className:"gap-2 grid grid-cols-2 ",children:r&&n.map(({title:t,key:a})=>{const i=r[a];if(typeof i=="string"&&a!="horaNacimiento")return e.jsxs(he,{className:"p-2",children:[e.jsx(je,{className:"p-0",children:e.jsx(ve,{children:t})}),e.jsx(pe,{className:"p-0",children:i.split(`
`).map((l,o)=>e.jsx("p",{className:"mb-2 last:mb-0 whitespace-pre-wrap text-sm",children:l},o))})]},a);if(typeof i=="string"&&a==="horaNacimiento")return e.jsxs(he,{className:"p-2",children:[e.jsx(je,{className:"p-0",children:e.jsx(ve,{children:t})}),e.jsx(pe,{className:"p-0",children:i.split(`
`).map((l,o)=>e.jsx("p",{className:"mb-2 last:mb-0 whitespace-pre-wrap text-sm",children:ie(new Date(l),"dd/MM/yyyy HH:mm a")},o))})]},a)})})]})}function cc({fileId:s}){const[r,n]=x.useState(!1),t=H(),a=O({resolver:V(zo),defaultValues:{}}),i=R({mutationFn:async o=>{const u=await(await fetch(`/api/file/pediatric/${s}/apnp/parto`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).json();u.success||k.error(u.error),t.invalidateQueries({queryKey:["apnp"]}),k.success("Guardado correctamente"),n(!1)}});function l(o){i.mutate(o)}return e.jsxs(B,{open:r,onOpenChange:n,children:[e.jsx(U,{asChild:!0,children:e.jsx(D,{size:"icon",children:e.jsx(Se,{})})}),e.jsxs(_,{className:"sm:max-w-[750px]",children:[e.jsxs(X,{children:[e.jsx(Q,{children:"Antecentes del parto"}),e.jsx(we,{children:"Completa los datos relacionados con el parto"})]}),e.jsx(G,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(l),children:[e.jsxs("div",{className:"gap-4 grid sm:grid-cols-3",children:[e.jsx(w,{control:a.control,name:"lugarAtencionParto",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{children:"Lugar de Atención del Parto"}),e.jsx(y,{children:e.jsx(I,{...o})}),e.jsx(C,{})]})}),e.jsx(w,{control:a.control,name:"duracionParto",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{children:"Duración del Parto"}),e.jsx(y,{children:e.jsx(I,{placeholder:"",...o})}),e.jsx(C,{})]})}),e.jsx(w,{control:a.control,name:"horaNacimiento",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{children:"Hora de Nacimiento"}),e.jsx(y,{children:e.jsx(Ss,{hourCycle:12,granularity:"minute",date:o.value,onChange:o.onChange})}),e.jsx(C,{})]})}),e.jsx(w,{control:a.control,name:"edadGestacional",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{children:"Edad Gestacional (semanas)"}),e.jsx(y,{children:e.jsx(I,{type:"number",...o,onChange:c=>o.onChange(parseInt(c.target.value))})}),e.jsx(C,{})]})}),e.jsx(w,{control:a.control,name:"atencionParto",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{children:"Atención del Parto"}),e.jsx(Fe,{onValueChange:o.onChange,className:"grid grid-cols-2 gap-2",children:["médico","enfermero","partera","otros"].map(c=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{value:c,id:c}),e.jsx(Z,{htmlFor:c,children:c})]}))}),e.jsx(C,{})]})}),e.jsx(w,{control:a.control,name:"viaParto",render:({field:o})=>e.jsxs(f,{className:"space-y-3",children:[e.jsx(p,{children:"Vía del Parto"}),e.jsx(y,{children:e.jsxs(Fe,{onValueChange:o.onChange,className:"flex",children:[e.jsxs(f,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(y,{children:e.jsx(oe,{value:"Vaginal"})}),e.jsx(p,{className:"font-normal",children:"Vaginal"})]}),e.jsxs(f,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(y,{children:e.jsx(oe,{value:"Cesárea"})}),e.jsx(p,{className:"font-normal",children:"Cesárea"})]})]})}),e.jsx(C,{})]})}),e.jsx(w,{control:a.control,name:"presentacion",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{children:"Presentación"}),e.jsx(ae,{onChange:o.onChange,value:o.value??""}),e.jsx(C,{})]})}),e.jsx(w,{control:a.control,name:"eventualidades",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{children:"Eventualidades"}),e.jsx(y,{children:e.jsx(ae,{onChange:o.onChange,value:o.value??""})}),e.jsx(C,{})]})})]}),e.jsx(ne,{children:e.jsx(T,{loading:i.isPending,type:"submit",children:"Guardar"})})]})})]})]})}function dc({fileId:s,data:r}){const n=[{title:"APGAR: 1º:",key:"apgar1"},{title:"APGAR: 5º:",key:"apgar5"},{title:"Peso (gr):",key:"peso"},{title:"Talla (cm):",key:"talla"},{title:"Datos de Asfixia",key:"asfixia"},{title:"Especificacion de Asfixia",key:"asfixiaEspecifique"},{title:"Alojamiento conjunto:",key:"alojamientoConjunto"},{title:"Tiempo junto a su madre: ",key:"tiempoJuntoMadre"},{title:"Hospitalización (Lugar/Tiempo):",key:"hospitalizacion"}];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{children:"Antecedentes postnatales:"}),e.jsx(uc,{fileId:s,data:r})]}),e.jsx("div",{className:"gap-2 grid grid-cols-2",children:r&&n.map(({title:t,key:a})=>{const i=r[a];if(typeof i=="string")return e.jsxs(he,{className:"p-2",children:[e.jsx(je,{className:"p-0",children:e.jsx(ve,{children:t})}),e.jsx(pe,{className:"p-0",children:i.split(`
`).map((l,o)=>e.jsx("p",{className:"mb-2 last:mb-0 whitespace-pre-wrap text-sm",children:l},o))})]},a)})})]})}function uc({fileId:s,data:r}){const[n,t]=x.useState(!1),a=H(),i=O({resolver:V(Lo),defaultValues:r===void 0?{}:r});function l(c){o.mutate(c)}const o=R({mutationFn:async c=>{(await(await fetch(`/api/file/pediatric/${s}/apnp/postnatales`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).json()).success||k.error("Error al guardar"),a.invalidateQueries({queryKey:["apnp"]}),k.success("Guardado correctamente"),t(!1)}});return x.useEffect(()=>{i.watch("alojamientoConjunto")||i.setValue("tiempoJuntoMadre",void 0)},[i.watch("alojamientoConjunto")]),x.useEffect(()=>{i.watch("asfixia")||i.setValue("asfixiaEspecifique",void 0)},[i.watch("asfixia")]),e.jsxs(B,{open:n,onOpenChange:t,children:[e.jsx(U,{asChild:!0,children:e.jsx(D,{size:"icon",children:e.jsx(Se,{})})}),e.jsxs(_,{className:"",children:[e.jsx(X,{children:e.jsx(Q,{children:"Antecendentes Postnatales"})}),e.jsx(G,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(l),className:"space-y-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(w,{control:i.control,name:"apgar1",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"APGAR: 1°"}),e.jsx(y,{children:e.jsx(I,{...c})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"apgar5",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"5°"}),e.jsx(y,{children:e.jsx(I,{...c})}),e.jsx(C,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(w,{control:i.control,name:"peso",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Peso (gr):"}),e.jsx(y,{children:e.jsx(I,{...c,type:"number"})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"talla",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Talla (cm):"}),e.jsx(y,{children:e.jsx(I,{...c,type:"number"})}),e.jsx(C,{})]})})]}),e.jsx(w,{control:i.control,name:"asfixia",render:({field:c})=>e.jsxs(f,{className:"space-y-3",children:[e.jsx(p,{children:"Datos de Asfixia"}),e.jsx(y,{children:e.jsxs(Fe,{onValueChange:u=>c.onChange(u==="true"),defaultValue:c.value?"true":"false",className:"flex space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{value:"true",id:"asfixia-si"}),e.jsx(p,{htmlFor:"asfixia-si",className:"text-sm font-normal",children:"Sí"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{value:"false",id:"asfixia-no"}),e.jsx(p,{htmlFor:"asfixia-no",className:"text-sm font-normal",children:"No"})]})]})})]})}),i.watch("asfixia")&&e.jsx(w,{control:i.control,name:"asfixiaEspecifique",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Especifique:"}),e.jsx(y,{children:e.jsx(I,{value:c.value??"",onChange:c.onChange})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"alojamientoConjunto",render:({field:c})=>e.jsxs(f,{className:"space-y-3",children:[e.jsx(p,{children:"Alojamiento conjunto"}),e.jsx(y,{children:e.jsxs(Fe,{onValueChange:u=>c.onChange(u==="true"),defaultValue:c.value?"true":"false",className:"flex space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{value:"true",id:"alojamiento-si"}),e.jsx(p,{htmlFor:"alojamiento-si",className:"text-sm font-normal",children:"Sí"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{value:"false",id:"alojamiento-no"}),e.jsx(p,{htmlFor:"alojamiento-no",className:"text-sm font-normal",children:"No"})]})]})})]})}),i.watch("alojamientoConjunto")&&e.jsx(w,{control:i.control,name:"tiempoJuntoMadre",render:({field:c})=>e.jsxs(f,{className:"space-y-3",children:[e.jsx(p,{children:"Tiempo junto a su madre:"}),e.jsx(y,{children:e.jsxs(Fe,{onValueChange:c.onChange,defaultValue:c.value,className:"flex flex-col space-y-1",children:[e.jsxs(f,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(y,{children:e.jsx(oe,{value:"Permanente"})}),e.jsx(p,{className:"font-normal",children:"Permanente"})]}),e.jsxs(f,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(y,{children:e.jsx(oe,{value:"Transitorio"})}),e.jsx(p,{className:"font-normal",children:"Transitorio"})]})]})}),e.jsx(C,{})]})}),i.watch("alojamientoConjunto")&&i.watch("tiempoJuntoMadre")==="Transitorio"&&e.jsx(w,{control:i.control,name:"horasJuntoMadre",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Horas:"}),e.jsx(y,{children:e.jsx(I,{...c,type:"number"})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"hospitalizacion",render:({field:c})=>e.jsxs(f,{children:[e.jsx(p,{children:"Hospitalización (Lugar/Tiempo):"}),e.jsx(y,{children:e.jsx(ae,{...c})}),e.jsx(C,{})]})}),e.jsx(ne,{children:e.jsx(T,{type:"submit",children:"Guardar"})})]})})]})]})}function mc({fileId:s,data:r}){const n=[{title:"Lactancia Materna Exclusiva:",key:"exclusiveBreastfeeding"},{title:"Lactancia Mixta:",key:"mixedFeeding"},{title:"Duración de lactancia exclusiva:",key:"exclusiveBreastfeedingDuration"},{title:"Duración de lactancia mixta:",key:"mixedFeedingDuration"},{title:"Ablactación",key:"weaning"}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("p",{children:"Alimentación:"}),e.jsx(xc,{fileId:s,data:r})]}),e.jsx("div",{className:"gap-2 grid grid-cols-2",children:r&&n.map(({title:t,key:a})=>{const i=r[a];return i!==void 0?e.jsxs(he,{className:"p-2",children:[e.jsx(je,{className:"p-0",children:e.jsx(ve,{className:"text-sm font-medium",children:t})}),e.jsx(pe,{className:"p-0 pt-1",children:typeof i=="boolean"?e.jsx("p",{className:"text-sm",children:i?"Sí":"No"}):i.split(`
`).map((l,o)=>e.jsx("p",{className:"mb-2 last:mb-0 whitespace-pre-wrap text-sm",children:l},o))})]},a):null})})]})}function xc({fileId:s,data:r}){const[n,t]=x.useState(!1),a=H(),i=O({resolver:V(Vo),defaultValues:r===void 0?{}:r});x.useEffect(()=>{i.watch("exclusiveBreastfeeding")?i.setValue("mixedFeedingDuration",void 0):i.setValue("exclusiveBreastfeedingDuration",void 0)},[i.watch("exclusiveBreastfeeding"),i.watch("mixedFeeding")]);const l=R({mutationFn:async d=>{const v=await(await fetch(`/api/file/pediatric/${s}/apnp/feeding`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})).json();if(!v.success)throw new Error("Error al guardar");return v},onSuccess:()=>{a.invalidateQueries({queryKey:["apnp"]}),k.success("Guardado correctamente"),t(!1)},onError:()=>{k.error("Error al guardar")}});function o(d){l.mutate(d)}const c=i.watch("exclusiveBreastfeeding"),u=i.watch("mixedFeeding");return e.jsxs(B,{open:n,onOpenChange:t,children:[e.jsx(U,{asChild:!0,children:e.jsx(D,{size:"icon",children:e.jsx(Se,{className:"h-4 w-4"})})}),e.jsxs(_,{className:"sm:max-w-[425px]",children:[e.jsx(X,{children:e.jsx(Q,{children:"Alimentación"})}),e.jsx(G,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(o),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(w,{control:i.control,name:"exclusiveBreastfeeding",render:({field:d})=>e.jsxs(f,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(y,{children:e.jsx(es,{checked:d.value,onCheckedChange:h=>{d.onChange(h),h&&(i.setValue("mixedFeeding",!1),i.setValue("mixedFeedingDuration",""))}})}),e.jsx("div",{className:"space-y-1 leading-none",children:e.jsx(p,{children:"Lactancia Materna Exclusiva"})})]})}),c&&e.jsx(w,{control:i.control,name:"exclusiveBreastfeedingDuration",render:({field:d})=>e.jsxs(f,{children:[e.jsx(p,{children:"Duración de lactancia exclusiva"}),e.jsx(y,{children:e.jsx(I,{...d})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"mixedFeeding",render:({field:d})=>e.jsxs(f,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(y,{children:e.jsx(es,{checked:d.value,onCheckedChange:h=>{d.onChange(h),h&&(i.setValue("exclusiveBreastfeeding",!1),i.setValue("exclusiveBreastfeedingDuration",""))}})}),e.jsx("div",{className:"space-y-1 leading-none",children:e.jsx(p,{children:"Lactancia Mixta"})})]})}),u&&e.jsx(w,{control:i.control,name:"mixedFeedingDuration",render:({field:d})=>e.jsxs(f,{children:[e.jsx(p,{children:"Duración de lactancia mixta"}),e.jsx(y,{children:e.jsx(I,{...d})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"weaning",render:({field:d})=>e.jsxs(f,{children:[e.jsx(p,{children:"Ablactación"}),e.jsx(y,{children:e.jsx(I,{...d})}),e.jsx(C,{})]})})]}),e.jsx(T,{loading:l.isPending,type:"submit",children:"Guardar"})]})})]})]})}function hc({fileId:s}){const{data:r}=$({queryKey:["apnp"],queryFn:async()=>{const t=await(await F.file.apnp.$get({query:{fileId:s}})).json();return t.data===null?null:t.data}});return e.jsxs(Xn,{defaultValue:"pre",className:"w-full bg-background",children:[e.jsxs(Nr,{className:"sm:mb-0 mb-10 sm:bg-muted bg-transparent flex flex-wrap justify-start gap-2 sm:grid sm:grid-cols-5",children:[e.jsx(He,{className:"flex-grow sm:flex-grow-0",value:"pre",children:"Prenatales"}),e.jsx(He,{className:"flex-grow sm:flex-grow-0",value:"par",children:"Parto"}),e.jsx(He,{className:"flex-grow sm:flex-grow-0",value:"post",children:"Posnatales"}),e.jsx(He,{className:"flex-grow sm:flex-grow-0",value:"ali",children:"Alimentación"}),e.jsx(He,{className:"flex-grow sm:flex-grow-0",value:"psi",children:"Psicomotor"})]}),e.jsx(_e,{value:"pre",children:e.jsx(Bo,{fileId:s,data:r==null?void 0:r.prenatales})}),e.jsx(_e,{value:"par",children:e.jsx(oc,{fileId:s,data:r==null?void 0:r.parto})}),e.jsx(_e,{value:"post",children:e.jsx(dc,{fileId:s,data:r==null?void 0:r.postnatales})}),e.jsx(_e,{value:"ali",children:e.jsx(mc,{fileId:s,data:r==null?void 0:r.feeding})}),e.jsx(_e,{value:"psi",children:e.jsx(Ko,{fileId:s,data:r==null?void 0:r.psico})})]})}function jc({relativeId:s}){H();const[r,n]=x.useState(!1),t=m.object({phone:m.string({required_error:"Este campo es requerido"}).min(8,"Complete este campo")}),a=O({resolver:V(t)}),i=R({mutationFn:async o=>{},onError:()=>{k.error('"Error al actualizar el nombre"')}}),l=o=>{i.mutate(o)};return e.jsxs(B,{open:r,onOpenChange:n,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsx(D,{variant:"secondary",size:"icon",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-phone",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2"})]})})})}),e.jsx(K,{children:"Actualizar el "})]})}),e.jsxs(_,{children:[e.jsx(X,{children:e.jsx(Q,{children:"Actuaizar el telefono?"})}),e.jsx(G,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(l),children:[e.jsx(w,{control:a.control,name:"phone",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{}),e.jsx(xe,{children:"Debes de agregar el codigo del pais"}),e.jsx(y,{children:e.jsx(I,{...o,disabled:i.isPending,type:"text"})}),e.jsx(C,{})]})}),e.jsx(ne,{className:"mt-2",children:e.jsx(T,{loading:i.isPending,type:"submit",children:"Guardar"})})]})})]})]})}function Tr({id:s}){const{data:r,isPending:n}=$({queryFn:async()=>(await(await F.file.relative.$get({query:{id:s}})).json()).data,queryKey:["relativeList",s]});return n?e.jsx("div",{children:"Loading..."}):e.jsxs(ze,{children:[e.jsx(Le,{children:e.jsxs(te,{children:[e.jsx(re,{children:"Nombre"}),e.jsx(re,{children:"Parentesco"}),e.jsx(re,{children:"Estado Civil"}),e.jsx(re,{children:"Cédula"}),e.jsx(re,{children:"Teléfono"})]})}),e.jsx(Ve,{children:r&&r.map(t=>e.jsxs(te,{children:[e.jsx(L,{children:t.name}),e.jsx(L,{children:e.jsx(ws,{children:t.relation})}),e.jsx(L,{children:e.jsx(ws,{children:t.civilStatus})}),e.jsx(L,{children:t.dni}),t.phone&&e.jsx(L,{children:fs(t.phone)}),e.jsx(L,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(jc,{relativeId:t.id}),e.jsx(Gs,{id:s})]})})]}))})]})}function pc(){const s=H(),[r,n]=x.useState(!1),t=O({resolver:V(sa)}),a=R({mutationFn:async l=>{const c=await(await F.doctors.diases[":diase"].$patch({param:{diase:"infecto"},json:{name:l.name}})).json();c.success||k.error(c.error),k.success("Se agrego correctamente"),s.invalidateQueries({queryKey:["allDiases"]}),n(!1)}}),i=l=>{a.mutate(l)};return e.jsxs(B,{open:r,onOpenChange:n,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsx(D,{variant:"outline",children:"Nueva"})})}),e.jsx(K,{children:"Agregar una enfermedad Infecto contagiosa"})]})}),e.jsxs(_,{children:[e.jsx(X,{children:e.jsx(Q,{children:"Agregar una enfermedad infecto contagiosa"})}),e.jsx(G,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(i),children:[e.jsx(w,{control:t.control,name:"name",render:({field:l})=>e.jsxs(f,{children:[e.jsx(p,{children:"Enfermedad"}),e.jsx(y,{children:e.jsx(I,{...l,disabled:a.isPending,type:"text"})}),e.jsx(C,{})]})}),e.jsx(ne,{className:"mt-2",children:e.jsx(T,{loading:a.isPending,type:"submit",children:"Guardar"})})]})})]})]})}const fc=pr({infecto:Dn(fr()).min(1,"Debes seleccionar al menos una enfermedad").max(10,"No puedes seleccionar mas de 10 enfermedades")});function gc({fileId:s,allInfecto:r}){const n=H(),[t,a]=x.useState(!1),i=O({resolver:V(fc),defaultValues:{infecto:[]}}),l=async u=>{if((await(await F.file.infecto[":fileId"].$patch({param:{fileId:s},json:u})).json()).success)n.invalidateQueries({queryKey:["diases"]});else throw new Error},o=R({mutationFn:async u=>k.promise(l(u),{success:()=>"Guardado con éxito",error:"Error al guardar el registro"})}),c=u=>{a(!1),k.custom(d=>e.jsxs("div",{className:"p-4 bg-destructive text-destructive-foreground border rounded-sm",children:[e.jsx("div",{className:"w-full",children:"¿Está seguro de que deseas agregar estas enfermedades?"}),e.jsx("div",{className:"my-2 font-semibold text-lg",children:e.jsx("p",{children:u.infecto.join(", ")})}),e.jsxs("div",{className:"flex gap-2 justify-end mt-2",children:[e.jsx(D,{variant:"secondary",onClick:()=>k.dismiss(d),children:"No"}),e.jsx(D,{onClick:()=>{k.dismiss(d),o.mutate(u)},children:"Si"})]})]}),{duration:1/0})};return e.jsxs(B,{open:t,onOpenChange:a,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsx(D,{size:"icon",className:"ml-2",children:e.jsx(Se,{className:"h-4 w-4"})})})}),e.jsx(K,{children:"Define Enfermedades Infecto - Contagiosas"})]})}),e.jsxs(_,{className:"max-w-[425px]",children:[e.jsx(X,{children:e.jsx(Q,{children:"Enfermedades Infecto - Contagiosas:"})}),e.jsx(G,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(c),className:"space-y-4",children:[e.jsx(w,{control:i.control,name:"infecto",render:({field:u})=>e.jsxs(f,{children:[e.jsx(y,{children:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:r.map((d,h)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(es,{id:`infecto-${h}`,checked:u.value.includes(d),onCheckedChange:v=>{const j=v?[...u.value,d]:u.value.filter(b=>b!==d);u.onChange(j)}}),e.jsx(Z,{htmlFor:`infecto-${h}`,children:d})]},h))})}),e.jsx(C,{})]})}),e.jsxs(ne,{children:[e.jsx(pc,{}),e.jsx(D,{type:"submit",disabled:o.isPending,children:o.isPending?"Guardando...":"Guardar"})]})]})})]})]})}function vc(){const s=H(),[r,n]=x.useState(!1),t=O({resolver:V(sa)}),a=R({mutationFn:async l=>{const c=await(await F.doctors.diases[":diase"].$patch({param:{diase:"hereditary"},json:{name:l.name}})).json();c.success||k.error(c.error),k.success("Se agrego correctamente"),s.invalidateQueries({queryKey:["allDiases"]}),n(!1)}}),i=l=>{a.mutate(l)};return e.jsxs(B,{open:r,onOpenChange:n,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsx(D,{variant:"outline",children:"Nueva"})})}),e.jsx(K,{children:"Agregar una enfermedad hereditaria"})]})}),e.jsxs(_,{children:[e.jsx(X,{children:e.jsx(Q,{children:"Agregar una enfermedad hereditaria"})}),e.jsx(G,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(i),children:[e.jsx(w,{control:t.control,name:"name",render:({field:l})=>e.jsxs(f,{children:[e.jsx(p,{children:"Enfermedad"}),e.jsx(y,{children:e.jsx(I,{...l,disabled:a.isPending,type:"text"})}),e.jsx(C,{})]})}),e.jsx(ne,{className:"mt-2",children:e.jsx(T,{loading:a.isPending,type:"submit",children:"Guardar"})})]})})]})]})}const yc=pr({hereditary:Dn(fr()).min(1,"Debes seleccionar al menos una enfermedad").max(10,"No puedes seleccionar mas de 10 enfermedades")});function bc({fileId:s,allHereditary:r}){const n=H(),[t,a]=x.useState(!1),i=O({resolver:V(yc),defaultValues:{hereditary:[]}}),l=async u=>{if((await(await F.file.hereditary[":fileId"].$patch({param:{fileId:s},json:u})).json()).success)n.invalidateQueries({queryKey:["diases"]});else throw new Error},o=R({mutationFn:async u=>k.promise(l(u),{loading:"Guardando...",success:()=>"Guardado con éxito",error:"Error al guardar el registro"})}),c=u=>{a(!1),k.custom(d=>e.jsxs("div",{className:"p-4 bg-destructive text-destructive-foreground border rounded-sm",children:[e.jsx("div",{className:"w-full",children:"¿Está seguro de que deseas agregar estas enfermedades?"}),e.jsx("div",{className:"my-2 font-semibold text-lg",children:e.jsx("p",{children:u.hereditary.join(", ")})}),e.jsxs("div",{className:"flex gap-2 justify-end mt-2",children:[e.jsx(D,{variant:"secondary",onClick:()=>k.dismiss(d),children:"No"}),e.jsx(D,{onClick:()=>{k.dismiss(d),o.mutate(u)},children:"Si"})]})]}),{duration:1/0})};return e.jsxs(B,{open:t,onOpenChange:a,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsx(D,{size:"icon",className:"ml-2",children:e.jsx(Se,{className:"h-4 w-4"})})})}),e.jsx(K,{children:"Define Enfermedades Hereditarias"})]})}),e.jsxs(_,{className:"sm:max-w-[425px]",children:[e.jsx(X,{children:e.jsx(Q,{children:"Enfermedades Hereditarias:"})}),e.jsx(G,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(c),className:"space-y-4",children:[e.jsx(w,{control:i.control,name:"hereditary",render:({field:u})=>e.jsxs(f,{children:[e.jsx(y,{children:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:r.map((d,h)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(es,{id:`hereditary-${h}`,checked:u.value.includes(d),onCheckedChange:v=>{const j=v?[...u.value,d]:u.value.filter(b=>b!==d);u.onChange(j)}}),e.jsx(Z,{htmlFor:`hereditary-${h}`,children:d})]},h))})}),e.jsx(C,{})]})}),e.jsxs(ne,{children:[e.jsx(vc,{}),e.jsx(D,{type:"submit",disabled:o.isPending,children:o.isPending?"Guardando...":"Guardar"})]})]})})]})]})}function Aa({fileId:s}){var i,l;const{data:r,isPending:n,error:t}=$({queryKey:["diases",s],queryFn:async()=>{const c=await(await F.file.diases.$get({query:{fileId:s}})).json();if(!c.success)throw new Error("Error inesperado");return c.data}}),{data:a}=$({queryKey:["allDiases"],queryFn:async()=>{const c=await(await F.doctors.diases.$get()).json();return c.success?c.data:(console.log("error al cargar las enfermedades"),{hereditary:[],infecto:[]})}});return t?e.jsx("div",{children:t.message}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs(he,{children:[e.jsx(je,{className:"space-y-0 my-2 py-0",children:e.jsx(ve,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Enfermedades Hereditarias:"}),e.jsx(bc,{fileId:s,allHereditary:(a==null?void 0:a.hereditary)||[]})]})})}),e.jsx(pe,{children:n?e.jsx(Ae,{}):e.jsx("div",{className:"gap-1  flex flex-wrap",children:(i=r==null?void 0:r.hereditary)==null?void 0:i.map((o,c)=>e.jsx("div",{className:"bg-accent p-1 font-semibold rounded-sm",children:o},c))})})]}),e.jsxs(he,{children:[e.jsx(je,{className:"space-y-0 my-2 py-0",children:e.jsx(ve,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Enfermedades Infecto – contagiosas:"}),e.jsx(gc,{fileId:s,allInfecto:(a==null?void 0:a.infecto)||[]})]})})}),e.jsx(pe,{children:n?e.jsx(Ae,{}):e.jsx("div",{className:"gap-1  flex flex-wrap",children:(l=r==null?void 0:r.infecto)==null?void 0:l.map((o,c)=>e.jsx("div",{className:"bg-accent p-1 font-semibold rounded-sm",children:o},c))})})]})]})}const Ye=ri,Ze=ni,Xe=ai;function Ia({fileId:s}){const{data:r,isPending:n}=$({queryKey:["app"],queryFn:async()=>{const i=await(await F.file.app.$get({query:{fileId:s}})).json();return i.success?i.data:null}}),t=[{title:"Infecciones",key:"infections"},{title:"Enfermedades Crónicas",key:"chronicDiseases"},{title:"Cirugías",key:"surgeries"},{title:"Hospitalizaciones",key:"hospitalizations"},{title:"Otros",key:"others"}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-2",children:!n&&e.jsx(Nc,{fileId:s,data:r??null})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r&&t.map(({title:a,key:i})=>{const l=r[i];return l?e.jsxs(he,{className:"shadow-sm rounded-lg overflow-hidden border",children:[e.jsx(je,{children:e.jsx(ve,{children:a})}),e.jsx(pe,{children:l.split(`
`).map((o,c)=>e.jsxs(Ts.Fragment,{children:[o,e.jsx("br",{})]},c))})]},i):null})})]})}function Nc({fileId:s,data:r}){const[n,t]=x.useState(!1),a=H(),i=O({resolver:V(_o),defaultValues:{infections:(r==null?void 0:r.infections)??void 0,chronicDiseases:(r==null?void 0:r.chronicDiseases)??void 0,surgeries:(r==null?void 0:r.surgeries)??void 0,hospitalizations:(r==null?void 0:r.hospitalizations)??void 0,others:(r==null?void 0:r.others)??void 0}}),l=R({mutationFn:async c=>{(await(await F.file.app[":fileId"].$patch({param:{fileId:s},json:c})).json()).success||k.error("Ocurrió un error"),a.invalidateQueries({queryKey:["app"]}),k.success("Se actualizó correctamente"),t(!1)}});function o(c){l.mutate(c)}return e.jsxs(B,{open:n,onOpenChange:t,children:[e.jsx(U,{asChild:!0,children:e.jsx(D,{children:"Agregar nuevo"})}),e.jsxs(_,{className:"sm:max-w-[1000px]",children:[e.jsxs(X,{children:[e.jsx(Q,{children:"Antecedentes Personales Patológicos"}),e.jsx(we,{children:"Por favor, complete la siguiente información."})]}),e.jsx(G,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(o),children:[e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["infections","chronicDiseases","surgeries","hospitalizations","others"].map(c=>e.jsx(w,{control:i.control,name:c,render:({field:u})=>e.jsxs(f,{children:[e.jsx(p,{children:wc(c)}),e.jsx(y,{children:e.jsx(ae,{...u})}),e.jsx(C,{})]})},c))}),e.jsx(ne,{children:e.jsx(D,{type:"submit",children:"Guardar"})})]})})]})]})}function wc(s){return{infections:"Infecciones",chronicDiseases:"Enfermedades crónicas",surgeries:"Cirugías",hospitalizations:"Hospitalizaciones",others:"Otros"}[s]||s}async function Cc(s){try{const r=await fetch(s);if(!r.ok)throw new Error(`Error al cargar la imagen: ${r.statusText}`);const n=await r.blob();if(!n.type.startsWith("image/"))throw new Error("Formato de imagen no compatible");return new Promise((t,a)=>{const i=new FileReader;i.onloadend=()=>{const l=i.result;console.log("Base64 Image String:",l),t(l)},i.onerror=()=>{a(new Error("Error al leer el archivo de imagen"))},i.readAsDataURL(n)})}catch(r){return console.error(r,"Error al convertir la imagen"),Promise.resolve("")}}function Sc(){return e.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-gray-900 p-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(de,{className:"h-8 w-32 rounded"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(de,{className:"h-4 w-full"}),e.jsx(de,{className:"h-4 w-full"}),e.jsx(de,{className:"h-4 w-[80%]"})]})]}),e.jsx("div",{className:"flex-1 mt-8",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(de,{className:"h-48 rounded"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(de,{className:"h-4 w-full"}),e.jsx(de,{className:"h-4 w-full"}),e.jsx(de,{className:"h-4 w-[90%]"})]})]})}),e.jsxs("div",{className:"mt-8 space-y-4",children:[e.jsx(de,{className:"h-4 w-full"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(de,{className:"h-8 rounded"}),e.jsx(de,{className:"h-8 rounded"}),e.jsx(de,{className:"h-8 rounded"}),e.jsx(de,{className:"h-8 rounded"})]})]})]})}const Pc=[{title:"Gesta:",key:"gesta"},{title:"Para:",key:"para"},{title:"Abortos (No. e intervalos):",key:"aborto"},{title:"Cesárea:",key:"cesarea"},{title:"FUM:",key:"fum"},{title:"Abortos:",key:"abortosInfo"},{title:"Cesáreas (motivos):",key:"cesareaMotivos"},{title:"Lugar de la/s cesárea/s: ",key:"cesareaLugar"},{title:"Lugar y No. de CPN:",key:"cpnInfo"},{title:"Enf. Previas y/o crónicas de la madre:",key:"enfermedadesPrevias"},{title:"Enf. De la madre durante el embarazo:",key:"enfermedadesEmbarazo"},{title:"Medicación durante el embarazo:",key:"medicacionEmbarazo"},{title:"Hospitalizaciones y complicaciones durante el embarazo:",key:"hospitalizaciones"}],kc=[{title:"Lugar de la atención del parto:",key:"lugarAtencionParto"},{title:"Fecha y hora del nacimiento:",key:"horaNacimiento"},{title:"Duración del parto:",key:"duracionParto"},{title:"Edad gestacional:",key:"edadGestacional"},{title:"Atención del parto:",key:"atencionParto"},{title:"Vía:",key:"viaParto"},{title:"Presentación:",key:"presentacion"},{title:"Eventualidades durante el parto:",key:"eventualidades"}],Ec=[{title:"APGAR: 1º:",key:"apgar1"},{title:"APGAR: 5º:",key:"apgar5"},{title:"Peso (gr):",key:"peso"},{title:"Talla (cm):",key:"talla"},{title:"Datos de Asfixia",key:"asfixia"},{title:"Especificacion de Asfixia",key:"asfixiaEspecifique"},{title:"Alojamiento conjunto:",key:"alojamientoConjunto"},{title:"Tiempo junto a su madre: ",key:"tiempoJuntoMadre"},{title:"Hospitalización (Lugar/Tiempo):",key:"hospitalizacion"}],Dc=[{key:"fixedGaze",ageKey:"fixedGazeAge",title:"Fijó la mirada"},{key:"heldHeadUp",ageKey:"heldHeadUpAge",title:"Sostuvo la cabeza"},{key:"smiled",ageKey:"smiledAge",title:"Se sonrió"},{key:"satUp",ageKey:"satUpAge",title:"Se sentó"},{key:"crawled",ageKey:"crawledAge",title:"Gateó"},{key:"walked",ageKey:"walkedAge",title:"Caminó"},{key:"projected",ageKey:"projectedAge",title:"Se proyectó"}],Ac=[{title:"Lactancia Materna Exclusiva:",key:"exclusiveBreastfeeding"},{title:"Lactancia Mixta:",key:"mixedFeeding"},{title:"Duración de lactancia exclusiva:",key:"exclusiveBreastfeedingDuration"},{title:"Duración de lactancia mixta:",key:"mixedFeedingDuration"},{title:"Ablactación",key:"weaning"}],Ic=[{title:"Infecciones:",key:"infections"},{title:"Enfermedades crónicas:",key:"chronicDiseases"},{title:"Cirugías:",key:"surgeries"},{title:"Hospitalizaciones:",key:"hospitalizations"},{title:"Otros:",key:"others"}];async function qc(s,r){var i,l,o,c,u;const n=[[{text:"Nombre",fontSize:10,bold:!0},{text:"Cedula",fontSize:10,bold:!0},{text:"Telefono",fontSize:10,bold:!0},{text:"Relacion",fontSize:10,bold:!0},{text:"Estado Civil",fontSize:10,bold:!0}],...((i=r.relatives)==null?void 0:i.map(d=>[{text:d.name,fontSize:10},{text:d.dni??"",fontSize:10},{text:d.phone?fs(d.phone):"",fontSize:10},{text:d.relation,fontSize:10},{text:d.civilStatus,fontSize:10}]))??[]],t=[];if((l=r.file)!=null&&l.app){t.push({text:"Antecedentes Personales Patológicos",style:"subheader"});const d=Ic.map(h=>{var v;return[{text:h.title,bold:!0},{text:((v=r.file.app)==null?void 0:v[h.key])||"",alignment:"left"}]});t.push({table:{widths:["40%","60%"],body:d},layout:"noBorders"})}else t.push({text:"No hay información de antecedentes personales patológicos",italics:!0});if((o=r.file)!=null&&o.apnp){t.push({text:"Antecedentes Prenatales",style:"subheader"});const d=r.file.apnp.prenatales;if(d){const A=Pc.filter(S=>d[S.key]!==void 0&&d[S.key]!=="").map(S=>[{text:S.title,bold:!0},{text:d[S.key],alignment:"left"}]);t.push({table:{body:A,widths:["40%","60%"]},layout:"noBorders"})}else t.push({text:"No hay información de antecedentes prenatales",italics:!0});t.push({text:"Antecedentes del Parto",style:"subheader"});const h=r.file.apnp.parto;if(h){const A=kc.map(S=>[{text:S.title,bold:!0},{text:h[S.key]||"",alignment:"left"}]);t.push({table:{widths:["40%","60%"],body:A},layout:"noBorders"})}else t.push({text:"No hay información de antecedentes del parto",italics:!0});t.push({text:"Antecedentes Postnatales",style:"subheader"});const v=r.file.apnp.postnatales;if(v){const A=Ec.map(S=>[{text:S.title,bold:!0},{text:v[S.key]||"",alignment:"left"}]);t.push({table:{widths:["40%","60%"],body:A},layout:"noBorders"})}else t.push({text:"No hay información de antecedentes postnatales",italics:!0});t.push({text:"Alimentación",style:"subheader"});const j=r.file.apnp.feeding,b=[];j?(Ac.forEach(({title:A,key:S})=>{const P=j[S];P!==void 0&&(typeof P=="boolean"?b.push([{text:A,bold:!0},{text:P?"Sí":"No",alignment:"left"}]):typeof P=="string"&&b.push([{text:A,bold:!0},{text:P,alignment:"left"}]))}),t.push({table:{body:b,widths:["40%","60%"]},layout:"noBorders"})):t.push({text:"No hay información de alimentación",italics:!0}),t.push({text:"Desarrollo Psicomotor",style:"subheader"});const N=r.file.apnp.psico;if(N){const A=Dc.map(S=>[{text:S.title,bold:!0},{text:N[S.key]?"Sí":"No",alignment:"left"},{text:N[S.ageKey]||"No especificado",alignment:"left"}]);t.push({table:{widths:["50%","25%","25%"],body:[[{text:"Hito",bold:!0,alignment:"left"},{text:"Logrado",bold:!0,alignment:"left"},{text:"Edad",bold:!0,alignment:"left"}],...A]},layout:"noBorders"})}else t.push({text:"No hay información de desarrollo psicomotor",italics:!0})}const a={content:[{text:"Expediente Pediatríco",style:"cover"},{text:`${s.name}`,style:"coverName"},{text:`Expediente: ${s.fileId}`,style:"coverSubtitle"},{text:"",pageBreak:"after"},{text:`Expediente: ${s.fileId}`,marginBottom:10},{table:{widths:["*","auto"],body:[[{table:{widths:["*","*"],body:[[{text:"Nombre",fontSize:10},{text:"Sexo",fontSize:10}],[{text:`${s.name}`,bold:!0,fontSize:14},{text:`${s.sex}`,bold:!0,fontSize:14}]]},layout:"noBorders"},r.file.image?{image:await Cc(r.file.image),width:50,rowSpan:2,alignment:"right",margin:[0,0,0,20]}:{text:""}],[{table:{widths:["*","*"],body:[[{text:"Nacionalidad",fontSize:10},{text:"Origen",fontSize:10}],[{text:s.country,bold:!0,fontSize:14},{text:`${s.dapartment}, ${s.municipaly}`,bold:!0,fontSize:14}]]},layout:"noBorders"},""]]},layout:"noBorders"},{table:{widths:["50%","25%","25%"],body:[[{text:"Direccion",fontSize:10},{text:"Edad",fontSize:10},{text:"Fecha de nacimiento",fontSize:10}],[{text:s.address,bold:!0,fontSize:12},{text:`${s.age} años`,bold:!0,fontSize:12},{text:s.date,bold:!0,fontSize:12}]]},layout:"noBorders"},{text:"Familiares",fontSize:14,bold:!0,margin:[0,20,0,0]},{table:{widths:["*","*","*","*","*"],body:n},layout:"lightHorizontalLines",margin:[0,0,0,0]},{text:"Antecendentes Familiares Patológicos:",fontSize:14,bold:!0,margin:[0,20,0,0]},{table:{widths:["*","*"],body:[[{text:"Enfermedades Hereditarias:",fontSize:10,bold:!0,margin:[0,0,0,0]},{text:"Enfermedades Infecto – contagiosas:",fontSize:10,bold:!0,margin:[0,0,0,0]}],[{ul:((c=r.file.infecto)==null?void 0:c.map(d=>({text:d,fontSize:12})))??[],margin:[0,0,0,0]},{ul:((u=r.file.hereditary)==null?void 0:u.map(d=>({text:d,fontSize:12})))??[],margin:[0,0,0,0]}]]},layout:"noBorders"},{text:"Antecedentes Personales No Patológicos",style:"header",margin:[0,20,0,10]},...t],styles:{header:{fontSize:18,bold:!0,margin:[0,10,0,5]},subheader:{fontSize:14,color:"#4a5568",bold:!0,margin:[0,10,0,5]},cover:{fontSize:28,bold:!0,alignment:"center",margin:[0,100,0,30]},coverName:{fontSize:20,alignment:"center",margin:[0,0,0,10]},coverSubtitle:{fontSize:14,alignment:"center"}},defaultStyle:{fontSize:10},footer:function(d,h){return{columns:[{text:`Clínica de especialidades FAMED 
 Dr. ${r.name}`,color:"#2870BD",alignment:"left",fontSize:10,bold:!0,margin:[40,0,0,0]},{text:`Página ${d} de ${h}`,alignment:"right",color:"#2870BD",fontSize:10,bold:!0,margin:[0,0,40,0]}]}}};return new Promise(d=>{wi.createPdf(a).getBlob(h=>{const v=URL.createObjectURL(h);d(v)})})}function Fc({patient:s}){const[r,n]=x.useState(!1),{data:t,isPending:a}=$({queryKey:["pediatricPdf",s==null?void 0:s.id],queryFn:async()=>{if(!s)return Promise.resolve("");const l=await(await F.docs.file.$get({query:{patientId:s==null?void 0:s.id}})).json();return l.success?qc(s,l.data):Promise.resolve("")},enabled:r&&!!s});return e.jsxs(Os,{onOpenChange:n,open:r,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(br,{asChild:!0,children:e.jsx(D,{size:"icon",children:e.jsx(ti,{})})})}),e.jsx(K,{children:"Descargar"})]})}),e.jsx(Hs,{className:"h-full",children:e.jsxs("div",{className:"h-full mt-2",children:[a&&e.jsx(Sc,{}),t&&e.jsx("iframe",{src:t,width:"100%",height:"100%",style:{border:"none"},title:"PDF Viewer"})]})})]})}function qa({value:s}){return e.jsx("span",{className:"text-primary font-semibold",children:s})}function Mc({sex:s}){const r=s.toLowerCase()==="masculino",n=r?"bg-blue-100 dark:bg-blue-900":"bg-pink-100 dark:bg-pink-900",t=r?"text-blue-600 dark:text-blue-300":"text-pink-600 dark:text-pink-300";return e.jsxs("section",{className:"w-full",children:[e.jsx("p",{className:"text-sm text-foreground/50 font-semibold dark:text-muted-foreground-dark",children:"Sexo"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`p-1 rounded-full ${n}`,children:r?e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:`w-4 h-4 ${t}`,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M10 14m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"}),e.jsx("path",{d:"M19 5l-5.4 5.4"}),e.jsx("path",{d:"M19 5h-5"}),e.jsx("path",{d:"M19 5v5"})]}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:`w-4 h-4 ${t}`,children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M12 9m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"}),e.jsx("path",{d:"M12 14v7"}),e.jsx("path",{d:"M9 18h6"})]})}),e.jsx(qa,{value:s})]})]})}function Fa({patient:s,isLoading:r,error:n,isPediatric:t}){return r?e.jsx(Rc,{}):n||!s?e.jsx("div",{className:"w-full bg-destructive/10 dark:bg-destructive/20 p-4 rounded-lg",children:e.jsx("div",{className:"text-center text-destructive dark:text-destructive-foreground",children:n?n.message:"Error al cargar el expediente"})}):e.jsxs("div",{className:"w-full bg-zinc-50 border  dark:bg-zinc-900 text-card-foreground  dark:text-card-dark-foreground rounded-sm",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b dark:border-b-gray-700",children:[e.jsxs("h2",{className:"text-2xl font-semibold",children:["Expediente: ",s.fileId]}),t?e.jsx("div",{className:"flex",children:e.jsxs("section",{className:"grid gap-2",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-blue-500 dark:text-blue-400",children:[e.jsx("path",{d:"M9 12h.01"}),e.jsx("path",{d:"M15 12h.01"}),e.jsx("path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5"}),e.jsx("path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 5 6.3"}),e.jsx("path",{d:"M6 10a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3"})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(Fc,{patient:s})})]})}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-green-500 dark:text-green-400",children:[e.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 p-6",children:[e.jsx(Je,{label:"Paciente",value:s.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(qr,{patientName:s.name,patientId:s.id,size:"10"}),e.jsx(ba,{patientId:s.id,patientName:s.name})]}),e.jsx(Mc,{sex:s.sex}),e.jsx(Je,{label:"Edad",value:s.age}),e.jsx(Je,{label:"Fecha de Nacimiento",value:ie(new Date(s.date),"dd/MM/yyyy")}),e.jsx(Je,{label:"Dirección",value:s.address}),e.jsx(Je,{label:"Nacionalidad",value:s.country}),e.jsx(Je,{label:"Departamento, Municipio",value:`${s.dapartment}, ${s.municipaly}`}),!t&&e.jsxs(e.Fragment,{children:[e.jsx(Je,{label:"Teléfono",value:s.phone?fs(s.phone):""}),e.jsx(Je,{label:"Cédula",value:s.dni||""})]})]})]})}function Je({label:s,value:r}){return e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-foreground/50 font-semibold dark:text-muted-foreground-dark",children:s}),e.jsx(qa,{value:r})]})}function Rc(){return e.jsxs("div",{className:"w-full bg-card text-card-foreground dark:bg-card-dark dark:text-card-dark-foreground shadow-lg rounded-lg animate-pulse",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b dark:border-b-gray-700",children:[e.jsx("div",{className:"h-8 w-1/3 bg-muted dark:bg-muted-dark rounded"}),e.jsx("div",{className:"h-8 w-8 bg-muted dark:bg-muted-dark rounded-full"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 p-6",children:Array(10).fill(0).map((s,r)=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"h-4 w-20 bg-muted dark:bg-muted-dark rounded"}),e.jsx("div",{className:"h-5 w-full bg-muted dark:bg-muted-dark rounded"})]},r))})]})}Ci.register({family:"Oswald",src:"https://fonts.gstatic.com/s/oswald/v13/Y_TKV6o8WovbUd3m_X9aAA.ttf"});const ue=Si.create({page:{flexDirection:"column",padding:20,fontFamily:"Oswald"},section:{marginBottom:10},table:{display:"flex",flexDirection:"column"},row:{flexDirection:"row",justifyContent:"space-between",borderBottom:"1px solid #000",padding:5},cell:{flex:1,textAlign:"center"}}),$c=()=>e.jsx(ki,{children:e.jsx(Ei,{size:"A4",style:ue.page,children:e.jsxs(ls,{style:ue.section,children:[e.jsx(Ee,{style:{fontSize:25},children:"Pediatric Document"}),e.jsxs(ls,{style:ue.table,children:[e.jsxs(ls,{style:ue.row,children:[e.jsx(Ee,{style:ue.cell,children:"Columna 1"}),e.jsx(Ee,{style:ue.cell,children:"Columna 2"}),e.jsx(Ee,{style:ue.cell,children:"Columna 3"})]}),e.jsxs(ls,{style:ue.row,children:[e.jsx(Ee,{style:ue.cell,children:"Fila 1 Col 1"}),e.jsx(Ee,{style:ue.cell,children:"Fila 1 Col 2"}),e.jsx(Ee,{style:ue.cell,children:"Fila 1 Col 3"})]}),e.jsxs(ls,{style:ue.row,children:[e.jsx(Ee,{style:ue.cell,children:"Fila 2 Col 1"}),e.jsx(Ee,{style:ue.cell,children:"Fila 2 Col 2"}),e.jsx(Ee,{style:ue.cell,children:"Fila 2 Col 3"})]}),e.jsxs(ls,{style:ue.row,children:[e.jsx(Ee,{style:ue.cell,children:"Fila 3 Col 1"}),e.jsx(Ee,{style:ue.cell,children:"Fila 3 Col 2"}),e.jsx(Ee,{style:ue.cell,children:"Fila 3 Col 3"})]})]})]})})});function Tc(){const[s,r]=x.useState(!1);return e.jsxs(Os,{open:s,onOpenChange:r,children:[e.jsx(br,{asChild:!0,children:e.jsx(D,{variant:"outline",children:"Generar PDF"})}),e.jsx(Hs,{className:"h-full",children:e.jsx(Pi,{style:{width:"100%",height:"100%"},children:e.jsx($c,{})})})]})}const Ma=ee("/doctor/_doctor/pediatric")({async validateSearch({id:s}){return s},component:zc});function zc(){const{id:s}=Ma.useSearch(),{data:r,isLoading:n,error:t}=$({queryKey:["file",s],queryFn:async()=>{const i=await(await F.patients.file.$get({query:{id:s}})).json();if(!i.success)throw new Error("Error al cargar el expediente");return i.data}});return n?e.jsx("div",{children:"Loading..."}):t||!r?e.jsx("div",{children:t==null?void 0:t.message}):e.jsx("div",{className:"px-4 pb-4 md:px-6 md:pb-6 lg:px-8 lg:pb-8",children:e.jsxs("div",{className:"mt-5 grid gap-6",children:[e.jsx(Fa,{isPediatric:!0,patient:r,isLoading:n,error:t}),e.jsxs(Ye,{className:"bg-background rounded-lg border",children:[e.jsxs(Ze,{className:"flex items-center justify-between px-6 py-4 cursor-pointer",children:[e.jsx("h2",{className:"text-lg",children:"Familiares"}),e.jsx(Ke,{className:"h-5 w-5 text-muted-foreground"})]}),e.jsx(Xe,{className:"p-6",children:e.jsxs("section",{className:"",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Z,{children:"Familiares"}),e.jsx(Rr,{id:r.id})]}),e.jsx(Tr,{id:r.id})]})})]}),e.jsxs(Ye,{className:"bg-background rounded-lg border",children:[e.jsxs(Ze,{className:"flex items-center justify-between px-6 py-4 cursor-pointer",children:[e.jsx("h2",{className:"text-lg",children:"Antecedentes Familiares Patológicos"}),e.jsx(Ke,{className:"h-5 w-5 text-muted-foreground"})]}),e.jsx(Xe,{className:"p-6",children:e.jsx(Aa,{fileId:r.fileId})})]}),e.jsxs(Ye,{className:"bg-background rounded-lg border",children:[e.jsxs(Ze,{className:"flex items-center justify-between px-6 py-4 cursor-pointer",children:[e.jsx("h2",{className:"text-lg ",children:"Antecedentes Personales no Patológicos"}),e.jsx(Ke,{className:"h-5 w-5 text-muted-foreground"})]}),e.jsx(Xe,{className:"p-6",children:e.jsx(hc,{fileId:r.fileId})})]}),e.jsxs(Ye,{className:"bg-background rounded-lg border",children:[e.jsxs(Ze,{className:"flex items-center justify-between px-6 py-4 cursor-pointer",children:[e.jsx("h2",{className:"text-lg ",children:"Antecedentes Personales Patológicos"}),e.jsx(Ke,{className:"h-5 w-5 text-muted-foreground"})]}),e.jsx(Xe,{className:"p-6",children:e.jsx(Ia,{fileId:r.fileId})})]}),e.jsx(Tc,{})]})})}const Ra=s=>{const r=[{accessorKey:"name",header:({column:n})=>e.jsxs(D,{variant:"ghost",onClick:()=>n.toggleSorting(n.getIsSorted()==="asc"),children:["Nombre",e.jsx(ys,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"sex",header:"Sexo"},{accessorKey:"origin",header:"Origen"},{accessorKey:"date",header:"Edad",cell:({row:n})=>Vc(n)},{accessorKey:"date",header:"Nacimiento",cell:({row:n})=>Lc(n)},{accessorKey:"address",header:"Dirección"}];return s==="general"&&(r.push({accessorKey:"phone",header:"Teléfono",cell:({row:n})=>{const t=n.original.phone;return t?fs(t.toString()):e.jsx("div",{})}}),r.push({accessorKey:"dni",header:"Cédula"})),r.push({id:"id",header:"Acciones",cell:({row:n})=>Oc(n,s)}),r};function Lc(s){const n=new Date(s.getValue("date")).toLocaleDateString();return e.jsx("div",{className:"font-medium",children:n})}function Vc(s){const r=new Date(s.getValue("date")),n=new Date;let t=n.getFullYear()-r.getFullYear();return(n.getMonth()<r.getMonth()||n.getMonth()===r.getMonth()&&n.getDate()<r.getDate())&&t--,t}function Oc(s,r){return e.jsxs("div",{className:"flex space-x-2",children:[Hc(s,r),_c(s),e.jsx(Gs,{id:s.original.id})]})}function Hc(s,r){const n=s.original;return e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{children:e.jsx(Me,{to:`/doctor/${r}?id=${n.fileId}`,children:e.jsx(D,{variant:"outline",size:"icon",children:e.jsx(jr,{})})})}),e.jsx(K,{children:"Ver Expediente"})]})})}function _c(s){const r=s.original;return e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{children:e.jsx(Me,{to:`/doctor/dates?id=${r.id}`,children:e.jsx(D,{variant:"outline",size:"icon",children:e.jsx(kn,{})})})}),e.jsx(K,{children:"Agendar una cita"})]})})}const Kc=Ra("pediatric"),Gc=Ra("general");function sr({columns:s,data:r}){var u;const[n,t]=x.useState([]),[a,i]=x.useState([]),[l,o]=x.useState({}),c=Qr({data:r,columns:s,state:{sorting:n,columnFilters:a,columnVisibility:l},onSortingChange:t,onColumnFiltersChange:i,onColumnVisibilityChange:o,getCoreRowModel:Wr(),getSortedRowModel:tt(),getFilteredRowModel:it(),getPaginationRowModel:lt()});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(ze,{children:[e.jsx(Le,{children:c.getHeaderGroups().map(d=>e.jsx(te,{children:d.headers.map(h=>e.jsx(re,{children:h.isPlaceholder?null:Is(h.column.columnDef.header,h.getContext())},h.id))},d.id))}),e.jsx(Ve,{children:(u=c.getRowModel().rows)!=null&&u.length?c.getRowModel().rows.map(d=>e.jsx(te,{"data-state":d.getIsSelected()&&"selected",children:d.getVisibleCells().map(h=>e.jsx(L,{children:Is(h.column.columnDef.cell,h.getContext())},h.id))},d.id)):e.jsx(te,{})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 py-4",children:[e.jsx(D,{variant:"outline",size:"sm",onClick:()=>c.previousPage(),disabled:!c.getCanPreviousPage(),children:"Anterior"}),e.jsx(D,{variant:"outline",size:"sm",onClick:()=>c.nextPage(),disabled:!c.getCanNextPage(),children:"Siguiente"})]})]})}const $a={country:"Nicaragua",countryCode:505,flag:"https://flagcdn.com/ni.svg"},Ta=[{value:"Boaco",label:"Boaco"},{value:"Carazo",label:"Carazo"},{value:"Chinandega",label:"Chinandega"},{value:"Chontales",label:"Chontales"},{value:"Estelí",label:"Estelí"},{value:"Granada",label:"Granada"},{value:"Jinotega",label:"Jinotega"},{value:"León",label:"León"},{value:"Madriz",label:"Madriz"},{value:"Managua",label:"Managua"},{value:"Masaya",label:"Masaya"},{value:"Matagalpa",label:"Matagalpa"},{value:"Nueva Segovia",label:"Nueva Segovia"},{value:"Río San Juan",label:"Río San Juan"},{value:"Rivas",label:"Rivas"},{value:"Atlántico Norte",label:"Atlántico Norte"},{value:"Atlántico Sur",label:"Atlántico Sur"}];function za(){const s=Qe(),r=H(),n=O({resolver:V(zl),defaultValues:{nationality:$a,department:"Matagalpa",municipality:"441",name:"",address:"",action:null,sex:"FEMENINO"}}),t=n.watch("nationality"),a=n.watch("department"),[i,l]=x.useState(null),[o,c]=x.useState(null),u=async S=>{if(n.watch("nationality").countryCode===505){const E=await(await F.locations.find[":code"].$get({param:{code:S}})).json();E.department!=null&&E.municipality!=null&&(n.setValue("department",E.department),l(E.municipality))}},d=S=>{console.log(S,"handleDateChange"),S!==null&&(n.setValue("date",S),n.setValue("dateDni",S))},h=S=>{c(S);const P=S.slice(-1).toUpperCase(),g=S.slice(0,-1)+P,E=`${g.slice(0,3)}-${g.slice(3,9)}-${g.slice(9)}`;n.setValue("Dni",E),i!==null&&(t==null?void 0:t.country)==="Nicaragua"&&n.setValue("municipality",i.code)},v=S=>{S?n.setError("Dni",{type:"custom",message:S}):n.clearErrors("Dni")},j=S=>{b.mutate(S)},b=R({mutationFn:async S=>{if(S.nationality.countryCode===505&&S.dateDni!=null){const E=new Date(S.dateDni),z=new Date(S.date);if(!(E.getFullYear()===z.getFullYear()&&E.getMonth()===z.getMonth()&&E.getDate()===z.getDate())){k.error("La fecha de la Cédula no coincide con la fecha de nacimiento");return}}const P=await F.patients.general.$post({json:S});if(P===void 0){k.error("Error al agregar paciente");return}const g=await P.json();if(g.success){n.reset(),c(null),r.invalidateQueries({queryKey:["listPatients"]}),k.success("Paciente agregado correctamente");const E=g.patientId;g.action==="date"?s({to:`/doctor/dates?id=${E}`}):g.action}else throw new Error(g.error)},onError:S=>{k.error(`Error: ${S.message}`)}}),{data:N=[{name:"Matagalpa",code:"441"}],isPending:A}=$({queryKey:["municipalities",a],queryFn:async()=>{if(!a)return[];const P=await(await F.locations.municipalities.$get({query:{department:a}})).json();return Array.isArray(P)?P:[]},enabled:!!a,staleTime:5*60*1e3});return e.jsx(G,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(j),className:"mt-4 mx-3 sm:mx-5 border sm:p-5 p-4 rounded-lg",children:[e.jsx(Z,{className:"text-lg font-medium",children:"Agregar paciente general"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-5 gap-2 ",children:[e.jsx(w,{control:n.control,name:"name",render:({field:S})=>e.jsxs(f,{className:"my-1 sm:my1 col-span-1",children:[e.jsx(p,{children:"Nombres y Apellidos"}),e.jsx(y,{children:e.jsx(I,{type:"text",value:S.value,placeholder:"Nombre y apellidos",onChange:S.onChange})}),e.jsx(C,{})]})}),e.jsx(w,{control:n.control,name:"sex",render:({field:S})=>e.jsxs(f,{className:"my-1 sm:my1 col-span-1",children:[e.jsx(p,{children:"Sexo"}),e.jsx(y,{children:e.jsx(Fe,{value:S.value,onValueChange:S.onChange,defaultValue:S.value,children:e.jsxs("div",{className:"flex justify-center space-x-2 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{value:"FEMENINO"}),e.jsx(p,{children:"FEMENINO"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{value:"MASCULINO"}),e.jsx(p,{children:"MASCULINO"})]})]})})}),e.jsx(C,{})]})}),e.jsx(w,{control:n.control,name:"nationality",render:({field:S})=>e.jsxs(f,{className:"my-1 sm:my1 col-span-1",children:[e.jsx(p,{children:"Nacionalidad"}),e.jsx(y,{children:e.jsx("div",{children:e.jsx(Mr,{...S,onSelect:P=>{P.countryCode!==505&&(n.setValue("department",""),n.setValue("municipality","")),S.onChange(P)}})})}),e.jsx(C,{})]})}),e.jsx(w,{control:n.control,name:"department",render:({field:S})=>e.jsxs(f,{className:"my-1 sm:my1 col-span-1",children:[e.jsx(p,{children:"Departamento"}),e.jsx(y,{children:(t==null?void 0:t.country)==="Nicaragua"?e.jsxs(be,{onValueChange:S.onChange,value:S.value,children:[e.jsx(fe,{children:e.jsx(Ne,{placeholder:"Seleccione un departamento"})}),e.jsx(ge,{children:Ta.map(P=>e.jsx(se,{value:P.value,children:P.label},P.value))})]}):e.jsx(I,{...S,placeholder:"Departamento"})}),e.jsx(C,{})]})}),e.jsx(w,{control:n.control,name:"municipality",render:({field:S})=>e.jsxs(f,{className:"my-1 sm:my1 col-span-1",children:[e.jsx(p,{children:"Municipio"}),e.jsx(y,{children:(t==null?void 0:t.country)==="Nicaragua"?e.jsx("div",{children:!A&&e.jsxs(be,{onValueChange:S.onChange,value:S.value,defaultValue:"441",children:[e.jsx(fe,{children:e.jsx(Ne,{placeholder:"Seleccione un municipio"})}),e.jsx(ge,{children:N.map(P=>e.jsx(se,{value:P.code,children:P.name},P.code))})]})}):e.jsx(I,{onChange:S.onChange,value:S.value,placeholder:"Municipio"})}),e.jsx(C,{})]})}),e.jsx(w,{control:n.control,name:"address",render:({field:S})=>e.jsxs(f,{className:"my-1 sm:my1 col-span-1 ",children:[e.jsx(p,{children:"Dirección"}),e.jsx(y,{children:e.jsx(ae,{value:S.value,onChange:S.onChange})}),e.jsx(C,{})]})}),e.jsx(w,{control:n.control,name:"date",render:({field:S})=>e.jsxs(f,{className:"my-1 sm:my1 col-span-1",children:[e.jsx(p,{children:"Fecha de nacimiento"}),e.jsx(y,{children:e.jsx("div",{className:"w-full flex justify-center",children:e.jsx(er,{granularity:"day",locale:hs,weekStartsOn:0,placeholder:"Fecha de nacimiento",displayFormat:{hour24:"dd/MM/yyyy"},onChange:P=>{P!=null&&S.onChange(P)},value:S.value})})}),e.jsx(C,{})]})}),e.jsx(w,{control:n.control,name:"Dni",render:()=>e.jsxs(f,{className:"my-1 sm:my1 md:col-span-2",children:[e.jsx(p,{children:"Cédula"}),e.jsx(y,{children:(t==null?void 0:t.country)==="Nicaragua"?e.jsx(Ca,{value:o??"",onMunicipalityChange:u,onDateChange:d,onFullIdChange:h,onErrorChange:v}):e.jsx(I,{value:n.watch("foreign")??"",placeholder:"Cédula",onChange:S=>{n.setValue("Dni",null),n.setValue("foreign",S.target.value)}})}),e.jsx(C,{})]})}),e.jsx(w,{control:n.control,name:"phone",render:({field:S})=>e.jsxs(f,{className:"my-1 sm:my1 col-span-1 ",children:[e.jsx(p,{children:"Teléfono"}),e.jsx(y,{children:e.jsx("div",{className:"flex gap-1 items-center",children:e.jsxs(Fr,{onChange:P=>{S.onChange(P)},value:S.value??"",pattern:"^[0-9]*$",maxLength:8,type:"text",children:[e.jsxs(ms,{children:[e.jsx(le,{className:"w-8 h-8",inputMode:"numeric",index:0}),e.jsx(le,{className:"w-8 h-8",inputMode:"numeric",index:1}),e.jsx(le,{className:"w-8 h-8",inputMode:"numeric",index:2}),e.jsx(le,{className:"w-8 h-8",inputMode:"numeric",index:3})]}),e.jsxs(ms,{children:[e.jsx(le,{className:"w-8 h-8",inputMode:"numeric",index:4}),e.jsx(le,{className:"w-8 h-8",inputMode:"numeric",index:5}),e.jsx(le,{className:"w-8 h-8",inputMode:"numeric",index:6}),e.jsx(le,{className:"w-8 h-8",inputMode:"numeric",index:7})]})]})})}),e.jsx(C,{})]})})]}),e.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[e.jsx(T,{type:"submit",children:"Guardar"}),e.jsx(w,{control:n.control,name:"action",render:({field:S})=>e.jsxs(f,{className:"space-y-3",children:[e.jsx(y,{children:e.jsxs(Fe,{onValueChange:S.onChange,className:"flex",children:[e.jsxs(f,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(y,{children:e.jsx(oe,{value:"date"})}),e.jsx(p,{className:"font-normal",children:"Agendar cita"})]}),e.jsxs(f,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(y,{children:e.jsx(oe,{value:"now"})}),e.jsx(p,{className:"font-normal",children:"Agregar a la lista de espera"})]})]})}),e.jsx(C,{})]})})]})]})})}function La(){const s=Qe(),r=H(),n=O({resolver:V(Tl),defaultValues:{nationality:$a,department:"Matagalpa",municipality:"441",name:"",address:"",action:null,sex:"FEMENINO"}}),t=R({mutationFn:async c=>{const u=await F.patients.pediatric.$post({json:c});if(u===void 0){k.error("Error al agregar paciente");return}const d=await u.json();if(d.success){n.reset(),r.invalidateQueries({queryKey:["listPatients"]}),k.success("Paciente agregado correctamente");const h=d.patientId;d.action==="date"?s({to:`/doctor/dates?id=${h}`}):d.action}else throw new Error(d.error)},onError:c=>{k.error(`Error: ${c.message}`)}}),a=c=>{t.mutate(c)},i=n.watch("nationality"),l=n.watch("department");x.useEffect(()=>{},[l]);const{data:o=[]}=$({queryKey:["municipalities",l],queryFn:async()=>{if(!l)return[];const u=await(await F.locations.municipalities.$get({query:{department:l}})).json();return Array.isArray(u)?u:[]},enabled:!!l,staleTime:5*60*1e3});return e.jsx(G,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(a),className:"mt-4 mx-3 sm:mx-5 border sm:p-5 rounded-lg",children:[e.jsx(Z,{className:"text-lg font-medium",children:"Agregar paciente pediatrico"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-2 ",children:[e.jsx(w,{control:n.control,name:"name",render:({field:c})=>e.jsxs(f,{className:"my-1 sm:my1 col-span-1",children:[e.jsx(p,{children:"Nombres y Apellidos"}),e.jsx(y,{children:e.jsx(I,{type:"text",value:c.value,placeholder:"Nombre y apellidos",onChange:c.onChange})}),e.jsx(C,{})]})}),e.jsx(w,{control:n.control,name:"sex",render:({field:c})=>e.jsxs(f,{className:"my-1 sm:my1 col-span-1",children:[e.jsx(p,{children:"Sexo"}),e.jsx(y,{children:e.jsx(Fe,{value:c.value,onValueChange:c.onChange,defaultValue:c.value,children:e.jsxs("div",{className:"flex justify-center space-x-2 mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{value:"FEMENINO"}),e.jsx(p,{children:"FEMENINO"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{value:"MASCULINO"}),e.jsx(p,{children:"MASCULINO"})]})]})})}),e.jsx(C,{})]})}),e.jsx(w,{control:n.control,name:"nationality",render:({field:c})=>e.jsxs(f,{className:"my-1 sm:my1 col-span-1",children:[e.jsx(p,{children:"Nacionalidad"}),e.jsx(y,{children:e.jsx("div",{children:e.jsx(Mr,{...c,onSelect:u=>c.onChange(u)})})}),e.jsx(C,{})]})}),e.jsx(w,{control:n.control,name:"department",render:({field:c})=>e.jsxs(f,{className:"my-1 sm:my1 col-span-1",children:[e.jsx(p,{children:"Departamento"}),e.jsx(y,{children:(i==null?void 0:i.country)==="Nicaragua"?e.jsxs(be,{onValueChange:c.onChange,value:c.value,children:[e.jsx(fe,{children:e.jsx(Ne,{placeholder:"Seleccione un departamento"})}),e.jsx(ge,{children:Ta.map(u=>e.jsx(se,{value:u.value,children:u.label},u.value))})]}):e.jsx(I,{...c,placeholder:"Departamento"})}),e.jsx(C,{})]})}),e.jsx(w,{control:n.control,name:"municipality",render:({field:c})=>e.jsxs(f,{className:"my-1 sm:my1 col-span-1",children:[e.jsx(p,{children:"Municipio"}),e.jsx(y,{children:(i==null?void 0:i.country)==="Nicaragua"?e.jsxs(be,{onValueChange:c.onChange,value:c.value,defaultValue:c.value,children:[e.jsx(fe,{children:e.jsx(Ne,{placeholder:"Seleccione un municipio"})}),e.jsx(ge,{children:o.map(u=>e.jsx(se,{value:u.code,children:u.name},u.code))})]}):e.jsx(I,{...c,placeholder:"Municipio"})}),e.jsx(C,{})]})}),e.jsx(w,{control:n.control,name:"address",render:({field:c})=>e.jsxs(f,{className:"my-1 sm:my1 col-span-1 ",children:[e.jsx(p,{children:"Dirección"}),e.jsx(y,{children:e.jsx(ae,{value:c.value,onChange:c.onChange})}),e.jsx(C,{})]})}),e.jsx(w,{control:n.control,name:"date",render:({field:c})=>e.jsxs(f,{className:"my-1 sm:my1 col-span-1",children:[e.jsx(p,{children:"Fecha de nacimiento"}),e.jsx(y,{children:e.jsx("div",{className:"w-full flex justify-center",children:e.jsx(er,{granularity:"day",locale:hs,weekStartsOn:0,placeholder:"Fecha de nacimiento",displayFormat:{hour24:"dd/MM/yyyy"},onChange:u=>{u!=null&&c.onChange(u)},value:c.value})})}),e.jsx(C,{})]})})]}),e.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[e.jsx(T,{type:"submit",children:"Guardar"}),e.jsx(w,{control:n.control,name:"action",render:({field:c})=>e.jsxs(f,{className:"space-y-3",children:[e.jsx(y,{children:e.jsxs(Fe,{onValueChange:c.onChange,className:"flex",children:[e.jsxs(f,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(y,{children:e.jsx(oe,{value:"date"})}),e.jsx(p,{className:"font-normal",children:"Agendar cita"})]}),e.jsxs(f,{className:"flex items-center space-x-3 space-y-0",children:[e.jsx(y,{children:e.jsx(oe,{value:"now"})}),e.jsx(p,{className:"font-normal",children:"Agregar a la lista de espera"})]})]})}),e.jsx(C,{})]})})]})]})})}const Va=ee("/doctor/_doctor/patients")({component:Uc});async function Bc(){const r=await(await F.patients.all.$get()).json();if(!r.success)throw new Error("Error al cargar la lista de pacientes");return r.data}function Uc(){const{data:s}=$({queryKey:["listPatients"],queryFn:Bc}),{data:r}=Va.useRouteContext(),n=(r==null?void 0:r.doctor.specialtie)==="GENERAL"?Gc:Kc;return e.jsxs(e.Fragment,{children:[(r==null?void 0:r.doctor.specialtie)==="GENERAL"?e.jsx(za,{}):e.jsx(La,{}),e.jsx("div",{className:"mt-4 mx-3 sm:mx-5",children:s&&s.length>0&&e.jsx(sr,{columns:n,data:s})})]})}const Qc=m.object({tobaccoType:m.string({required_error:"Este campo es requerido"}).min(4,"Complete este campo"),consumptionAmount:m.string({required_error:"Este campo es requerido"}).min(4,"Complete este campo"),consumptionFrequency:m.string({required_error:"Este campo es requerido"}).min(4,"Complete este campo"),startAge:m.string({required_error:"Este campo es requerido"}).min(1,"Complete este campo"),duration:m.string({required_error:"Este campo es requerido"}).min(1,"Complete este campo")}),Wc=m.object({alcoholType:m.string({required_error:"Este campo es requerido"}).min(4,"Complete este campo"),consumptionAmount:m.string({required_error:"Este campo es requerido"}).min(4,"Complete este campo"),consumptionFrequency:m.string({required_error:"Este campo es requerido"}).min(4,"Complete este campo"),startAge:m.string({required_error:"Este campo es requerido"}).min(1,"Complete este campo"),duration:m.string({required_error:"Este campo es requerido"}).min(1,"Complete este campo")}),Jc=m.object({drugType:m.string({required_error:"Este campo es requerido"}).min(4,"Complete este campo"),consumptionAmount:m.string({required_error:"Este campo es requerido"}).min(4,"Complete este campo"),consumptionFrequency:m.string({required_error:"Este campo es requerido"}).min(1,"Complete este campo"),startAge:m.string({required_error:"Este campo es requerido"}).min(1,"Complete este campo"),duration:m.string({required_error:"Este campo es requerido"}).min(1,"Complete este campo")});m.object({num:m.string({required_error:"Este campo es requerido"}),posology:m.string({required_error:"Este campo es requerido"})});function Yc({fileId:s}){const[r,n]=x.useState(!1),t=H(),a=O({resolver:V(Wc),defaultValues:{alcoholType:"",consumptionAmount:"",consumptionFrequency:"",startAge:"",duration:""}}),i=o=>{l.mutate(o)},l=R({mutationFn:async o=>{const u=await(await fetch(`/api/file/general/apnp/${s}/alcohol`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).json();u.success||k.error(u.error),k.success("Información actualizada"),n(!1),t.invalidateQueries({queryKey:["apnp"]})}});return e.jsxs(B,{onOpenChange:n,open:r,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsx(D,{children:"Consumo de Alcohol"})})}),e.jsxs(K,{children:["Describe el consumo de Alcohol del paciente"," "]})]})}),e.jsxs(_,{className:"w-full",children:[e.jsxs(X,{children:[e.jsx(Q,{children:"Consumo de Alcohol"}),e.jsx(we,{children:"Describe el consumo de Alcohol del paciente."})]}),e.jsx(G,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(i),children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx("div",{className:"",children:e.jsx(w,{control:a.control,name:"alcoholType",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{children:"Tipo de Alcohol"}),e.jsx(y,{children:e.jsx(I,{type:"text",...o})}),e.jsx(C,{})]})})}),e.jsx("div",{className:"",children:e.jsx(w,{control:a.control,name:"consumptionAmount",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{htmlFor:"consumptionAmount",children:"Cantidad consumida"}),e.jsx(y,{children:e.jsx(I,{id:"consumptionAmount",...o,disabled:l.isPending})}),e.jsx(C,{})]})})}),e.jsx("div",{className:"",children:e.jsx(w,{control:a.control,name:"consumptionFrequency",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{htmlFor:"consumptionFrequency",children:"Frecuencia"}),e.jsx(y,{children:e.jsxs(be,{onValueChange:o.onChange,defaultValue:o.value,value:o.value,children:[e.jsx(fe,{children:e.jsx(Ne,{placeholder:"Selecciona la frecuencia"})}),e.jsxs(ge,{children:[e.jsx(se,{value:"diario",children:"Diario"}),e.jsx(se,{value:"semanal",children:"Semanal"}),e.jsx(se,{value:"mensual",children:"Mensual"}),e.jsx(se,{value:"ocasional",children:"Ocasional"})]})]})}),e.jsx(C,{})]})})}),e.jsx("div",{className:"",children:e.jsx(w,{control:a.control,name:"startAge",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{htmlFor:"startAge",children:"Edad de inicio"}),e.jsx(y,{children:e.jsx(I,{...o,id:"startAge",type:"number",disabled:l.isPending})}),e.jsx(C,{})]})})}),e.jsx("div",{className:"",children:e.jsx(w,{control:a.control,name:"duration",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{htmlFor:"duration",children:"Duración del hábito"}),e.jsx(y,{children:e.jsx(I,{...o,id:"duration",disabled:l.isPending})}),e.jsx(C,{})]})})})]}),e.jsx(ne,{children:e.jsx(T,{type:"submit",className:"",children:"Guardar"})})]})})]})]})}function Zc({fileId:s}){const[r,n]=x.useState(!1),t=H(),a=O({resolver:V(Qc),defaultValues:{tobaccoType:"",consumptionAmount:"",consumptionFrequency:"",startAge:"",duration:""}}),i=o=>{l.mutate(o),console.log(o)},l=R({mutationFn:async o=>{const u=await(await fetch(`/api/file/general/apnp/${s}/tobaco`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).json();u.success||k.error(u.error),k.success("Información actualizada"),n(!1),t.invalidateQueries({queryKey:["apnp"]})}});return e.jsxs(B,{open:r,onOpenChange:n,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsx(D,{children:"Consumo de Tabaco"})})}),e.jsxs(K,{children:["Describe el consumo de Tabaco del paciente"," "]})]})}),e.jsxs(_,{className:"w-full",children:[e.jsxs(X,{children:[e.jsx(Q,{children:"Consumo de Tabaco"}),e.jsx(we,{children:"Describe el consumo de tabaco del paciente."})]}),e.jsx(G,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(i),children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx("div",{className:"",children:e.jsx(w,{control:a.control,name:"tobaccoType",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{children:"Tipo de tabaco"}),e.jsx(y,{children:e.jsxs(be,{onValueChange:o.onChange,defaultValue:o.value,value:o.value,children:[e.jsx(fe,{children:e.jsx(Ne,{placeholder:"Selecciona el tipo de tabaco"})}),e.jsxs(ge,{children:[e.jsx(se,{value:"cigarrillos",children:"Cigarrillos"}),e.jsx(se,{value:"puros",children:"Puros"}),e.jsx(se,{value:"pipas",children:"Pipas"}),e.jsx(se,{value:"tabaco-sin-humo",children:"Tabaco sin humo"})]})]})}),e.jsx(C,{})]})})}),e.jsx("div",{className:"",children:e.jsx(w,{control:a.control,name:"consumptionAmount",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{htmlFor:"consumptionAmount",children:"Cantidad consumida"}),e.jsx(y,{children:e.jsx(I,{id:"consumptionAmount",...o,disabled:l.isPending})}),e.jsx(C,{})]})})}),e.jsx("div",{className:"",children:e.jsx(w,{control:a.control,name:"consumptionFrequency",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{htmlFor:"consumptionFrequency",children:"Frecuencia"}),e.jsx(y,{children:e.jsxs(be,{onValueChange:o.onChange,defaultValue:o.value,value:o.value,children:[e.jsx(fe,{children:e.jsx(Ne,{placeholder:"Selecciona la frecuencia"})}),e.jsxs(ge,{children:[e.jsx(se,{value:"diario",children:"Diario"}),e.jsx(se,{value:"semanal",children:"Semanal"}),e.jsx(se,{value:"mensual",children:"Mensual"}),e.jsx(se,{value:"ocasional",children:"Ocasional"})]})]})}),e.jsx(C,{})]})})}),e.jsx("div",{className:"",children:e.jsx(w,{control:a.control,name:"startAge",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{htmlFor:"startAge",children:"Edad de inicio"}),e.jsx(y,{children:e.jsx(I,{...o,id:"startAge",type:"number",disabled:l.isPending})}),e.jsx(C,{})]})})}),e.jsx("div",{className:"",children:e.jsx(w,{control:a.control,name:"duration",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{htmlFor:"duration",children:"Duración del hábito"}),e.jsx(y,{children:e.jsx(I,{...o,id:"duration",disabled:l.isPending})}),e.jsx(C,{})]})})})]}),e.jsx(ne,{children:e.jsx(T,{type:"submit",className:"",children:"Guardar"})})]})})]})]})}function Xc({fileId:s}){const[r,n]=x.useState(!1),t=H(),a=O({resolver:V(Jc),defaultValues:{drugType:"",consumptionAmount:"",consumptionFrequency:"",startAge:"",duration:""}}),i=o=>{l.mutate(o)},l=R({mutationFn:async o=>{const u=await(await fetch(`/api/file/general/apnp/${s}/drogas`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).json();u.success||k.error(u.error),k.success("Información actualizada"),n(!1),t.invalidateQueries({queryKey:["apnp"]})}});return e.jsxs(B,{open:r,onOpenChange:n,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsx(D,{children:"Consumo de drogas"})})}),e.jsxs(K,{children:["Describe el consumo de Drogas ilegales del paciente"," "]})]})}),e.jsxs(_,{className:"w-full",children:[e.jsxs(X,{children:[e.jsx(Q,{children:"Consumo de drogas"}),e.jsx(we,{children:"Describe el consumo de drogas del paciente."})]}),e.jsx(G,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(i),children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx("div",{className:"",children:e.jsx(w,{control:a.control,name:"drugType",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{children:"Tipo de drogas"}),e.jsx(y,{children:e.jsx(I,{...o,disabled:l.isPending})}),e.jsx(C,{})]})})}),e.jsx("div",{className:"",children:e.jsx(w,{control:a.control,name:"consumptionAmount",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{htmlFor:"consumptionAmount",children:"Cantidad consumida"}),e.jsx(y,{children:e.jsx(I,{id:"consumptionAmount",...o,disabled:l.isPending})}),e.jsx(C,{})]})})}),e.jsx("div",{className:"",children:e.jsx(w,{control:a.control,name:"consumptionFrequency",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{htmlFor:"consumptionFrequency",children:"Frecuencia"}),e.jsx(y,{children:e.jsxs(be,{onValueChange:o.onChange,defaultValue:o.value,value:o.value,children:[e.jsx(fe,{children:e.jsx(Ne,{placeholder:"Selecciona la frecuencia"})}),e.jsxs(ge,{children:[e.jsx(se,{value:"diario",children:"Diario"}),e.jsx(se,{value:"semanal",children:"Semanal"}),e.jsx(se,{value:"mensual",children:"Mensual"}),e.jsx(se,{value:"ocasional",children:"Ocasional"})]})]})}),e.jsx(C,{})]})})}),e.jsx("div",{className:"",children:e.jsx(w,{control:a.control,name:"startAge",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{htmlFor:"startAge",children:"Edad de inicio"}),e.jsx(y,{children:e.jsx(I,{...o,id:"startAge",type:"number",disabled:l.isPending})}),e.jsx(C,{})]})})}),e.jsx("div",{className:"",children:e.jsx(w,{control:a.control,name:"duration",render:({field:o})=>e.jsxs(f,{children:[e.jsx(p,{htmlFor:"duration",children:"Duración del hábito"}),e.jsx(y,{children:e.jsx(I,{...o,id:"duration",disabled:l.isPending})}),e.jsx(C,{})]})})})]}),e.jsx(ne,{children:e.jsx(T,{type:"submit",className:"",children:"Guardar"})})]})})]})]})}function ed({fileId:s}){const{data:r}=$({queryKey:["apnp"],queryFn:async()=>(await(await F.file.apnp.$get({query:{fileId:s}})).json()).data});return e.jsxs("div",{children:[e.jsxs("div",{className:" flex gap-2",children:[e.jsx(Yc,{fileId:s}),e.jsx(Zc,{fileId:s}),e.jsx(Xc,{fileId:s})]}),r&&e.jsx(rd,{antecedentes:r})]})}const sd=({title:s,data:r})=>e.jsxs("div",{className:"border bg-background rounded-sm sm:p-3 p-2 border-customborder",children:[e.jsx("div",{className:"w-full flex justify-center",children:e.jsx("h2",{className:"text-sm font-bold mb-2",children:s.toUpperCase()})}),e.jsx("ul",{children:Object.entries(r).map(([n,{value:t,label:a}])=>e.jsxs("li",{className:"flex",children:[e.jsx("span",{className:"text-sm font-semibold",children:a}),e.jsxs("span",{className:"text-sm",children:[":  ",t]})]},n))})]}),rd=({antecedentes:s})=>{let[r,n]=x.useState(null);return e.jsx("div",{className:q("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 my-2"),children:Object.entries(s).map(([t,a],i)=>e.jsxs("div",{className:"relative group block p-1 h-full w-full",onMouseEnter:()=>n(i),onMouseLeave:()=>n(null),children:[e.jsx(ps,{children:r===i&&e.jsx(Ce.span,{className:"absolute inset-0 h-full w-full bg-accent block rounded-md",layoutId:"hoverBackground",initial:{opacity:0},animate:{opacity:1,transition:{duration:.15}},exit:{opacity:0,transition:{duration:.15,delay:.2}}})}),e.jsx("div",{className:"z-20 overflow-hidden relative",children:e.jsx(sd,{title:t,data:a},t)})]},t))})},or=ee("/doctor/_doctor/general")({async validateSearch({id:s}){return s},component:nd});function nd(){const{id:s}=or.useSearch(),{data:r}=or.useRouteContext();if((r==null?void 0:r.doctor.specialtie)!=="GENERAL")return e.jsx("div",{children:"Not allowed"});const{data:t,isLoading:a,error:i}=$({queryKey:["file",s],queryFn:async()=>{const o=await(await F.patients.file.$get({query:{id:s}})).json();if(!o.success)throw new Error("Error al cargar el expediente");return o.data}});return a?e.jsx("div",{children:"Loading..."}):i||!t?e.jsx("div",{children:i==null?void 0:i.message}):e.jsx("div",{className:"px-4 pb-4 md:px-6 md:pb-6 lg:px-8 lg:pb-8",children:e.jsxs("div",{className:"mt-5 grid gap-6",children:[e.jsx(Fa,{isPediatric:!1,patient:t,isLoading:a,error:i}),e.jsxs(Ye,{className:"bg-background rounded-lg border",children:[e.jsxs(Ze,{className:"flex items-center justify-between px-6 py-4 cursor-pointer",children:[e.jsx("h2",{className:"text-lg",children:"Familiares"}),e.jsx(Ke,{className:"h-5 w-5 text-muted-foreground"})]}),e.jsx(Xe,{className:"p-6",children:e.jsxs("section",{className:"",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Z,{children:"Familiares"}),e.jsx(Rr,{id:t.id})]}),e.jsx(Tr,{id:t.id})]})})]}),e.jsxs(Ye,{className:"bg-background rounded-lg border",children:[e.jsxs(Ze,{className:"flex items-center justify-between px-6 py-4 cursor-pointer",children:[e.jsx("h2",{className:"text-lg",children:"Antecedentes Familiares Patológicos"}),e.jsx(Ke,{className:"h-5 w-5 text-muted-foreground"})]}),e.jsx(Xe,{className:"p-6",children:e.jsx(Aa,{fileId:t.fileId})})]}),e.jsxs(Ye,{className:"bg-background rounded-lg border",children:[e.jsxs(Ze,{className:"flex items-center justify-between px-6 py-4 cursor-pointer",children:[e.jsx("h2",{className:"text-lg ",children:"Antecedentes Personales no Patológicos"}),e.jsx(Ke,{className:"h-5 w-5 text-muted-foreground"})]}),e.jsx(Xe,{className:"p-6",children:e.jsx(ed,{fileId:t.fileId})})]}),e.jsxs(Ye,{className:"bg-background rounded-lg border",children:[e.jsxs(Ze,{className:"flex items-center justify-between px-6 py-4 cursor-pointer",children:[e.jsx("h2",{className:"text-lg ",children:"Antecedentes Personales Patológicos"}),e.jsx(Ke,{className:"h-5 w-5 text-muted-foreground"})]}),e.jsx(Xe,{className:"p-6",children:e.jsx(Ia,{fileId:t.fileId})})]})]})})}const ad=s=>new Date(s).toLocaleDateString("es-NI",{year:"numeric",month:"long",day:"numeric"}),td=async()=>{const r=await(await F.services.expences.$get()).json();return r.data===null?[]:r.data};function Oa(){const{data:s,isLoading:r,error:n}=$({queryKey:["expenses"],queryFn:td});if(r)return e.jsx("div",{children:"Cargando..."});if(n)return e.jsxs("div",{children:["Error: ",n.message]});const t=s==null?void 0:s.reduce((a,i)=>(a.cordobas+=i.cordobas,a.dollars+=i.dollars,a.total+=i.total,a),{cordobas:0,dollars:0,total:0});return e.jsxs(ze,{children:[e.jsx(Le,{children:e.jsxs(te,{children:[e.jsx(re,{children:"Descripción"}),e.jsx(re,{children:"Fecha"}),e.jsx(re,{children:"Córdobas"}),e.jsx(re,{children:"Dólares"}),e.jsx(re,{children:"Total"})]})}),e.jsx(Ve,{children:s==null?void 0:s.map((a,i)=>e.jsxs(te,{children:[e.jsx(L,{children:a.description}),e.jsx(L,{children:ad(a.date)}),e.jsx(L,{children:me(a.cordobas)}),e.jsx(L,{children:Cs(a.dollars)}),e.jsx(L,{children:me(a.total)})]},i))}),e.jsx(Cr,{children:e.jsxs(te,{children:[e.jsx(L,{colSpan:2,children:"Total"}),e.jsx(L,{children:me((t==null?void 0:t.cordobas)??0)}),e.jsx(L,{children:Cs((t==null?void 0:t.dollars)??0)}),e.jsx(L,{children:me((t==null?void 0:t.total)??0)})]})})]})}const id=ee("/doctor/_doctor/expences")({component:ld});function ld(){return e.jsxs("div",{className:"m-4 sm:m-8",children:[e.jsx("p",{className:"text-lg m-3 font-medium",children:"Gastos del día "}),e.jsx(Oa,{})]})}const Ha=({data:s,onRemove:r})=>e.jsxs("div",{className:"flex items-center gap-1 px-2 bg-accent rounded h-10 my-1",children:[e.jsx("p",{className:"flex-1 text-sm font-semibold",children:s}),e.jsx(D,{variant:"destructive",size:"icon",className:"w-6 h-6",onClick:r,children:e.jsx(ks,{className:"h-3 w-3"})})]}),od=()=>{var h,v,j;const s=H(),[r,n]=x.useState(!1),[t,a]=x.useState(""),i=O({resolver:V(Pr),defaultValues:{presentations:[]}}),l=()=>{if(t==="")return;const b=i.getValues("presentations");if(b.find(A=>A===t))return;const N=[...b,t.toLowerCase()];i.setValue("presentations",N),a("")},o=(b,N)=>{N.stopPropagation(),N.preventDefault();const S=i.getValues("presentations").filter(P=>P!==b);i.setValue("presentations",S)},c=b=>{b.key==="Enter"&&(b.preventDefault(),l())},u=R({mutationFn:async b=>{const A=await(await F.drugs.$post({json:b})).json();if(!A.success)if(A.error==="El fármaco ya existe"){i.setError("tradeName",{message:A.error});return}else throw new Error(A.error);return i.reset(),k.success("Fármaco agregado correctamente"),s.invalidateQueries({queryKey:["listdrugs"]}),n(!1),A},onError:b=>{k.error(`Error: ${b.message}`)}}),d=b=>{u.mutate(b)};return e.jsxs(B,{open:r,onOpenChange:n,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsxs(D,{children:["Nuevo Fármaco",e.jsx(Se,{className:"ml-2"})]})})}),e.jsx(K,{children:"Agrega un nuevo fármaco"})]})}),e.jsxs(_,{children:[e.jsx(Q,{children:"Nuevo Fármaco"}),e.jsx(G,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(d),children:[e.jsx(w,{control:i.control,name:"tradeName",render:({field:b})=>e.jsxs(f,{children:[e.jsx(p,{children:"Nombre comercial"}),e.jsx(y,{children:e.jsx(I,{...b,disabled:u.isPending,type:"text"})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"genericName",render:({field:b})=>e.jsxs(f,{children:[e.jsx(p,{children:"Nombre genérico"}),e.jsx(y,{children:e.jsx(I,{value:b.value??"",onChange:N=>{b.onChange(N.target.value)},disabled:u.isPending,type:"text"})}),e.jsx(C,{})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsx(p,{children:"Presentaciones"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{value:t,onChange:b=>a(b.target.value),disabled:u.isPending,type:"text",placeholder:"Nueva presentación",onKeyDown:c}),e.jsx(D,{type:"button",onClick:l,disabled:u.isPending,children:"Agregar"})]}),e.jsx(C,{children:(h=i.formState.errors.presentations)==null?void 0:h.message}),e.jsx("div",{className:"mt-2 flex justify-center",children:((v=i.watch("presentations"))==null?void 0:v.length)>0&&e.jsx(js,{className:"h-auto max-h-60 w-[350px] rounded-md border p-2",children:(j=i.watch("presentations"))==null?void 0:j.map((b,N)=>e.jsx(Ha,{data:b,onRemove:A=>o(b,A)},N))})})]}),e.jsx(T,{type:"submit",loading:u.isPending,className:"mt-2 w-full mr-2 inline-flex items-center",children:"Guardar"})]})})]})]})},cd=s=>{const r=H(),n=R({mutationFn:async()=>k.promise(F.drugs.change[":id"].$patch({param:{id:s.id}}).then(a=>a.json()),{loading:"Deshabilitando fármaco...",success:a=>{if(!a.success)throw new Error("Ocurrió un error");return r.invalidateQueries({queryKey:["listdrugs"]}),k.success("Cambios realizados"),"Fármaco deshabilitado"},error:"Error al deshabilitar el fármaco"}),onError:a=>{k.error(`${a.message}`)}}),t=()=>{k.custom(a=>e.jsxs("div",{className:"p-4 bg-destructive border rounded-sm  ",children:[e.jsxs("div",{className:"w-full",children:["¿Deseas deshabilitar este fármaco? ",e.jsx("br",{}),e.jsx("p",{className:"font-bold",children:s.tradeName})]}),e.jsxs("div",{className:"flex gap-2 justify-end mt-2",children:[e.jsx(D,{variant:"secondary",onClick:()=>k.dismiss(a),children:"No"}),e.jsx(D,{onClick:()=>{k.dismiss(a),n.mutate()},children:"Si"})]})]}),{duration:1/0})};return e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(D,{onClick:t,variant:"destructive",size:"icon",children:e.jsx(En,{className:"h-4 w-4"})})}),e.jsx(K,{children:"Deshabilitar fármaco"})]})})},dd=s=>{var j,b;const[r,n]=x.useState(""),[t,a]=x.useState(!1),i=H(),l=O({resolver:V(Pr),defaultValues:{tradeName:s.tradeName,genericName:s.genericName||"",presentations:s.presentations||[]}}),o=()=>{if(r==="")return;const N=l.getValues("presentations");if(N.find(S=>S===r))return;const A=[...N,r.toLowerCase()];l.setValue("presentations",A),n("")},c=(N,A)=>{A.stopPropagation(),A.preventDefault();const P=l.getValues("presentations").filter(g=>g!==N);l.setValue("presentations",P)},u=R({mutationFn:async N=>{const S=await(await F.drugs[":id"].$patch({param:{id:s.id},json:N})).json();S.success?(k.success("Fármaco actualizado correctamente"),i.invalidateQueries({queryKey:["listdrugs"]})):k.error(S.error),a(!1)}}),d=N=>{u.mutate(N)},h=N=>{N||l.reset({tradeName:s.tradeName,genericName:s.genericName,presentations:s.presentations}),a(N)},v=N=>{N.key==="Enter"&&(N.preventDefault(),o())};return e.jsxs(B,{open:t,onOpenChange:h,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsx(D,{variant:"destructive",size:"icon",children:e.jsx(ii,{className:"h-4 w-4"})})})}),e.jsx(K,{children:"Actualizar fármaco"})]})}),e.jsxs(_,{children:[e.jsxs(Q,{children:["Actualizar fármaco:"," ",e.jsx("span",{className:"font-bold",children:s.tradeName})]}),e.jsx(G,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(d),children:[e.jsx(w,{control:l.control,name:"genericName",render:({field:N})=>e.jsxs(f,{children:[e.jsx(p,{children:"Nombre genérico"}),e.jsx(y,{children:e.jsx(I,{value:N.value??"",onChange:N.onChange,disabled:u.isPending,type:"text"})}),e.jsx(C,{})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsx(p,{children:"Presentaciones"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{value:r,onChange:N=>n(N.target.value),type:"text",placeholder:"Nueva presentación",disabled:u.isPending,onKeyDown:v}),e.jsx(D,{disabled:u.isPending,type:"button",onClick:o,children:"Agregar"})]}),e.jsx(C,{children:(j=l.formState.errors.presentations)==null?void 0:j.message}),e.jsx("div",{className:"mt-2 flex justify-center",children:e.jsx(js,{className:"h-auto sm:w-[200px]  sm:p3",children:(b=l.watch("presentations"))==null?void 0:b.map((N,A)=>e.jsx(Ha,{data:N,onRemove:S=>c(N,S)},A))})})]}),e.jsx(ne,{children:e.jsx(T,{disabled:u.isPending,loading:u.isPending,type:"submit",children:"Actualizar"})})]})})]})]})};function ud({id:s,tradeName:r}){const n=H(),t=R({mutationFn:async()=>{const l=await(await F.drugs[":id"].$delete({param:{id:s}})).json();if(!l.success){k.error(l.error);return}k.success("Fármaco eliminado"),n.invalidateQueries({queryKey:["listdrugs"]})}}),a=()=>{k.custom(i=>e.jsxs("div",{className:"p-4 bg-destructive border rounded-sm  ",children:[e.jsx("div",{className:"w-full",children:"¿Está seguro de que deseas eliminar este fármaco?"}),e.jsx("div",{className:"my-2 font-semibold text-lg",children:e.jsx("p",{children:r})}),e.jsxs("div",{className:"flex gap-2 justify-end mt-2",children:[e.jsx(D,{variant:"secondary",onClick:()=>k.dismiss(i),children:"No"}),e.jsx(D,{onClick:()=>{k.dismiss(i),t.mutate()},children:"Si"})]})]}),{duration:1/0})};return e.jsx(D,{size:"icon",variant:"destructive",onClick:a,children:e.jsx(ks,{})})}const md=()=>[{accessorKey:"tradeName",header:({column:s})=>e.jsxs(D,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["Nombre Comercial",e.jsx(ys,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"genericName",header:({column:s})=>e.jsxs(D,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["Nombre Genérico",e.jsx(ys,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"presentations",header:"Presentaciones",cell:({row:s})=>{const r=s.original;return e.jsx("div",{className:"flex gap-1",children:r.presentations.map((n,t)=>e.jsx("p",{className:"text-sm bg-accent p-1 rounded-sm",children:n},t))})}},{accessorKey:"id",header:"",cell:({row:s})=>{const r=s.original;return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(cd,{id:r.id,tradeName:r.tradeName}),e.jsx(dd,{id:r.id,tradeName:r.tradeName,genericName:r.genericName,presentations:r.presentations}),e.jsx(ud,{id:r.id,tradeName:r.tradeName})]})}}],xd=ee("/doctor/_doctor/drugs")({component:jd});async function hd(){const r=await(await F.drugs.$get()).json();if(!r.success)throw new Error("Error al cargar la lista de fármacos");return r.data}function jd(){const{isPending:s,error:r,data:n}=$({queryKey:["listdrugs"],queryFn:hd});return e.jsx("div",{children:e.jsx("section",{className:"flex mx-2 max-h-screen",children:e.jsxs("div",{className:"sm:mx-20 mx-5 w-full h-full",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"text-lg m-3 font-medium",children:"Fármacos"}),e.jsx(od,{})]}),s&&e.jsx("div",{children:"cargando"}),r&&e.jsx("div",{children:r.message}),n&&(n==null?void 0:n.length)>0?e.jsx(sr,{columns:md(),data:n}):e.jsx("div",{children:"No hay fármacos disponibles."})]})})})}function xs({customEvent:s,view:r}){return e.jsxs(B,{children:[e.jsxs(U,{className:"w-full ",children:[r==="month"&&e.jsxs("div",{className:"flex items-center justify-between ",children:[e.jsx("span",{children:s.patient}),e.jsx(rr,{})]}),r==="week"&&e.jsx(D,{variant:"secondary",size:"icon",className:"flex items-center w-6 h-6 rounded-xs",children:e.jsx(rr,{className:"w-4 h-4 "})}),r==="day"&&e.jsx(D,{variant:"secondary",size:"icon",className:"flex items-center w-6 h-6 rounded-xs",children:e.jsx(rr,{className:"w-4 h-4 "})})]}),e.jsxs(_,{className:"w-auto bg-card border-customborder text-lg",children:[e.jsxs("div",{className:"p-4 flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(bs,{children:e.jsx(Ks,{className:"",children:e.jsx(jr,{})})}),e.jsx("div",{children:e.jsx("h4",{className:"font-semibold",children:s.patient})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Oi,{className:"w-4 h-4 text-primary "}),e.jsx("span",{className:"text-primary",children:s.start?ie(new Date(s.start),"dd-MM-yyyy"):""})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground ",children:[e.jsx(Hi,{className:"w-4 h-4 text-primary "}),e.jsx("span",{className:"text-primary",children:s.start&&s.end?`${ie(new Date(s.start),"hh:mm a")} - ${ie(new Date(s.end),"hh:mm a")}`:""})]})]}),r==="month"&&e.jsx("div",{children:e.jsx(Ns,{id:s.id})}),r==="week"&&e.jsx("div",{children:e.jsx(Ns,{id:s.id})})]})]})}function pd({Events:s}){const[r,n]=x.useState("week"),[t,a]=x.useState(new Date),{setValue:i,watch:l}=Ls(),{theme:o}=vr(),u=Vn({format:ie,parse:qn,startOfWeek:()=>"Sunday",getDay:Fn,locales:{es:hs}});x.useEffect(()=>{const g=()=>{window.innerWidth<768?n("day"):n("week")};return window.addEventListener("resize",g),g(),()=>{window.removeEventListener("resize",g)}},[]);const d=g=>{switch(g){case"NEXT":a(E=>r==="month"?Tn(E,1):r==="week"?zn(E,1):Ln(E,1));break;case"PREV":a(E=>r==="month"?Mn(E,1):r==="week"?Rn(E,1):$n(E,1));break;case"TODAY":a(new Date);break}},h=g=>{const E=new Date;new Date(g).setHours(0,0,0,0)>=E.setHours(0,0,0,0)&&a(new Date(g))};x.useEffect(()=>{const g=l("date");g&&a(new Date(g))},[l("date")]);const v=({event:g})=>{const E=g;return e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center relative",children:[e.jsx("p",{className:"font-bold text-sm",children:E.patient}),e.jsxs("div",{className:"flex items-center gap-1 md:absolute md:right-0",children:[e.jsx(Ns,{id:E.id}),e.jsx(xs,{customEvent:E,view:"day"})]})]})},j=({event:g})=>{const E=g;return e.jsx(xs,{customEvent:E,view:"month"})},b=({event:g})=>{const E=g;return e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("div",{className:"w-3/8 text-xs font-bold",children:E.patient}),e.jsx("div",{className:"w-1/8",children:e.jsx(xs,{customEvent:E,view:"week"})})]})},N=["#4E1511","#4E1325","#3D224E","#262A65","#003848","#0B3B2C","#1D3A24","#462100","#362B00","#29371D","#003A38"],A=["#FF977D","#FF949D","#D19DFF","#B1A9FF","#4CCCE6","#1FD8A4","#71D083","#FFA057","#F5E147","#BDE56C","#58D5BA"],S=g=>g[Math.floor(Math.random()*g.length)],P=()=>({style:{color:o==="dark"?"white":"black",backgroundColor:S(o==="dark"?N:A)}});return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"mt-4 w-full grid grid-rows-3 gap-3 mb-2 sm:flex sm:justify-between sm:items-center",children:[e.jsxs("div",{className:"flex justify-center sm:justify-start",children:[e.jsx(D,{variant:"outline",className:"mx-1",onClick:()=>n("month"),children:"Mes"}),e.jsx(D,{variant:"outline",className:"mx-1",onClick:()=>n("week"),children:"Semana"}),e.jsx(D,{variant:"outline",className:"mx-1",onClick:()=>n("day"),children:"Día"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("p",{className:"font-bold",children:ie(t,"dd MMMM yyyy",{locale:hs})})}),e.jsx("div",{className:"flex justify-center sm:justify-end",children:e.jsx(Y,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsxs(D,{onClick:()=>d("PREV"),variant:"outline",size:"icon",children:[e.jsx(xr,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Ir a la fecha anterior"})]})}),e.jsx(K,{children:"Ir a la fecha anterior"})]}),e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(D,{onClick:()=>d("TODAY"),variant:"outline",children:"Hoy"})}),e.jsx(K,{children:"Ir a la fecha de hoy"})]}),e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsxs(D,{onClick:()=>d("NEXT"),variant:"outline",size:"icon",children:[e.jsx(hr,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Ir a la fecha siguiente"})]})}),e.jsx(K,{children:"Ir a la fecha siguiente"})]})]})})})]}),e.jsx(On,{view:r,events:s,localizer:u,style:{height:"100vh",zIndex:40},views:["month","week","day"],min:qs(Fs(new Date,0),7),max:qs(Fs(new Date,0),18),toolbar:!1,culture:"es",formats:{eventTimeRangeFormat:({start:g,end:E})=>`${ie(g,"p")} – ${ie(E,"p")}`,eventTimeRangeStartFormat:({start:g})=>`${ie(g,"h:mma")} – `,eventTimeRangeEndFormat:({end:g})=>ie(g,"h:mma"),timeGutterFormat:g=>ie(g,"h:mm a")},components:{day:{event:v},month:{event:j},week:{event:b}},date:t,selectable:!1,eventPropGetter:P,onSelectSlot:g=>g.start&&h(g.start),onNavigate:(g,E)=>{i("date",g),a(g),n(E)},onView:g=>n(g)})]})}function Ur(s,r){return r?s.split(new RegExp(`(${r})`,"gi")).map((t,a)=>t.toLowerCase()===r.toLowerCase()?e.jsx("span",{className:"dark:text-blue-500 text-blue-800",children:t},a):t):s}function fd({onSelect:s,patient:r}){const[n,t]=x.useState(!1),[a,i]=x.useState(r||null),[l,o]=x.useState("");x.useEffect(()=>{i(r)},[r]);const{data:c=[],isFetching:u}=$({queryKey:["patients",l],queryFn:async()=>l===""?[]:(await(await F.patients.search.$get({query:{q:l}})).json()).data,staleTime:5*60*1e3}),d=r?[...c.filter(h=>h.id!==r.id),r]:c;return e.jsxs(Js,{open:n,onOpenChange:t,children:[e.jsx(Ys,{asChild:!0,children:e.jsxs(D,{variant:"outline",role:"combobox","aria-expanded":n,className:"w-full justify-between",children:[a?e.jsx("div",{className:"flex items-center",children:a==null?void 0:a.name}):"Buscar Paciente",e.jsx(mr,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(Es,{className:"w-full p-0",children:e.jsxs(Bs,{children:[e.jsxs("div",{className:"m-3 flex items-center",children:[e.jsx(Sn,{className:"h-5 w-5 mr-1"}),e.jsx(I,{placeholder:"Buscar",value:l,onChange:h=>o(h.target.value)})]}),e.jsxs(Sr,{children:[u&&e.jsx("div",{className:"w-5 flex m-auto h-5",children:e.jsx(Rs,{})}),e.jsx(Us,{children:"Sin resultados"}),e.jsx(Qs,{children:d.map(h=>e.jsxs(Ws,{value:h.id,onSelect:()=>{i(h),s(h),t(!1)},children:[e.jsxs("div",{className:"w-full font-bold flex space-x-3 justify-between",children:[e.jsx("p",{children:Ur(h.name,l)}),e.jsx("p",{children:Ur(h.fileId,l)})]}),e.jsx(as,{className:q("ml-auto h-4 w-4",(a==null?void 0:a.id)===h.id?"opacity-100":"opacity-0")})]},h.id))})]})]})})]})}function _a({patient:s}){const{control:r,setValue:n,watch:t,handleSubmit:a}=Ls(),i=H();x.useEffect(()=>{s!=null&&n("patient",s)},[s]);const l=R({mutationFn:async d=>{const v=await(await F.dates.$post({json:d})).json();if(v.success)return k.success("Cita agendada correctamente"),i.invalidateQueries({queryKey:["listDates"]}),i.invalidateQueries({queryKey:["upcomingDates"]}),v;k.error(v.error)},onError:d=>{k.error(d.message)}}),o=d=>{const[h,v,j]=d.split(":"),b=new Date;return b.setHours(parseInt(h)),b.setMinutes(parseInt(v)),b.setSeconds(parseInt(j)),b.setMilliseconds(0),b},c=d=>{const h=d.getHours().toString().padStart(2,"0"),v=d.getMinutes().toString().padStart(2,"0"),j=d.getSeconds().toString().padStart(2,"0");return`${h}:${v}:${j}`},u=async d=>{l.mutate(d)};return e.jsxs("form",{onSubmit:a(u),className:"w-full sm:p-4 sm:my-2 flex flex-col sm:flex-row justify-center sm:gap-4 items-center",children:[e.jsx("div",{className:"w-full sm:w-auto mb-4 sm:mb-0",children:e.jsx(w,{control:r,name:"patient",render:({field:d})=>e.jsxs(f,{children:[e.jsx(p,{children:"Paciente:"}),e.jsx(y,{children:e.jsx(fd,{patient:s||null,onSelect:h=>{d.onChange({id:h.id,name:h.name,fileId:h.fileId})}})}),e.jsx(C,{})]})})}),e.jsx("div",{className:"w-full sm:w-auto mb-4 sm:mb-0",children:e.jsx(w,{control:r,name:"date",render:()=>e.jsxs(f,{children:[e.jsx(p,{children:"Día Seleccionado:"}),e.jsx(y,{children:e.jsx("div",{children:e.jsx(er,{granularity:"day",locale:hs,weekStartsOn:0,displayFormat:{hour24:"dd/MM/yyyy"},onChange:d=>{d!=null&&n("date",d)},value:t("date")})})}),e.jsx(C,{})]})})}),e.jsx("div",{className:"w-full sm:w-auto mb-4 sm:mb-0",children:e.jsx(w,{control:r,name:"start",render:()=>e.jsxs(f,{children:[e.jsx(p,{children:"Desde:"}),e.jsx(y,{children:e.jsx(Ss,{hourCycle:12,granularity:"minute",date:o(t("start")),onChange:d=>{if(d==null)return;c(d),n("start",c(d));const h=d;h.setHours(h.getHours()+1),n("end",c(h))}})}),e.jsx(C,{})]})})}),e.jsx("div",{className:"w-full sm:w-auto mb-4 sm:mb-0",children:e.jsx(w,{control:r,name:"end",render:()=>e.jsxs(f,{children:[e.jsx(p,{children:"Hasta:"}),e.jsx(y,{children:e.jsx(Ss,{hourCycle:12,granularity:"minute",date:o(t("end")),onChange:d=>{d!=null&&n("end",c(d))}})}),e.jsx(C,{})]})})}),e.jsx("div",{className:"mt-8 w-full sm:w-auto mb-4 sm:mb-0 flex justify-end",children:e.jsx(T,{type:"submit",className:"justify-end",children:"Agendar"})})]})}const gd=m.object({id:m.string(),fileId:m.string(),name:m.string()}),Ka=m.object({date:m.date({required_error:"Este campo es requerido"}),start:m.string({required_error:"Este campo es requerido"}).time(),end:m.string({required_error:"Este campo es requerido"}).time(),patient:gd}).refine(s=>{const{start:r,date:n}=s,t=new Date(n),[a,i,l]=r.split(":");return t.setHours(parseInt(a),parseInt(i),parseInt(l)),t>=new Date},{message:"Hora incorrecta",path:["start"]}).refine(s=>{const{start:r,end:n,date:t}=s,a=new Date(t),[i,l,o]=n.split(":");return a.setHours(parseInt(i),parseInt(l),parseInt(o)),a>=new Date},{message:"Hora incorrecta",path:["end"]}).refine(s=>{const{start:r,end:n}=s,[t,a,i]=r.split(":"),l=new Date;l.setHours(parseInt(t),parseInt(a),parseInt(i));const[o,c,u]=n.split(":"),d=new Date;return d.setHours(parseInt(o),parseInt(c),parseInt(u)),l<d},{message:"Horarios incorrectos",path:["end"]}).refine(s=>{const{date:r}=s,{start:n,end:t}=s,[a,i,l]=n.split(":");return r.setHours(parseInt(a),parseInt(i),parseInt(l)),r>new Date},{message:"Fecha incorrecta",path:["date"]}).refine(s=>{const{start:r,end:n}=s,[t,a,i]=r.split(":"),l=new Date;l.setHours(parseInt(t),parseInt(a),parseInt(i));const[o,c,u]=n.split(":"),d=new Date;d.setHours(parseInt(o),parseInt(c),parseInt(u));const h=d.getTime()-l.getTime(),v=Math.round(h/1e3/60);return v>=30&&v<=120},{message:"La duración debe ser de entre 30 y 120 minutos",path:["end"]}).refine(s=>{const{start:r}=s,[n,t,a]=r.split(":"),i=new Date;i.setHours(parseInt(n),parseInt(t),parseInt(a));const l=new Date;l.setHours(6);const o=new Date;return o.setHours(18),o.setMinutes(30),i>=l&&i<=o},{message:"6:00 AM - 6:30 PM",path:["start"]}).refine(s=>{const{end:r}=s,[n,t,a]=r.split(":"),i=new Date;i.setHours(parseInt(n),parseInt(t),parseInt(a));const l=new Date;l.setHours(6),l.setMinutes(30);const o=new Date;return o.setHours(19),o.setMinutes(0),i>=l&&i<=o},{message:"6:30 AM - 7:00 PM",path:["end"]}),Ga=ee("/doctor/_doctor/dates")({component:vd,async validateSearch({id:s}){return s}});function vd(){const{id:s}=Ga.useSearch(),{data:r=[],isLoading:n,isError:t}=$({queryKey:["listDates"],queryFn:async()=>{const o=await(await F.dates.$get()).json();if(!o.success)throw new Error("Error al cargar la lista de citas");return o.data.map(u=>({...u,start:new Date(u.start),end:new Date(u.end)}))}}),{data:a}=$({queryKey:["patientSearch",s],queryFn:async()=>{if(!s)return null;const o=await(await F.patients.id.$get({query:{id:s}})).json();return o.success?o.data:null},enabled:!!s}),i=O({resolver:V(Ka),defaultValues:{start:"08:00:00",end:"09:00:00",date:new Date}});return e.jsx(gr,{...i,children:e.jsx("section",{className:"flex mx-2 max-h-screen",children:e.jsxs("div",{className:"w-full h-full mx-2",children:[e.jsxs("div",{className:"w-full   justify-center",children:[e.jsx("p",{className:"text-lg text-center font-medium",children:"Agendar una cita"}),e.jsx(_a,{patient:a||null})]}),e.jsx("div",{className:"mb-20",children:n?e.jsx("p",{children:"Loading..."}):t?e.jsx("p",{children:"Error al cargar los eventos"}):e.jsx(pd,{Events:r})}),e.jsx("div",{className:"mb-20"})]})})})}function yd({cordobas:s,dollars:r}){const[n,t]=x.useState(!1),a=pr({description:fr().min(1,"La descripción es requerida"),cordobas:Lr().max(s,"La cantidad supera el monto disponible").default(0),dollars:Lr().max(r,"La cantidad supera el monto disponible").default(0)}),i=O({resolver:V(a),defaultValues:{description:"",cordobas:0,dollars:0}}),l=H(),o=R({mutationFn:async d=>{const v=await(await F.services.expences.$patch({json:{description:d.description,cordobas:d.cordobas,dollars:d.dollars}})).json();v.success||k.error(v.message),k.success("Registrado correctamente"),l.invalidateQueries({queryKey:["money"]}),l.invalidateQueries({queryKey:["expenses"]}),t(!1)}});function c(d){o.mutate(d)}const u=d=>{const h=d.target.value;if(/^\d*$/.test(h))return i.trigger(),parseInt(h)||0};return e.jsxs(B,{open:n,onOpenChange:t,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsx(D,{children:"Nuevo Gasto"})})}),e.jsx(K,{children:e.jsx("p",{children:"Registrar un gasto"})})]})}),e.jsxs(_,{className:"sm:max-w-[425px]",children:[e.jsx(X,{children:e.jsx(Q,{children:"Nuevo Gasto"})}),e.jsx(G,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(c),className:"space-y-4",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{children:"Disponible"}),e.jsxs("div",{children:[e.jsxs("p",{children:["Cordobas: ",me(s)]}),e.jsxs("p",{children:["Dólares: ",Cs(r)]})]})]}),e.jsx(w,{control:i.control,name:"description",render:({field:d})=>e.jsxs(f,{children:[e.jsx(p,{children:"Descripción"}),e.jsx(y,{children:e.jsx(ae,{placeholder:"Descripción",...d})}),e.jsx(C,{})]})}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(w,{control:i.control,name:"cordobas",render:({field:d})=>e.jsxs(f,{className:"flex-1",children:[e.jsx(p,{htmlFor:"cordobasReceived",children:"Córdobas C$"}),e.jsx(y,{children:e.jsx(I,{id:"cordobasReceived",type:"text",inputMode:"numeric",pattern:"\\d*",value:d.value??"",onChange:h=>{const v=u(h);d.onChange(v)},className:" text-sm px-2"})}),e.jsx(C,{})]})}),e.jsx(w,{control:i.control,name:"dollars",render:({field:d})=>e.jsxs(f,{className:"flex-1",children:[e.jsx(p,{htmlFor:"dollarsReceived",children:"Dólares $"}),e.jsx(y,{children:e.jsx(I,{id:"dollarsReceived",type:"text",inputMode:"numeric",pattern:"\\d*",value:d.value??"",onChange:h=>{const v=u(h);d.onChange(v)},className:" text-sm px-2"})}),e.jsx(C,{})]})})]}),e.jsx(T,{loading:o.isPending,type:"submit",children:"Guardar"})]})})]})]})}const bd=ee("/assistant/_assistant/services")({component:Nd});function Nd(){const{data:s}=$({queryKey:["money"],queryFn:async()=>(await(await F.services.money.$get()).json()).data}),r={initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5}},n=[{title:"Apertura",value:me((s==null?void 0:s.change)??0)},{title:"Efectivo Total",value:me(((s==null?void 0:s.total)??0)+((s==null?void 0:s.change)??0))},{title:"Cordobas",value:me(((s==null?void 0:s.cordobas)??0)+((s==null?void 0:s.change)??0))},{title:"Dolares",value:Cs((s==null?void 0:s.dollars)??0)},{title:"Gastos del día",value:me((s==null?void 0:s.expencesTotal)??0)}];return e.jsxs("div",{className:"mx-4 sm:mx-8",children:[e.jsx("div",{className:"grid gap-3  grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 my-6",children:n.map((t,a)=>e.jsx(Ce.div,{...r,transition:{delay:a*.1},children:e.jsxs(he,{className:"h-full",children:[e.jsx(je,{className:"p-3",children:e.jsx(ve,{className:"text-sm font-medium text-primary",children:t.title})}),e.jsx(pe,{className:"p-3 pt-0",children:t.value!==void 0?e.jsx("p",{className:"text-lg font-semibold text-secondary-foreground",children:t.value}):e.jsx("p",{className:"text-lg font-semibold text-muted"})})]})},t.title))}),e.jsxs("div",{className:"w-full mt-20",children:[e.jsx("h2",{className:"mb-4 text-2xl font-bold",children:"Pendientes"}),e.jsx(oa,{})]}),e.jsxs("div",{className:"flex w-full mt-20 justify-between gap-2 ",children:[e.jsx("h2",{className:"mb-4 text-2xl font-bold",children:"Gastos del día"}),e.jsx(yd,{cordobas:((s==null?void 0:s.cordobas)??0)+((s==null?void 0:s.change)??0),dollars:(s==null?void 0:s.dollars)??0})]}),e.jsx("div",{className:"mb-20",children:e.jsx(Oa,{})})]})}const cr=ee("/assistant/_assistant/queries")({component:wd,async validateSearch({id:s}){return s}});function wd(){const{querieId:s}=cr.useSearch(),{data:r}=cr.useRouteContext(),{data:n,isPending:t,error:a}=$({queryKey:["pediatricQuery",s],queryFn:async()=>{if(!s||r.assistant.specialtie!=="PEDIATRIA")return null;const l=await(await F.queries.data.$get({query:{querieId:s}})).json();if(!l.success)throw new Error(l.error);return l.data}});return r.assistant.specialtie!=="PEDIATRIA"?e.jsx("div",{className:" flex justify-center items-center",children:e.jsx("p",{className:"bg-destructive text-sm font-semibold p-4 rounded-sm",children:"No tienes acceso"})}):e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center items-center",children:e.jsx("p",{className:"text-2xl font-semibold",children:"Brindar Atención"})}),a&&e.jsx("div",{className:" flex justify-center items-center",children:e.jsx("p",{className:"bg-destructive text-sm font-semibold p-4 rounded-sm",children:"Error al cargar consulta"})}),t&&e.jsx("div",{children:"Cargando consulta..."}),!t&&n&&e.jsxs("section",{className:"p-6 sm:m-8 mx-6",children:[e.jsxs("div",{className:"flex  justify-center sm:space-x-8 items-center  text-center sm:text-left",children:[e.jsxs("div",{className:"flex items-center space-x-2 ",children:[e.jsx("div",{className:"mr-4 flex items-end",children:e.jsx(qr,{patientName:n.name,patientId:n.patientId,size:"24"})}),e.jsxs("div",{className:"",children:[e.jsx(Z,{className:"text-sm font-medium",children:"Paciente:"}),e.jsx("span",{className:"block text-xl font-semibold",children:n.name})]})]}),e.jsxs("div",{className:"",children:[e.jsx(Z,{className:"text-sm font-medium",children:"Expediente:"}),e.jsx("span",{className:"block text-xl font-semibold",children:n.idFile})]}),n.emergency&&e.jsx("div",{className:"",children:e.jsx(Z,{className:"mt-6 inline-block bg-destructive text-lg font-semibold py-1 px-3 rounded-full",children:"Emergencia"})})]}),e.jsx("div",{className:"mt-6 flex justify-center",children:n&&e.jsx(ma,{querieId:n.id})})]})]})}const Ba=s=>{const r=[{accessorKey:"name",header:({column:n})=>e.jsxs(D,{variant:"ghost",onClick:()=>n.toggleSorting(n.getIsSorted()==="asc"),children:["Nombre",e.jsx(ys,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"sex",header:"Sexo"},{accessorKey:"origin",header:"Origen"},{accessorKey:"date",header:"Edad",cell:({row:n})=>Sd(n)},{accessorKey:"date",header:"Nacimiento",cell:({row:n})=>Cd(n)},{accessorKey:"address",header:"Dirección"}];return s==="general"&&(r.push({accessorKey:"phone",header:"Teléfono",cell:({row:n})=>{const t=n.original.phone;return t?fs(t.toString()):e.jsx("div",{})}}),r.push({accessorKey:"dni",header:"Cédula"})),r.push({id:"id",header:"Acciones",cell:({row:n})=>Pd(n)}),r};function Cd(s){const n=new Date(s.getValue("date")).toLocaleDateString();return e.jsx("div",{className:"font-medium",children:n})}function Sd(s){const r=new Date(s.getValue("date")),n=new Date;let t=n.getFullYear()-r.getFullYear();return(n.getMonth()<r.getMonth()||n.getMonth()===r.getMonth()&&n.getDate()<r.getDate())&&t--,t}function Pd(s){return e.jsxs("div",{className:"flex space-x-2",children:[kd(s),Ed(s),e.jsx(Gs,{id:s.original.id})]})}function kd(s){const r=s.original;return e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{children:e.jsx(Me,{to:`/assistant/file?id=${r.fileId}`,children:e.jsx(D,{variant:"outline",size:"icon",children:e.jsx(jr,{})})})}),e.jsx(K,{children:"Ver Expediente"})]})})}function Ed(s){const r=s.original;return e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{children:e.jsx(Me,{to:`/assistant/dates?id=${r.id}`,children:e.jsx(D,{variant:"outline",size:"icon",children:e.jsx(kn,{})})})}),e.jsx(K,{children:"Agendar una cita"})]})})}const Dd=Ba("pediatric"),Ad=Ba("general"),Ua=ee("/assistant/_assistant/patients")({component:Id});function Id(){const{data:s}=Ua.useRouteContext(),r=(s==null?void 0:s.assistant.specialtie)==="GENERAL"?Ad:Dd,{data:n}=$({queryKey:["listPatients"],queryFn:qd});return e.jsxs(e.Fragment,{children:[(s==null?void 0:s.assistant.specialtie)==="GENERAL"?e.jsx(za,{}):e.jsx(La,{}),e.jsx("div",{className:"mt-4 mx-3 sm:mx-5",children:n&&n.length>0&&e.jsx(sr,{columns:r,data:n})})]})}async function qd(){const r=await(await F.patients.all.$get()).json();if(!r.success)throw new Error("Error al cargar la lista de pacientes");return r.data}const dr=ee("/assistant/_assistant/file")({component:Fd,async validateSearch({id:s}){return s}});function Oe(s){return e.jsx("span",{className:"text-ring font-bold",children:s})}function Fd(){const{id:s}=dr.useSearch(),{data:r}=dr.useRouteContext(),{data:n,isLoading:t,error:a}=$({queryKey:["file",s],queryFn:async()=>{const l=await(await F.patients.file.$get({query:{id:s}})).json();if(!l.success)throw new Error("Error al cargar el expediente");return l.data}});return t?e.jsx("div",{children:"Loading..."}):a||!n?e.jsx("div",{children:a==null?void 0:a.message}):e.jsxs("div",{className:"grid gap-6 px-4 pb-4 md:px-6 md:pb-6 lg:px-8 lg:pb-8",children:[e.jsxs("div",{className:"sm:p-6 p-4 rounded-sm border border-customborder",children:[e.jsx("div",{children:e.jsx("p",{children:"Información del Paciente"})}),e.jsx("div",{className:"grid gap-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 md:grid-cols-5",children:[e.jsxs("div",{className:"grid gap-1",children:[e.jsx(Z,{className:"text-sm font-semibold text-ring",children:"Nombre"}),Oe(n.name)]}),e.jsxs("div",{className:"grid gap-1",children:[e.jsx(Z,{className:"text-sm font-semibold text-ring",children:"Expediente"}),Oe(n.fileId)]}),e.jsxs("div",{className:"grid gap-1",children:[e.jsx(Z,{className:"text-sm font-semibold text-ring",children:"Sexo"}),Oe(n.sex)]}),e.jsxs("div",{className:"grid gap-1",children:[e.jsx(Z,{className:"text-sm font-semibold text-ring",children:"Edad"}),Oe(n.age)]}),e.jsxs("div",{className:"grid gap-1",children:[e.jsx(Z,{className:"text-sm font-semibold text-ring",children:"Fecha de Nacimiento"}),Oe(ie(new Date(n==null?void 0:n.date),"dd/MM/yyyy"))]}),e.jsxs("div",{className:"grid gap-1",children:[e.jsx(Z,{className:"text-sm font-semibold text-ring",children:"Dirección"}),Oe(n.address)]}),e.jsxs("div",{className:"grid gap-1",children:[e.jsx(Z,{className:"text-sm font-semibold text-ring",children:"Nacionalidad"}),Oe(n.country)]}),e.jsxs("div",{className:"grid gap-1",children:[e.jsx(Z,{className:"text-sm font-semibold text-ring",children:"Departamento, Municipio:"}),Oe(`${n.dapartment}, ${n.municipaly}`)]}),r.assistant.specialtie==="GENERAL"&&n.dni&&e.jsxs("div",{className:"grid gap-1",children:[e.jsx(Z,{className:"text-sm font-semibold text-ring",children:"Cédula"}),Oe(n.dni)]}),r.assistant.specialtie==="GENERAL"&&n.phone&&e.jsxs("div",{className:"grid gap-1",children:[e.jsx(Z,{className:"text-sm font-semibold text-ring",children:"Telefono"}),Oe(n.phone)]})]})})]}),e.jsxs("div",{className:"sm:p-6 p-4 rounded-sm border border-customborder",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{children:"Familiares"}),e.jsx(Rr,{id:n.id})]}),e.jsx("div",{children:e.jsx(Tr,{id:n.id})})]})]})}function Md({Events:s}){const[r,n]=x.useState("week"),[t,a]=x.useState(new Date),{setValue:i,watch:l}=Ls(),{theme:o}=vr(),u=Vn({format:ie,parse:qn,startOfWeek:()=>"Sunday",getDay:Fn,locales:{es:hs}});x.useEffect(()=>{const g=()=>{window.innerWidth<768?n("day"):n("week")};return window.addEventListener("resize",g),g(),()=>{window.removeEventListener("resize",g)}},[]);const d=g=>{switch(g){case"NEXT":a(E=>r==="month"?Tn(E,1):r==="week"?zn(E,1):Ln(E,1));break;case"PREV":a(E=>r==="month"?Mn(E,1):r==="week"?Rn(E,1):$n(E,1));break;case"TODAY":a(new Date);break}},h=g=>{const E=new Date;new Date(g).setHours(0,0,0,0)>=E.setHours(0,0,0,0)&&a(new Date(g))};x.useEffect(()=>{const g=l("date");g&&a(new Date(g))},[l("date")]);const v=({event:g})=>{const E=g;return e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center relative",children:[e.jsx("p",{className:"font-bold text-sm",children:E.patient}),e.jsxs("div",{className:"flex items-center gap-1 md:absolute md:right-0",children:[e.jsx(Ns,{id:E.id}),e.jsx(xs,{customEvent:E,view:"day"})]})]})},j=({event:g})=>{const E=g;return e.jsx(xs,{customEvent:E,view:"month"})},b=({event:g})=>{const E=g;return e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("div",{className:"w-3/8 text-xs font-bold",children:E.patient}),e.jsx("div",{className:"w-1/8",children:e.jsx(xs,{customEvent:E,view:"week"})})]})},N=["#4E1511","#4E1325","#3D224E","#262A65","#003848","#0B3B2C","#1D3A24","#462100","#362B00","#29371D","#003A38"],A=["#FF977D","#FF949D","#D19DFF","#B1A9FF","#4CCCE6","#1FD8A4","#71D083","#FFA057","#F5E147","#BDE56C","#58D5BA"],S=g=>g[Math.floor(Math.random()*g.length)],P=()=>({style:{color:o==="dark"?"white":"black",backgroundColor:S(o==="dark"?N:A)}});return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"mt-4 w-full grid grid-rows-3 gap-3 mb-2 sm:flex sm:justify-between sm:items-center",children:[e.jsxs("div",{className:"flex justify-center sm:justify-start",children:[e.jsx(D,{variant:"outline",className:"mx-1",onClick:()=>n("month"),children:"Mes"}),e.jsx(D,{variant:"outline",className:"mx-1",onClick:()=>n("week"),children:"Semana"}),e.jsx(D,{variant:"outline",className:"mx-1",onClick:()=>n("day"),children:"Día"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("p",{className:"font-bold",children:ie(t,"dd MMMM yyyy")})}),e.jsxs("div",{className:"flex justify-center sm:justify-end",children:[e.jsx(D,{variant:"outline",size:"icon",className:"mx-1",onClick:()=>d("PREV"),children:e.jsx(xr,{})}),e.jsx(D,{variant:"outline",className:"mx-1",onClick:()=>d("TODAY"),children:"Hoy"}),e.jsx(D,{variant:"outline",size:"icon",className:"mx-1",onClick:()=>d("NEXT"),children:e.jsx(hr,{})})]})]}),e.jsx(On,{view:r,events:s,localizer:u,style:{height:"100vh",zIndex:40},views:["month","week","day"],min:qs(Fs(new Date,0),7),max:qs(Fs(new Date,0),18),toolbar:!1,culture:"es",formats:{eventTimeRangeFormat:({start:g,end:E})=>`${ie(g,"p")} – ${ie(E,"p")}`,eventTimeRangeStartFormat:({start:g})=>`${ie(g,"h:mma")} – `,eventTimeRangeEndFormat:({end:g})=>ie(g,"h:mma"),timeGutterFormat:g=>ie(g,"h:mm a")},components:{day:{event:v},month:{event:j},week:{event:b}},date:t,selectable:!1,eventPropGetter:P,onSelectSlot:g=>g.start&&h(g.start),onNavigate:(g,E)=>{i("date",g),a(g),n(E)},onView:g=>n(g)})]})}const Qa=ee("/assistant/_assistant/dates")({component:Rd,async validateSearch({id:s}){return s}});function Rd(){const{id:s}=Qa.useSearch(),{data:r=[],isLoading:n,isError:t}=$({queryKey:["listDates"],queryFn:async()=>{const o=await(await F.dates.$get()).json();if(!o.success)throw new Error("Error al cargar la lista de citas");return o.data.map(u=>({...u,start:new Date(u.start),end:new Date(u.end)}))}}),{data:a}=$({queryKey:["patientSearch",s],queryFn:async()=>{if(!s)return null;const o=await(await F.patients.id.$get({query:{id:s}})).json();return o.success?o.data:null},enabled:!!s}),i=O({resolver:V(Ka),defaultValues:{start:"08:00:00",end:"09:00:00",date:new Date}});return e.jsx(gr,{...i,children:e.jsx("section",{className:"flex mx-2 max-h-screen",children:e.jsxs("div",{className:"w-full h-full mx-2",children:[e.jsxs("div",{className:"w-full   justify-center",children:[e.jsx("p",{className:"text-lg text-center font-medium",children:"Agendar una cita"}),e.jsx(_a,{patient:a||null})]}),e.jsx("div",{className:"mb-20",children:n?e.jsx("p",{children:"Loading..."}):t?e.jsx("p",{children:"Error al cargar los eventos"}):e.jsx(Md,{Events:r})}),e.jsx("div",{className:"mb-20"})]})})})}function $d(){const[s,r]=x.useState(!1),n=H(),t=O({resolver:V(us),defaultValues:{email:"",password:"",name:"",rol:"DOCTOR"}}),a=R({mutationFn:async l=>{const c=await(await F.users.register.$post({json:l})).json();if(!c.success)throw new Error(c.error);return c},onSuccess:()=>{k.success("Usuario agregado correctamente"),n.invalidateQueries({queryKey:["userList"]}),r(!1)},onError:l=>{k.error(`Error: ${l.message}`),n.invalidateQueries({queryKey:["userList"]}),r(!1)}}),i=l=>{a.mutate(l)};return e.jsxs(B,{open:s,onOpenChange:r,children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsxs(D,{variant:"outline",children:[e.jsx(Se,{className:"mr-2 h-4 w-4"}),"Agregar usuario"]})})}),e.jsx(K,{children:"Agregar usuario"})]})}),e.jsxs(_,{children:[e.jsx(X,{children:e.jsx(Q,{children:"Agregar Usuario"})}),e.jsx(G,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(i),children:[e.jsx("div",{className:"my-2",children:e.jsx(w,{control:t.control,name:"name",render:({field:l})=>e.jsxs(f,{children:[e.jsx(p,{children:"Nombre"}),e.jsx(y,{children:e.jsx(I,{...l,disabled:a.isPending,placeholder:"Nombres y Apellidos",type:"text"})}),e.jsx(C,{})]})})}),e.jsx("div",{className:"my-2",children:e.jsx(w,{control:t.control,name:"email",render:({field:l})=>e.jsxs(f,{children:[e.jsx(p,{children:"Email"}),e.jsx(y,{children:e.jsx(I,{...l,disabled:a.isPending,placeholder:"tu@email.com",type:"email"})}),e.jsx(C,{})]})})}),e.jsx("div",{className:"my-2",children:e.jsx(w,{control:t.control,name:"password",render:({field:l})=>e.jsxs(f,{children:[e.jsx(p,{children:"Clave"}),e.jsx(y,{children:e.jsx(I,{...l,disabled:a.isPending,placeholder:"******",type:"password"})}),e.jsx(C,{})]})})}),e.jsx("div",{className:"my-2",children:e.jsx(w,{control:t.control,name:"rol",render:({field:l})=>e.jsxs(f,{children:[e.jsx(p,{children:"Rol"}),e.jsx(y,{children:e.jsxs(Fe,{onValueChange:l.onChange,defaultValue:l.value,disabled:a.isPending,className:"flex gap-5",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{value:"DOCTOR"}),e.jsx(p,{children:"Doctor"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(oe,{value:"ASSISTANT"}),e.jsx(p,{children:"Asistente"})]})]})})]})})}),e.jsx(T,{loading:a.isPending,children:"Guardar"})]})})]})]})}const Td=({user:s})=>{const r=H(),n=R({mutationFn:async({id:a,status:i})=>{const o=await(await F.users.change.$patch({json:{id:a,status:i}})).json();if(!o.success)throw new Error(o.error);return o},onSuccess:()=>{r.invalidateQueries({queryKey:["userList"]}),k.success("Estado actualizado correctamente")},onError:a=>{k.error(`Error: ${a.message}`)}}),t=a=>{a.preventDefault(),n.mutate({id:s.id,status:!s.status})};return e.jsxs(B,{children:[e.jsx(Y,{children:e.jsxs(W,{children:[e.jsx(J,{asChild:!0,children:e.jsx(U,{asChild:!0,children:e.jsx(D,{variant:s.status?"destructive":"default",size:"icon",children:s.status?e.jsx(En,{}):e.jsx(Nn,{})})})}),e.jsx(K,{children:s.status?"Deshabilitar usuario":"Habilitar usuario"})]})}),e.jsx(_,{children:e.jsxs("form",{className:"my-5",onSubmit:t,children:[e.jsx(X,{children:e.jsxs(Q,{children:["¿Seguro que ",s.status?"deshabilitarás":"habilitarás"," al usuario ",e.jsx("strong",{children:s.name}),"?"]})}),e.jsx("p",{className:"my-5",children:s.status?"Al deshabilitar al usuario no tendrá acceso a la aplicación":"Al habilitar al usuario tendrá acceso nuevamente a la aplicación"}),e.jsx(ne,{children:e.jsx(T,{loading:n.isPending,children:s.status?"Deshabilitar":"Habilitar"})})]})})]})},zd=()=>[{accessorKey:"name",header:({column:s})=>e.jsxs(D,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:["Nombre",e.jsx(ys,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"email",header:"Email"},{accessorKey:"role",header:"Rol",cell:({row:s})=>{const r=s.original;let n;return r.role==="ADMIN"&&(n="Administrador"),r.role==="DOCTOR"&&(n="Doctor"),r.role==="ASSISTANT"&&(n="Asistente"),e.jsx("p",{children:n})}},{id:"actions",cell:({row:s})=>{const r=s.original;return e.jsx(Td,{user:r})}}],Ld=ee("/admin/_admin/users")({component:Od});async function Vd(){return await(await F.users.$get()).json()}function Od(){const{isPending:s,error:r,data:n}=$({queryKey:["userList"],queryFn:Vd});return e.jsx("section",{className:"mb-20",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx("div",{className:"w-1/2",children:e.jsx(Z,{className:"mb-6 text-3xl font-bold",children:"Usuarios"})}),e.jsx("div",{className:"w-1/2 flex justify-end",children:e.jsx($d,{})})]}),e.jsxs("div",{className:"my-4",children:[s&&e.jsx("div",{children:"cargando..."}),r&&e.jsx("div",{children:r.message}),n&&n.list&&e.jsx(sr,{columns:zd(),data:n.list})]})]})})}const Hd=ee("/admin/_admin/settings")({component:_d});function _d(){return e.jsxs("div",{className:"flex flex-col items-center justify-center mt-10 sm:mt-20 px-4  sm:px-6 lg:px-8",children:[e.jsx("p",{className:"font-bold text-3xl mb-4",children:"Mantenimiento"}),e.jsxs("div",{className:"max-w-md w-full space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("img",{src:"/down.svg",width:"64",height:"64",alt:"Backup",className:"w-16 h-16"}),e.jsxs(D,{children:[e.jsxs("svg",{className:"mr-2",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"7 10 12 15 17 10"}),e.jsx("line",{x1:"12",x2:"12",y1:"15",y2:"3"})]}),"Respaldar Base de Datos"]})]}),e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("img",{src:"/up.svg",width:"64",height:"64",alt:"Restore",className:"w-16 h-16"}),e.jsxs(D,{variant:"secondary",children:[e.jsxs("svg",{className:"mr-2",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("polyline",{points:"17 8 12 3 7 8"}),e.jsx("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),"Restaurar Base de Datos"]})]})]})]})}const Kd=ee("/profile")(),Gd=ee("/doctor")(),Bd=ee("/assistant")(),Ud=ee("/admin")(),Wa=Kd.update({path:"/profile",getParentRoute:()=>Te}),Ja=Gd.update({path:"/doctor",getParentRoute:()=>Te}),Ya=Bd.update({path:"/assistant",getParentRoute:()=>Te}),Za=Ud.update({path:"/admin",getParentRoute:()=>Te}),Qd=Kn.update({path:"/verify",getParentRoute:()=>Te}),Wd=zi.update({path:"/restricted",getParentRoute:()=>Te}),Jd=Qn.update({path:"/reset",getParentRoute:()=>Te}),Yd=Wi.update({path:"/login",getParentRoute:()=>Te}),Zd=Yi.update({path:"/forgot",getParentRoute:()=>Te}),Xd=Xi.update({path:"/",getParentRoute:()=>Te}),Xa=rl.update({id:"/_profile",getParentRoute:()=>Wa}),Ge=ml.update({id:"/_doctor",getParentRoute:()=>Ja}),gs=hl.update({id:"/_assistant",getParentRoute:()=>Ya}),zr=jl.update({id:"/_admin",getParentRoute:()=>Za}),eu=Fl.update({path:"/me",getParentRoute:()=>Xa}),su=Gl.update({path:"/upcoming",getParentRoute:()=>Ge}),ru=so.update({path:"/services",getParentRoute:()=>Ge}),nu=ir.update({path:"/queries",getParentRoute:()=>Ge}),au=Ma.update({path:"/pediatric",getParentRoute:()=>Ge}),tu=Va.update({path:"/patients",getParentRoute:()=>Ge}),iu=or.update({path:"/general",getParentRoute:()=>Ge}),lu=id.update({path:"/expences",getParentRoute:()=>Ge}),ou=xd.update({path:"/drugs",getParentRoute:()=>Ge}),cu=Ga.update({path:"/dates",getParentRoute:()=>Ge}),du=bd.update({path:"/services",getParentRoute:()=>gs}),uu=cr.update({path:"/queries",getParentRoute:()=>gs}),mu=Ua.update({path:"/patients",getParentRoute:()=>gs}),xu=dr.update({path:"/file",getParentRoute:()=>gs}),hu=Qa.update({path:"/dates",getParentRoute:()=>gs}),ju=Ld.update({path:"/users",getParentRoute:()=>zr}),pu=Hd.update({path:"/settings",getParentRoute:()=>zr}),fu=Te.addChildren({IndexRoute:Xd,ForgotRoute:Zd,LoginRoute:Yd,ResetRoute:Jd,RestrictedRoute:Wd,VerifyRoute:Qd,AdminRoute:Za.addChildren({AdminAdminRoute:zr.addChildren({AdminAdminSettingsRoute:pu,AdminAdminUsersRoute:ju})}),AssistantRoute:Ya.addChildren({AssistantAssistantRoute:gs.addChildren({AssistantAssistantDatesRoute:hu,AssistantAssistantFileRoute:xu,AssistantAssistantPatientsRoute:mu,AssistantAssistantQueriesRoute:uu,AssistantAssistantServicesRoute:du})}),DoctorRoute:Ja.addChildren({DoctorDoctorRoute:Ge.addChildren({DoctorDoctorDatesRoute:cu,DoctorDoctorDrugsRoute:ou,DoctorDoctorExpencesRoute:lu,DoctorDoctorGeneralRoute:iu,DoctorDoctorPatientsRoute:tu,DoctorDoctorPediatricRoute:au,DoctorDoctorQueriesRoute:nu,DoctorDoctorServicesRoute:ru,DoctorDoctorUpcomingRoute:su})}),ProfileRoute:Wa.addChildren({ProfileProfileRoute:Xa.addChildren({ProfileProfileMeRoute:eu})})}),et=new ot,gu=ct({routeTree:fu}),vu={queryClient:et};st.createRoot(document.getElementById("root")).render(e.jsx(Ts.StrictMode,{children:e.jsx(dt,{client:et,children:e.jsxs(Ai,{children:[e.jsx(ut,{router:gu,context:vu}),e.jsx(di,{position:"top-right",richColors:!0})]})})}));
