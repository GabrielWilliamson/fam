import{r as t}from"./react-Br03UGga.js";var Pe=Object.defineProperty,Me=Object.defineProperties,Ce=Object.getOwnPropertyDescriptors,K=Object.getOwnPropertySymbols,pe=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable,se=(r,l,a)=>l in r?Pe(r,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[l]=a,xe=(r,l)=>{for(var a in l||(l={}))pe.call(l,a)&&se(r,a,l[a]);if(K)for(var a of K(l))de.call(l,a)&&se(r,a,l[a]);return r},ke=(r,l)=>Me(r,Ce(l)),Re=(r,l)=>{var a={};for(var s in r)pe.call(r,s)&&l.indexOf(s)<0&&(a[s]=r[s]);if(r!=null&&K)for(var s of K(r))l.indexOf(s)<0&&de.call(r,s)&&(a[s]=r[s]);return a},De="^\\d+$",Le="^[a-zA-Z0-9]+$";function je(r){let l=setTimeout(r,0),a=setTimeout(r,10),s=setTimeout(r,50);return[l,a,s]}function We(r){let l=t.useRef();return t.useEffect(()=>{l.current=r}),l.current}var Ae=18,me=40,Be=`${me}px`,Oe=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function Te({containerRef:r,inputRef:l,pushPasswordManagerStrategy:a,isFocused:s}){let W=t.useRef({done:!1,refocused:!1}),[c,G]=t.useState(!1),[S,N]=t.useState(!1),[A,V]=t.useState(!1),Q=t.useMemo(()=>a==="none"?!1:(a==="increase-width"||a==="experimental-no-flickering")&&c&&S,[c,S,a]),M=t.useCallback(()=>{let f=r.current,d=l.current;if(!f||!d||A||a==="none")return;let o=f,b=o.getBoundingClientRect().left+o.offsetWidth,B=o.getBoundingClientRect().top+o.offsetHeight/2,q=b-Ae,U=B;if(!(document.querySelectorAll(Oe).length===0&&document.elementFromPoint(q,U)===f)&&(G(!0),V(!0),!W.current.refocused&&document.activeElement===d)){let F=[d.selectionStart,d.selectionEnd];d.blur(),d.focus(),d.setSelectionRange(F[0],F[1]),W.current.refocused=!0}},[r,l,A,a]);return t.useEffect(()=>{let f=r.current;if(!f||a==="none")return;function d(){let b=window.innerWidth-f.getBoundingClientRect().right;N(b>=me)}d();let o=setInterval(d,1e3);return()=>{clearInterval(o)}},[r,a]),t.useEffect(()=>{let f=s||document.activeElement===l.current;if(a==="none"||!f)return;let d=setTimeout(M,0),o=setTimeout(M,2e3),b=setTimeout(M,5e3),B=setTimeout(()=>{V(!0)},6e3);return()=>{clearTimeout(d),clearTimeout(o),clearTimeout(b),clearTimeout(B)}},[l,s,a,M]),{hasPWMBadge:c,willPushPWMBadge:Q,PWM_BADGE_SPACE_WIDTH:Be}}var _e=t.createContext({}),Fe=t.forwardRef((r,l)=>{var a=r,{value:s,onChange:W,maxLength:c,textAlign:G="left",pattern:S=De,inputMode:N="numeric",onComplete:A,pushPasswordManagerStrategy:V="increase-width",containerClassName:Q,noScriptCSSFallback:M=Ie,render:f,children:d}=a,o=Re(a,["value","onChange","maxLength","textAlign","pattern","inputMode","onComplete","pushPasswordManagerStrategy","containerClassName","noScriptCSSFallback","render","children"]),b,B,q,U,F;let[fe,ve]=t.useState(typeof o.defaultValue=="string"?o.defaultValue:""),p=s??fe,C=We(p),I=t.useCallback(e=>{W==null||W(e),ve(e)},[W]),h=t.useMemo(()=>S?typeof S=="string"?new RegExp(S):S:null,[S]),u=t.useRef(null),X=t.useRef(null),Y=t.useRef({value:p,onChange:I,isIOS:typeof window<"u"&&((B=(b=window==null?void 0:window.CSS)==null?void 0:b.supports)==null?void 0:B.call(b,"-webkit-touch-callout","none"))}),J=t.useRef({prev:[(q=u.current)==null?void 0:q.selectionStart,(U=u.current)==null?void 0:U.selectionEnd,(F=u.current)==null?void 0:F.selectionDirection]});t.useImperativeHandle(l,()=>u.current,[]),t.useEffect(()=>{let e=u.current,n=X.current;if(!e||!n)return;Y.current.value!==e.value&&Y.current.onChange(e.value),J.current.prev=[e.selectionStart,e.selectionEnd,e.selectionDirection];function m(){if(document.activeElement!==e){L(null),$(null);return}let i=e.selectionStart,g=e.selectionEnd,E=e.selectionDirection,k=e.maxLength,R=e.value,_=J.current.prev,y=-1,P=-1,D;if(R.length!==0&&i!==null&&g!==null){let Se=i===g,Ee=i===R.length&&R.length<k;if(Se&&!Ee){let j=i;if(j===0)y=0,P=1,D="forward";else if(j===k)y=j-1,P=j,D="backward";else if(k>1&&R.length>1){let te=0;if(_[0]!==null&&_[1]!==null){D=j<_[1]?"backward":"forward";let ye=_[0]===_[1]&&_[0]<k;D==="backward"&&!ye&&(te=-1)}y=te+j,P=te+j+1}}y!==-1&&P!==-1&&y!==P&&u.current.setSelectionRange(y,P,D)}let ue=y!==-1?y:i,ce=P!==-1?P:g,we=D??E;L(ue),$(ce),J.current.prev=[ue,ce,we]}if(document.addEventListener("selectionchange",m,{capture:!0}),m(),document.activeElement===e&&Z(!0),!document.getElementById("input-otp-style")){let i=document.createElement("style");if(i.id="input-otp-style",document.head.appendChild(i),i.sheet){let g="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";z(i.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),z(i.sheet,`[data-input-otp]:autofill { ${g} }`),z(i.sheet,`[data-input-otp]:-webkit-autofill { ${g} }`),z(i.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),z(i.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let v=()=>{n&&n.style.setProperty("--root-height",`${e.clientHeight}px`)};v();let w=new ResizeObserver(v);return w.observe(e),()=>{document.removeEventListener("selectionchange",m,{capture:!0}),w.disconnect()}},[]);let[ne,re]=t.useState(!1),[H,Z]=t.useState(!1),[x,L]=t.useState(null),[O,$]=t.useState(null);t.useEffect(()=>{je(()=>{var e,n,m,v;(e=u.current)==null||e.dispatchEvent(new Event("input"));let w=(n=u.current)==null?void 0:n.selectionStart,i=(m=u.current)==null?void 0:m.selectionEnd,g=(v=u.current)==null?void 0:v.selectionDirection;w!==null&&i!==null&&(L(w),$(i),J.current.prev=[w,i,g])})},[p,H]),t.useEffect(()=>{C!==void 0&&p!==C&&C.length<c&&p.length===c&&(A==null||A(p))},[c,A,C,p]);let T=Te({containerRef:X,inputRef:u,pushPasswordManagerStrategy:V,isFocused:H}),le=t.useCallback(e=>{let n=e.currentTarget.value.slice(0,c);if(n.length>0&&h&&!h.test(n)){e.preventDefault();return}typeof C=="string"&&n.length<C.length&&document.dispatchEvent(new Event("selectionchange")),I(n)},[c,I,C,h]),ae=t.useCallback(()=>{var e;if(u.current){let n=Math.min(u.current.value.length,c-1),m=u.current.value.length;(e=u.current)==null||e.setSelectionRange(n,m),L(n),$(m)}Z(!0)},[c]),oe=t.useCallback(e=>{var n,m;let v=u.current;if(!Y.current.isIOS||!e.clipboardData||!v)return;let w=e.clipboardData.getData("text/plain");e.preventDefault();let i=(n=u.current)==null?void 0:n.selectionStart,g=(m=u.current)==null?void 0:m.selectionEnd,E=(i!==g?p.slice(0,i)+w+p.slice(g):p.slice(0,i)+w+p.slice(i)).slice(0,c);if(E.length>0&&h&&!h.test(E))return;v.value=E,I(E);let k=Math.min(E.length,c-1),R=E.length;v.setSelectionRange(k,R),L(k),$(R)},[c,I,h,p]),ge=t.useMemo(()=>({position:"relative",cursor:o.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[o.disabled]),ie=t.useMemo(()=>({position:"absolute",inset:0,width:T.willPushPWMBadge?`calc(100% + ${T.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:T.willPushPWMBadge?`inset(0 ${T.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:G,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[T.PWM_BADGE_SPACE_WIDTH,T.willPushPWMBadge,G]),he=t.useMemo(()=>t.createElement("input",ke(xe({autoComplete:o.autoComplete||"one-time-code"},o),{"data-input-otp":!0,"data-input-otp-mss":x,"data-input-otp-mse":O,inputMode:N,pattern:h==null?void 0:h.source,style:ie,maxLength:c,value:p,ref:u,onPaste:e=>{var n;oe(e),(n=o.onPaste)==null||n.call(o,e)},onChange:le,onMouseOver:e=>{var n;re(!0),(n=o.onMouseOver)==null||n.call(o,e)},onMouseLeave:e=>{var n;re(!1),(n=o.onMouseLeave)==null||n.call(o,e)},onFocus:e=>{var n;ae(),(n=o.onFocus)==null||n.call(o,e)},onBlur:e=>{var n;Z(!1),(n=o.onBlur)==null||n.call(o,e)}})),[le,ae,oe,N,ie,c,O,x,o,h==null?void 0:h.source,p]),ee=t.useMemo(()=>({slots:Array.from({length:c}).map((e,n)=>{let m=H&&x!==null&&O!==null&&(x===O&&n===x||n>=x&&n<O),v=p[n]!==void 0?p[n]:null;return{char:v,isActive:m,hasFakeCaret:m&&v===null}}),isFocused:H,isHovering:!o.disabled&&ne}),[H,ne,c,O,x,o.disabled,p]),be=t.useMemo(()=>f?f(ee):t.createElement(_e.Provider,{value:ee},d),[d,ee,f]);return t.createElement(t.Fragment,null,M!==null&&t.createElement("noscript",null,t.createElement("style",null,M)),t.createElement("div",{ref:X,"data-input-otp-container":!0,style:ge,className:Q},be,t.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},he)))});Fe.displayName="Input";function z(r,l){try{r.insertRule(l)}catch{console.error("input-otp could not insert CSS rule:",l)}}var Ie=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;export{Le as F,Fe as j,_e as x};
