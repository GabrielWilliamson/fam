import{R as g}from"./react-rwnEJDga.js";import{n as N,m as S,b as h}from"./@babel-bIbDx6ck.js";import{p as W}from"./react-lifecycles-compat-AfN2QaV3.js";import{i as F}from"./invariant-E159xfwu.js";var D=function(){};function L(r,c){var u={};return Object.keys(r).forEach(function(y){u[b(y)]=D}),u}function T(r,c){return r[c]!==void 0}function b(r){return"default"+r.charAt(0).toUpperCase()+r.substr(1)}function M(r){return!!r&&(typeof r!="function"||r.prototype&&r.prototype.isReactComponent)}var q="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function I(r,c,u){u===void 0&&(u=[]);var y=r.displayName||r.name||"Component",x=M(r),d=Object.keys(c),_=d.map(b);x||!u.length||F(!1);var l=function(o){N(a,o);function a(){for(var n,i=arguments.length,p=new Array(i),f=0;f<i;f++)p[f]=arguments[f];n=o.call.apply(o,[this].concat(p))||this,n.handlers=Object.create(null),d.forEach(function(t){var e=c[t],P=function(O){if(n.props[e]){var U;n._notifying=!0;for(var j=arguments.length,C=new Array(j>1?j-1:0),R=1;R<j;R++)C[R-1]=arguments[R];(U=n.props)[e].apply(U,[O].concat(C)),n._notifying=!1}n.unmounted||n.setState(function(w){var E,A=w.values;return{values:h(Object.create(null),A,(E={},E[t]=O,E))}})};n.handlers[e]=P}),u.length&&(n.attachRef=function(t){n.inner=t});var v=Object.create(null);return d.forEach(function(t){v[t]=n.props[b(t)]}),n.state={values:v,prevProps:{}},n}var s=a.prototype;return s.shouldComponentUpdate=function(){return!this._notifying},a.getDerivedStateFromProps=function(i,p){var f=p.values,v=p.prevProps,t={values:h(Object.create(null),f),prevProps:{}};return d.forEach(function(e){t.prevProps[e]=i[e],!T(i,e)&&T(v,e)&&(t.values[e]=i[b(e)])}),t},s.componentWillUnmount=function(){this.unmounted=!0},s.render=function(){var i=this,p=this.props,f=p.innerRef,v=S(p,["innerRef"]);_.forEach(function(e){delete v[e]});var t={};return d.forEach(function(e){var P=i.props[e];t[e]=P!==void 0?P:i.state.values[e]}),g.createElement(r,h({},v,t,this.handlers,{ref:f||this.attachRef}))},a}(g.Component);W(l),l.displayName="Uncontrolled("+y+")",l.propTypes=h({innerRef:function(){}},L(c)),u.forEach(function(o){l.prototype[o]=function(){var s;return(s=this.inner)[o].apply(s,arguments)}});var m=l;return g.forwardRef&&(m=g.forwardRef(function(o,a){return g.createElement(l,h({},o,{innerRef:a,__source:{fileName:q,lineNumber:128},__self:this}))}),m.propTypes=l.propTypes),m.ControlledComponent=r,m.deferControlTo=function(o,a,s){return a===void 0&&(a={}),I(o,h({},c,a),s)},m}export{I as u};
