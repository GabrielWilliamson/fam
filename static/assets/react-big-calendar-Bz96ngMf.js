import{d as K,e as F,f as A,g as tt,a as ne,h as U,i as ge,j as W,k as G,c as _e,l as de}from"./@babel-MHgsYJok.js";import{R as v,r as $}from"./react-rwnEJDga.js";import{i as me}from"./invariant-E159xfwu.js";import{u as Nt}from"./uncontrollable-b5NhKKBE.js";import{P as k}from"./prop-types-psm7UO16.js";import{i as Pt,l as rt,a as ye,g as Le,b as Fe,e as ie,n as nt,s as Y,c as Te,d as we,m as At,f as xt,h as he,j as Ce,k as Ne,o as Pe,p as Ge}from"./date-arithmetic-DrY26MJF.js";import{i as $t,r as zt,c as _t,d as Lt,o as Ft,t as Wt,m as It,f as Ht,s as Vt}from"./lodash-BlMyNRDO.js";import{h as Re,r as at,s as ot,c as qe,g as Ae,a as xe,q as Kt,p as st,b as Gt,d as qt,o as ke,l as jt,e as it}from"./dom-helpers-DHmbUhey.js";import{O as Yt}from"./react-overlays-Dnc5hYX-.js";import{m as lt}from"./memoize-one-BdPwpGay.js";import"./dayjs-B0slcDhr.js";function ct(n){var r,t,e="";if(typeof n=="string"||typeof n=="number")e+=n;else if(typeof n=="object")if(Array.isArray(n))for(r=0;r<n.length;r++)n[r]&&(t=ct(n[r]))&&(e&&(e+=" "),e+=t);else for(r in n)n[r]&&(e&&(e+=" "),e+=r);return e}function _(){for(var n,r,t=0,e="";t<arguments.length;)(n=arguments[t++])&&(r=ct(n))&&(e&&(e+=" "),e+=r);return e}function Z(n){return n.children}var j={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},V={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},je=Object.keys(V).map(function(n){return V[n]});k.oneOfType([k.string,k.func]);k.any;k.func;k.oneOfType([k.arrayOf(k.oneOf(je)),k.objectOf(function(n,r){var t=je.indexOf(r)!==-1&&typeof n[r]=="boolean";if(t)return null;for(var e=arguments.length,a=new Array(e>2?e-2:0),o=2;o<e;o++)a[o-2]=arguments[o];return k.elementType.apply(k,[n,r].concat(a))})]);k.oneOfType([k.oneOf(["overlap","no-overlap"]),k.func]);function x(n,r){n&&n.apply(null,[].concat(r))}var Ye={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function ut(n,r){var t=Y(n,"month");return Y(t,"week",r.startOfWeek())}function dt(n,r){var t=Te(n,"month");return Te(t,"week",r.startOfWeek())}function Xt(n,r){for(var t=ut(n,r),e=dt(n,r),a=[];ye(t,e,"day");)a.push(t),t=we(t,1,"day");return a}function Ut(n,r){var t=Y(n,r);return ie(t,n)?t:we(t,1,r)}function Bt(n,r){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",e=n,a=[];ye(e,r,t);)a.push(e),e=we(e,1,t);return a}function Zt(n,r){return r==null&&n==null?null:(r==null&&(r=new Date),n==null&&(n=new Date),n=Y(n,"day"),n=Ce(n,Ce(r)),n=he(n,he(r)),n=Ne(n,Ne(r)),Pe(n,Pe(r)))}function Xe(n){return Ce(n)===0&&he(n)===0&&Ne(n)===0&&Pe(n)===0}function Jt(n,r,t,e){return t==="day"&&(t="date"),Math.abs(Ge[t](n,void 0,e)-Ge[t](r,void 0,e))}function We(n,r,t){return!t||t==="milliseconds"?Math.abs(+n-+r):Math.round(Math.abs(+Y(n,t)/Ye[t]-+Y(r,t)/Ye[t]))}var Qt=k.oneOfType([k.string,k.func]);function er(n,r,t,e,a){var o=typeof e=="function"?e(t,a,n):r.call(n,t,e,a);return me(o==null||typeof o=="string","`localizer format(..)` must return a string, null, or undefined"),o}function tr(n,r,t){return new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,r+t,0,0)}function Ie(n,r){return n.getTimezoneOffset()-r.getTimezoneOffset()}function rr(n,r){return We(n,r,"minutes")+Ie(n,r)}function nr(n){var r=Y(n,"day");return We(r,n,"minutes")+Ie(r,n)}function ar(n,r){return rt(n,r,"day")}function or(n,r,t){var e=ie(n,r,"minutes");return e?Fe(r,t,"minutes"):Le(r,t,"minutes")}function $e(n,r){return Jt(n,r,"day")}function sr(n){var r=n.evtA,t=r.start,e=r.end,a=r.allDay,o=n.evtB,s=o.start,i=o.end,l=o.allDay,u=+Y(t,"day")-+Y(s,"day"),c=$e(t,e),d=$e(s,i);return u||d-c||!!l-!!a||+t-+s||+e-+i}function ir(n){var r=n.event,t=r.start,e=r.end,a=n.range,o=a.start,s=a.end,i=Y(t,"day"),l=ye(i,s,"day"),u=nt(i,e,"minutes"),c=u?Le(e,o,"minutes"):Fe(e,o,"minutes");return l&&c}function lr(n,r){return ie(n,r,"day")}function cr(n,r){return Xe(n)&&Xe(r)}var ur=F(function n(r){var t=this;W(this,n),me(typeof r.format=="function","date localizer `format(..)` must be a function"),me(typeof r.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=r.propType||Qt,this.formats=r.formats,this.format=function(){for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return er.apply(void 0,[t,r.format].concat(a))},this.startOfWeek=r.firstOfWeek,this.merge=r.merge||Zt,this.inRange=r.inRange||Pt,this.lt=r.lt||rt,this.lte=r.lte||ye,this.gt=r.gt||Le,this.gte=r.gte||Fe,this.eq=r.eq||ie,this.neq=r.neq||nt,this.startOf=r.startOf||Y,this.endOf=r.endOf||Te,this.add=r.add||we,this.range=r.range||Bt,this.diff=r.diff||We,this.ceil=r.ceil||Ut,this.min=r.min||At,this.max=r.max||xt,this.minutes=r.minutes||he,this.daySpan=r.daySpan||$e,this.firstVisibleDay=r.firstVisibleDay||ut,this.lastVisibleDay=r.lastVisibleDay||dt,this.visibleDays=r.visibleDays||Xt,this.getSlotDate=r.getSlotDate||tr,this.getTimezoneOffset=r.getTimezoneOffset||function(e){return e.getTimezoneOffset()},this.getDstOffset=r.getDstOffset||Ie,this.getTotalMin=r.getTotalMin||rr,this.getMinutesFromMidnight=r.getMinutesFromMidnight||nr,this.continuesPrior=r.continuesPrior||ar,this.continuesAfter=r.continuesAfter||or,this.sortEvents=r.sortEvents||sr,this.inEventRange=r.inEventRange||ir,this.isSameDate=r.isSameDate||lr,this.startAndEndAreDateOnly=r.startAndEndAreDateOnly||cr,this.segmentOffset=r.browserTZOffset?r.browserTZOffset():0});function dr(n,r,t,e){var a=A(A({},n.formats),t);return A(A({},n),{},{messages:e,startOfWeek:function(){return n.startOfWeek(r)},format:function(s,i){return n.format(s,a[i]||i,r)}})}var vr={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(r){return"+".concat(r," more")}};function mr(n){return A(A({},vr),n)}function hr(n){var r=n.ref,t=n.callback;$.useEffect(function(){var e=function(o){r.current&&!r.current.contains(o.target)&&t()};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}},[r,t])}var fr=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],vt=function(n){function r(){return W(this,r),G(this,r,arguments)}return K(r,n),F(r,[{key:"render",value:function(){var e=this.props,a=e.style,o=e.className,s=e.event,i=e.selected,l=e.isAllDay,u=e.onSelect,c=e.onDoubleClick,d=e.onKeyPress,m=e.localizer,h=e.continuesPrior,f=e.continuesAfter,p=e.accessors,g=e.getters,w=e.children,b=e.components,D=b.event,y=b.eventWrapper,E=e.slotStart,S=e.slotEnd,R=U(e,fr);delete R.resizable;var T=p.title(s),N=p.tooltip(s),M=p.end(s),O=p.start(s),C=p.allDay(s),P=l||C||m.diff(O,m.ceil(M,"day"),"day")>1,I=g.eventProp(s,O,M,i),L=v.createElement("div",{className:"rbc-event-content",title:N||void 0},D?v.createElement(D,{event:s,continuesPrior:h,continuesAfter:f,title:T,isAllDay:C,localizer:m,slotStart:E,slotEnd:S}):T);return v.createElement(y,Object.assign({},this.props,{type:"date"}),v.createElement("div",Object.assign({},R,{style:A(A({},I.style),a),className:_("rbc-event",o,I.className,{"rbc-selected":i,"rbc-event-allday":P,"rbc-event-continues-prior":h,"rbc-event-continues-after":f}),onClick:function(q){return u&&u(s,q)},onDoubleClick:function(q){return c&&c(s,q)},onKeyDown:function(q){return d&&d(s,q)}}),typeof w=="function"?w(L):L))}}])}(v.Component);function be(n,r){return!n||r==null?!1:$t(n,r)}function mt(n,r){var t=n.right-n.left,e=t/r;return e}function ht(n,r,t,e){var a=mt(n,e);return t?e-1-Math.floor((r-n.left)/a):Math.floor((r-n.left)/a)}function pr(n,r){var t=r.x,e=r.y;return e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right}function gr(n,r,t,e,a){var o=-1,s=-1,i=e-1,l=mt(r,e),u=ht(r,t.x,a,e),c=r.top<t.y&&r.bottom>t.y,d=r.top<n.y&&r.bottom>n.y,m=n.y>r.bottom,h=r.top>n.y,f=t.top<r.top&&t.bottom>r.bottom;return f&&(o=0,s=i),c&&(h?(o=0,s=u):m&&(o=u,s=i)),d&&(o=s=a?i-Math.floor((n.x-r.left)/l):Math.floor((n.x-r.left)/l),c?u<o?o=u:s=u:n.y<t.y?s=i:o=0),{startIdx:o,endIdx:s}}function yr(n){var r=n.target,t=n.offset,e=n.container,a=n.box,o=ke(r),s=o.top,i=o.left,l=o.width,u=o.height,c=ke(e),d=c.top,m=c.left,h=c.width,f=c.height,p=ke(a),g=p.width,w=p.height,b=d+f,D=m+h,y=s+w,E=i+g,S=t.x,R=t.y,T=y>b?s-w-R:s+R+u,N=E>D?i+S-g+l:i+S;return{topOffset:T,leftOffset:N}}function wr(n){var r=n.containerRef,t=n.accessors,e=n.getters,a=n.selected,o=n.components,s=n.localizer,i=n.position,l=n.show,u=n.events,c=n.slotStart,d=n.slotEnd,m=n.onSelect,h=n.onDoubleClick,f=n.onKeyPress,p=n.handleDragStart,g=n.popperRef,w=n.target,b=n.offset;hr({ref:g,callback:l}),$.useLayoutEffect(function(){var E=yr({target:w,offset:b,container:r.current,box:g.current}),S=E.topOffset,R=E.leftOffset;g.current.style.top="".concat(S,"px"),g.current.style.left="".concat(R,"px")},[b.x,b.y,w]);var D=i.width,y={minWidth:D+D/2};return v.createElement("div",{style:y,className:"rbc-overlay",ref:g},v.createElement("div",{className:"rbc-overlay-header"},s.format(c,"dayHeaderFormat")),u.map(function(E,S){return v.createElement(vt,{key:S,type:"popup",localizer:s,event:E,getters:e,onSelect:m,accessors:t,components:o,onDoubleClick:h,onKeyPress:f,continuesPrior:s.lt(t.end(E),c,"day"),continuesAfter:s.gte(t.start(E),d,"day"),slotStart:c,slotEnd:d,selected:be(E,a),draggable:!0,onDragStart:function(){return p(E)},onDragEnd:function(){return l()}})}))}var ft=v.forwardRef(function(n,r){return v.createElement(wr,Object.assign({},n,{popperRef:r}))});ft.propTypes={accessors:k.object.isRequired,getters:k.object.isRequired,selected:k.object,components:k.object.isRequired,localizer:k.object.isRequired,position:k.object.isRequired,show:k.func.isRequired,events:k.array.isRequired,slotStart:k.instanceOf(Date).isRequired,slotEnd:k.instanceOf(Date),onSelect:k.func,onDoubleClick:k.func,onKeyPress:k.func,handleDragStart:k.func,style:k.object,offset:k.shape({x:k.number,y:k.number})};function br(n){var r=n.containerRef,t=n.popupOffset,e=t===void 0?5:t,a=n.overlay,o=n.accessors,s=n.localizer,i=n.components,l=n.getters,u=n.selected,c=n.handleSelectEvent,d=n.handleDoubleClickEvent,m=n.handleKeyPressEvent,h=n.handleDragStart,f=n.onHide,p=n.overlayDisplay,g=$.useRef(null);if(!a.position)return null;var w=e;isNaN(e)||(w={x:e,y:e});var b=a.position,D=a.events,y=a.date,E=a.end;return v.createElement(Yt,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:f,target:a.target},function(S){var R=S.props;return v.createElement(ft,Object.assign({},R,{containerRef:r,ref:g,target:a.target,offset:w,accessors:o,getters:l,selected:u,components:i,localizer:s,position:b,show:p,events:D,slotStart:y,slotEnd:E,onSelect:c,onDoubleClick:d,onKeyPress:m,handleDragStart:h}))})}var He=v.forwardRef(function(n,r){return v.createElement(br,Object.assign({},n,{containerRef:r}))});He.propTypes={popupOffset:k.oneOfType([k.number,k.shape({x:k.number,y:k.number})]),overlay:k.shape({position:k.object,events:k.array,date:k.instanceOf(Date),end:k.instanceOf(Date)}),accessors:k.object.isRequired,localizer:k.object.isRequired,components:k.object.isRequired,getters:k.object.isRequired,selected:k.object,handleSelectEvent:k.func,handleDoubleClickEvent:k.func,handleKeyPressEvent:k.func,handleDragStart:k.func,onHide:k.func,overlayDisplay:k.func};function H(n,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return jt(t,n,r,{passive:!1})}function Er(n,r,t){return!n||xe(n,document.elementFromPoint(r,t))}function Dr(n,r){var t=r.clientX,e=r.clientY,a=document.elementFromPoint(t,e);return it(a,".rbc-event",n)}function Sr(n,r){var t=r.clientX,e=r.clientY,a=document.elementFromPoint(t,e);return it(a,".rbc-show-more",n)}function fe(n,r){return!!Dr(n,r)}function Rr(n,r){return!!Sr(n,r)}function oe(n){var r=n;return n.touches&&n.touches.length&&(r=n.touches[0]),{clientX:r.clientX,clientY:r.clientY,pageX:r.pageX,pageY:r.pageY}}var Ue=5,kr=250,pt=function(){function n(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=t.global,a=e===void 0?!1:e,o=t.longPressThreshold,s=o===void 0?250:o,i=t.validContainers,l=i===void 0?[]:i;W(this,n),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=r,this.globalMouse=!r||a,this.longPressThreshold=s,this.validContainers=l,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=H("touchmove",function(){},window),this._removeKeyDownListener=H("keydown",this._keyListener),this._removeKeyUpListener=H("keyup",this._keyListener),this._removeDropFromOutsideListener=H("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=H("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return F(n,[{key:"on",value:function(t,e){var a=this._listeners[t]||(this._listeners[t]=[]);return a.push(e),{remove:function(){var s=a.indexOf(e);s!==-1&&a.splice(s,1)}}}},{key:"emit",value:function(t){for(var e=arguments.length,a=new Array(e>1?e-1:0),o=1;o<e;o++)a[o-1]=arguments[o];var s,i=this._listeners[t]||[];return i.forEach(function(l){s===void 0&&(s=l.apply(void 0,a))}),s}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(t){var e=this._selectRect;return!e||!this.selecting?!1:Be(e,te(t))}},{key:"filter",value:function(t){var e=this._selectRect;return!e||!this.selecting?[]:t.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(t,e){var a=this,o=null,s=null,i=null,l=function(m){o=setTimeout(function(){c(),t(m)},a.longPressThreshold),s=H("touchmove",function(){return c()}),i=H("touchend",function(){return c()})},u=H("touchstart",l),c=function(){o&&clearTimeout(o),s&&s(),i&&i(),o=null,s=null,i=null};return e&&l(e),function(){c(),u()}}},{key:"_addInitialEventListener",value:function(){var t=this,e=H("mousedown",function(o){t._removeInitialEventListener(),t._handleInitialEvent(o),t._removeInitialEventListener=H("mousedown",t._handleInitialEvent)}),a=H("touchstart",function(o){t._removeInitialEventListener(),t._removeInitialEventListener=t._addLongPressListener(t._handleInitialEvent,o)});this._removeInitialEventListener=function(){e(),a()}}},{key:"_dropFromOutsideListener",value:function(t){var e=oe(t),a=e.pageX,o=e.pageY,s=e.clientX,i=e.clientY;this.emit("dropFromOutside",{x:a,y:o,clientX:s,clientY:i}),t.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(t){var e=oe(t),a=e.pageX,o=e.pageY,s=e.clientX,i=e.clientY;this.emit("dragOverFromOutside",{x:a,y:o,clientX:s,clientY:i}),t.preventDefault()}},{key:"_handleInitialEvent",value:function(t){if(this._initialEvent=t,!this.isDetached){var e=oe(t),a=e.clientX,o=e.clientY,s=e.pageX,i=e.pageY,l=this.container(),u,c;if(!(t.which===3||t.button===2||!Er(l,a,o))){if(!this.globalMouse&&l&&!xe(l,t.target)){var d=Mr(0),m=d.top,h=d.left,f=d.bottom,p=d.right;if(c=te(l),u=Be({top:c.top-m,left:c.left-h,bottom:c.bottom+f,right:c.right+p},{top:i,left:s}),!u)return}var g=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(t.type),x:s,y:i,clientX:a,clientY:o});if(g!==!1)switch(t.type){case"mousedown":this._removeEndListener=H("mouseup",this._handleTerminatingEvent),this._onEscListener=H("keydown",this._handleTerminatingEvent),this._removeMoveListener=H("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(t),this._removeEndListener=H("touchend",this._handleTerminatingEvent),this._removeMoveListener=H("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(t){var e=t.target,a=this.validContainers;return!a||!a.length||!e?!0:a.some(function(o){return!!e.closest(o)})}},{key:"_handleTerminatingEvent",value:function(t){var e=this.selecting,a=this._selectRect;if(!e&&t.type.includes("key")&&(t=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!t){var o=!this.container||xe(this.container(),t.target),s=this._isWithinValidContainer(t);return t.key==="Escape"||!s?this.emit("reset"):!e&&o?this._handleClickEvent(t):e?this.emit("select",a):this.emit("reset")}}},{key:"_handleClickEvent",value:function(t){var e=oe(t),a=e.pageX,o=e.pageY,s=e.clientX,i=e.clientY,l=new Date().getTime();return this._lastClickData&&l-this._lastClickData.timestamp<kr?(this._lastClickData=null,this.emit("doubleClick",{x:a,y:o,clientX:s,clientY:i})):(this._lastClickData={timestamp:l},this.emit("click",{x:a,y:o,clientX:s,clientY:i}))}},{key:"_handleMoveEvent",value:function(t){if(!(this._initialEventData===null||this.isDetached)){var e=this._initialEventData,a=e.x,o=e.y,s=oe(t),i=s.pageX,l=s.pageY,u=Math.abs(a-i),c=Math.abs(o-l),d=Math.min(i,a),m=Math.min(l,o),h=this.selecting,f=this.isClick(i,l);f&&!h&&!(u||c)||(!h&&!f&&this.emit("selectStart",this._initialEventData),f||(this.selecting=!0,this._selectRect={top:m,left:d,x:i,y:l,right:d+u,bottom:m+c},this.emit("selecting",this._selectRect)),t.preventDefault())}}},{key:"_keyListener",value:function(t){this.ctrl=t.metaKey||t.ctrlKey}},{key:"isClick",value:function(t,e){var a=this._initialEventData,o=a.x,s=a.y,i=a.isTouch;return!i&&Math.abs(t-o)<=Ue&&Math.abs(e-s)<=Ue}}])}();function Mr(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return _e(n)!=="object"&&(n={top:n,left:n,right:n,bottom:n}),n}function Be(n,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,e=te(n),a=e.top,o=e.left,s=e.right,i=s===void 0?o:s,l=e.bottom,u=l===void 0?a:l,c=te(r),d=c.top,m=c.left,h=c.right,f=h===void 0?m:h,p=c.bottom,g=p===void 0?d:p;return!(u-t<d||a+t>g||i-t<m||o+t>f)}function te(n){if(!n.getBoundingClientRect)return n;var r=n.getBoundingClientRect(),t=r.left+Ze("left"),e=r.top+Ze("top");return{top:e,left:t,right:(n.offsetWidth||0)+t,bottom:(n.offsetHeight||0)+e}}function Ze(n){if(n==="left")return window.pageXOffset||document.body.scrollLeft||0;if(n==="top")return window.pageYOffset||document.body.scrollTop||0}var Or=function(n){function r(t,e){var a;return W(this,r),a=G(this,r,[t,e]),a.state={selecting:!1},a.containerRef=$.createRef(),a}return K(r,n),F(r,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(e){!e.selectable&&this.props.selectable&&this._selectable(),e.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var e=this.props,a=e.range,o=e.getNow,s=e.getters,i=e.date,l=e.components.dateCellWrapper,u=e.localizer,c=this.state,d=c.selecting,m=c.startIdx,h=c.endIdx,f=o();return v.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},a.map(function(p,g){var w=d&&g>=m&&g<=h,b=s.dayProp(p),D=b.className,y=b.style;return v.createElement(l,{key:g,value:p,range:a},v.createElement("div",{style:y,className:_("rbc-day-bg",D,w&&"rbc-selected-cell",u.isSameDate(p,f)&&"rbc-today",i&&u.neq(i,p,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var e=this,a=this.containerRef.current,o=this._selector=new pt(this.props.container,{longPressThreshold:this.props.longPressThreshold}),s=function(l,u){if(!fe(a,l)&&!Rr(a,l)){var c=te(a),d=e.props,m=d.range,h=d.rtl;if(pr(c,l)){var f=ht(c,l.x,h,m.length);e._selectSlot({startIdx:f,endIdx:f,action:u,box:l})}}e._initial={},e.setState({selecting:!1})};o.on("selecting",function(i){var l=e.props,u=l.range,c=l.rtl,d=-1,m=-1;if(e.state.selecting||(x(e.props.onSelectStart,[i]),e._initial={x:i.x,y:i.y}),o.isSelected(a)){var h=te(a),f=gr(e._initial,h,i,u.length,c);d=f.startIdx,m=f.endIdx}e.setState({selecting:!0,startIdx:d,endIdx:m})}),o.on("beforeSelect",function(i){if(e.props.selectable==="ignoreEvents")return!fe(e.containerRef.current,i)}),o.on("click",function(i){return s(i,"click")}),o.on("doubleClick",function(i){return s(i,"doubleClick")}),o.on("select",function(i){e._selectSlot(A(A({},e.state),{},{action:"select",bounds:i})),e._initial={},e.setState({selecting:!1}),x(e.props.onSelectEnd,[e.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(e){var a=e.endIdx,o=e.startIdx,s=e.action,i=e.bounds,l=e.box;a!==-1&&o!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:o,end:a,action:s,bounds:i,box:l,resourceId:this.props.resourceId})}}])}(v.Component),X={propTypes:{slotMetrics:k.object.isRequired,selected:k.object,isAllDay:k.bool,accessors:k.object.isRequired,localizer:k.object.isRequired,components:k.object.isRequired,getters:k.object.isRequired,onSelect:k.func,onDoubleClick:k.func,onKeyPress:k.func},defaultProps:{segments:[],selected:{}},renderEvent:function(r,t){var e=r.selected;r.isAllDay;var a=r.accessors,o=r.getters,s=r.onSelect,i=r.onDoubleClick,l=r.onKeyPress,u=r.localizer,c=r.slotMetrics,d=r.components,m=r.resizable,h=c.continuesPrior(t),f=c.continuesAfter(t);return v.createElement(vt,{event:t,getters:o,localizer:u,accessors:a,components:d,onSelect:s,onDoubleClick:i,onKeyPress:l,continuesPrior:h,continuesAfter:f,slotStart:c.first,slotEnd:c.last,selected:be(t,e),resizable:m})},renderSpan:function(r,t,e){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",o=Math.abs(t)/r*100+"%";return v.createElement("div",{key:e,className:"rbc-row-segment",style:{WebkitFlexBasis:o,flexBasis:o,maxWidth:o}},a)}},gt=function(n){function r(){return W(this,r),G(this,r,arguments)}return K(r,n),F(r,[{key:"render",value:function(){var e=this,a=this.props,o=a.segments,s=a.slotMetrics.slots,i=a.className,l=1;return v.createElement("div",{className:_(i,"rbc-row")},o.reduce(function(u,c,d){var m=c.event,h=c.left,f=c.right,p=c.span,g="_lvl_"+d,w=h-l,b=X.renderEvent(e.props,m);return w&&u.push(X.renderSpan(s,w,"".concat(g,"_gap"))),u.push(X.renderSpan(s,p,g,b)),l=f+1,u},[]))}}])}(v.Component);gt.defaultProps=A({},X.defaultProps);function yt(n){var r=n.dateRange,t=n.unit,e=t===void 0?"day":t,a=n.localizer;return{first:r[0],last:a.add(r[r.length-1],1,e)}}function Tr(n,r,t,e){var a=yt({dateRange:r,localizer:e}),o=a.first,s=a.last,i=e.diff(o,s,"day"),l=e.max(e.startOf(t.start(n),"day"),o),u=e.min(e.ceil(t.end(n),"day"),s),c=Ht(r,function(m){return e.isSameDate(m,l)}),d=e.diff(l,u,"day");return d=Math.min(d,i),d=Math.max(d-e.segmentOffset,1),{event:n,span:d,left:c+1,right:Math.max(c+d,1)}}function wt(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,t,e,a,o=[],s=[];for(t=0;t<n.length;t++){for(a=n[t],e=0;e<o.length&&Cr(a,o[e]);e++);e>=r?s.push(a):(o[e]||(o[e]=[])).push(a)}for(t=0;t<o.length;t++)o[t].sort(function(i,l){return i.left-l.left});return{levels:o,extra:s}}function se(n,r,t,e,a){var o={start:e.start(n),end:e.end(n)},s={start:r,end:t};return a.inEventRange({event:o,range:s})}function Cr(n,r){return r.some(function(t){return t.left<=n.right&&t.right>=n.left})}function Nr(n,r,t){var e=de(n),a=[],o=[];e.forEach(function(l){var u=r.start(l),c=r.end(l);t.daySpan(u,c)>1?a.push(l):o.push(l)});var s=a.sort(function(l,u){return ze(l,u,r,t)}),i=o.sort(function(l,u){return ze(l,u,r,t)});return[].concat(de(s),de(i))}function ze(n,r,t,e){var a={start:t.start(n),end:t.end(n),allDay:t.allDay(n)},o={start:t.start(r),end:t.end(r),allDay:t.allDay(r)};return e.sortEvents({evtA:a,evtB:o})}var bt=function(r,t){return r.left<=t&&r.right>=t},Je=function(r,t){return r.filter(function(e){return bt(e,t)}).map(function(e){return e.event})},Et=function(n){function r(){return W(this,r),G(this,r,arguments)}return K(r,n),F(r,[{key:"render",value:function(){for(var e=this.props,a=e.segments,o=e.slotMetrics.slots,s=wt(a).levels[0],i=1,l=1,u=[];i<=o;){var c="_lvl_"+i,d=s.filter(function(b){return bt(b,i)})[0]||{},m=d.event,h=d.left,f=d.right,p=d.span;if(!m){i++;continue}var g=Math.max(0,h-l);if(this.canRenderSlotEvent(h,p)){var w=X.renderEvent(this.props,m);g&&u.push(X.renderSpan(o,g,c+"_gap")),u.push(X.renderSpan(o,p,c,w)),l=i=f+1}else g&&u.push(X.renderSpan(o,g,c+"_gap")),u.push(X.renderSpan(o,1,c,this.renderShowMore(a,i))),l=i=i+1}return v.createElement("div",{className:"rbc-row"},u)}},{key:"canRenderSlotEvent",value:function(e,a){var o=this.props.segments;return zt(e,e+a).every(function(s){var i=Je(o,s).length;return i===1})}},{key:"renderShowMore",value:function(e,a){var o=this,s=this.props,i=s.localizer,l=s.slotMetrics,u=l.getEventsForSlot(a),c=Je(e,a),d=c.length;return d?v.createElement("button",{type:"button",key:"sm_"+a,className:_("rbc-button-link","rbc-show-more"),onClick:function(h){return o.showMore(a,h)}},i.messages.showMore(d,c,u)):!1}},{key:"showMore",value:function(e,a){a.preventDefault(),a.stopPropagation(),this.props.onShowMore(e,a.target)}}])}(v.Component);Et.defaultProps=A({},X.defaultProps);var Pr=function(r){var t=r.children;return v.createElement("div",{className:"rbc-row-content-scroll-container"},t)},Ar=function(r,t){return r.left<=t&&r.right>=t},xr=function(r,t){return r[0].range===t[0].range&&r[0].events===t[0].events};function Dt(){return lt(function(n){for(var r=n.range,t=n.events,e=n.maxRows,a=n.minRows,o=n.accessors,s=n.localizer,i=yt({dateRange:r,localizer:s}),l=i.first,u=i.last,c=t.map(function(p){return Tr(p,r,o,s)}),d=wt(c,Math.max(e-1,1)),m=d.levels,h=d.extra,f=h.length>0?a-1:a;m.length<f;)m.push([]);return{first:l,last:u,levels:m,extra:h,range:r,slots:r.length,clone:function(g){var w=Dt();return w(A(A({},n),g))},getDateForSlot:function(g){return r[g]},getSlotForDate:function(g){return r.find(function(w){return s.isSameDate(w,g)})},getEventsForSlot:function(g){return c.filter(function(w){return Ar(w,g)}).map(function(w){return w.event})},continuesPrior:function(g){return s.continuesPrior(o.start(g),l)},continuesAfter:function(g){var w=o.start(g),b=o.end(g);return s.continuesAfter(w,b,u)}}},xr)}var pe=function(n){function r(){var t;W(this,r);for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return t=G(this,r,[].concat(a)),t.handleSelectSlot=function(s){var i=t.props,l=i.range,u=i.onSelectSlot;u(l.slice(s.start,s.end+1),s)},t.handleShowMore=function(s,i){var l=t.props,u=l.range,c=l.onShowMore,d=t.slotMetrics(t.props),m=Kt(t.containerRef.current,".rbc-row-bg")[0],h;m&&(h=m.children[s-1]);var f=d.getEventsForSlot(s);c(f,u[s-1],h,s,i)},t.getContainer=function(){var s=t.props.container;return s?s():t.containerRef.current},t.renderHeadingCell=function(s,i){var l=t.props,u=l.renderHeader,c=l.getNow,d=l.localizer;return u({date:s,key:"header_".concat(i),className:_("rbc-date-cell",d.isSameDate(s,c())&&"rbc-now")})},t.renderDummy=function(){var s=t.props,i=s.className,l=s.range,u=s.renderHeader,c=s.showAllEvents;return v.createElement("div",{className:i,ref:t.containerRef},v.createElement("div",{className:_("rbc-row-content",c&&"rbc-row-content-scrollable")},u&&v.createElement("div",{className:"rbc-row",ref:t.headingRowRef},l.map(t.renderHeadingCell)),v.createElement("div",{className:"rbc-row",ref:t.eventRowRef},v.createElement("div",{className:"rbc-row-segment"},v.createElement("div",{className:"rbc-event"},v.createElement("div",{className:"rbc-event-content"}," "))))))},t.containerRef=$.createRef(),t.headingRowRef=$.createRef(),t.eventRowRef=$.createRef(),t.slotMetrics=Dt(),t}return K(r,n),F(r,[{key:"getRowLimit",value:function(){var e,a=Re(this.eventRowRef.current),o=(e=this.headingRowRef)!==null&&e!==void 0&&e.current?Re(this.headingRowRef.current):0,s=Re(this.containerRef.current)-o;return Math.max(Math.floor(s/a),1)}},{key:"render",value:function(){var e=this.props,a=e.date,o=e.rtl,s=e.range,i=e.className,l=e.selected,u=e.selectable,c=e.renderForMeasure,d=e.accessors,m=e.getters,h=e.components,f=e.getNow,p=e.renderHeader,g=e.onSelect,w=e.localizer,b=e.onSelectStart,D=e.onSelectEnd,y=e.onDoubleClick,E=e.onKeyPress,S=e.resourceId,R=e.longPressThreshold,T=e.isAllDay,N=e.resizable,M=e.showAllEvents;if(c)return this.renderDummy();var O=this.slotMetrics(this.props),C=O.levels,P=O.extra,I=M?Pr:Z,L=h.weekWrapper,z={selected:l,accessors:d,getters:m,localizer:w,components:h,onSelect:g,onDoubleClick:y,onKeyPress:E,resourceId:S,slotMetrics:O,resizable:N};return v.createElement("div",{className:i,role:"rowgroup",ref:this.containerRef},v.createElement(Or,{localizer:w,date:a,getNow:f,rtl:o,range:s,selectable:u,container:this.getContainer,getters:m,onSelectStart:b,onSelectEnd:D,onSelectSlot:this.handleSelectSlot,components:h,longPressThreshold:R,resourceId:S}),v.createElement("div",{className:_("rbc-row-content",M&&"rbc-row-content-scrollable"),role:"row"},p&&v.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},s.map(this.renderHeadingCell)),v.createElement(I,null,v.createElement(L,Object.assign({isAllDay:T},z,{rtl:this.props.rtl}),C.map(function(q,re){return v.createElement(gt,Object.assign({key:re,segments:q},z))}),!!P.length&&v.createElement(Et,Object.assign({segments:P,onShowMore:this.handleShowMore},z))))))}}])}(v.Component);pe.defaultProps={minRows:0,maxRows:1/0};var St=function(r){var t=r.label;return v.createElement("span",{role:"columnheader","aria-sort":"none"},t)},$r=function(r){var t=r.label,e=r.drilldownView,a=r.onDrillDown;return e?v.createElement("button",{type:"button",className:"rbc-button-link",onClick:a,role:"cell"},t):v.createElement("span",null,t)},zr=["date","className"],_r=function(r,t,e,a,o){return r.filter(function(s){return se(s,t,e,a,o)})},Ee=function(n){function r(){var t;W(this,r);for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return t=G(this,r,[].concat(a)),t.getContainer=function(){return t.containerRef.current},t.renderWeek=function(s,i){var l=t.props,u=l.events,c=l.components,d=l.selectable,m=l.getNow,h=l.selected,f=l.date,p=l.localizer,g=l.longPressThreshold,w=l.accessors,b=l.getters,D=l.showAllEvents,y=t.state,E=y.needLimitMeasure,S=y.rowLimit,R=_r(de(u),s[0],s[s.length-1],w,p),T=Nr(R,w,p);return v.createElement(pe,{key:i,ref:i===0?t.slotRowRef:void 0,container:t.getContainer,className:"rbc-month-row",getNow:m,date:f,range:s,events:T,maxRows:D?1/0:S,selected:h,selectable:d,components:c,accessors:w,getters:b,localizer:p,renderHeader:t.readerDateHeading,renderForMeasure:E,onShowMore:t.handleShowMore,onSelect:t.handleSelectEvent,onDoubleClick:t.handleDoubleClickEvent,onKeyPress:t.handleKeyPressEvent,onSelectSlot:t.handleSelectSlot,longPressThreshold:g,rtl:t.props.rtl,resizable:t.props.resizable,showAllEvents:D})},t.readerDateHeading=function(s){var i=s.date,l=s.className,u=U(s,zr),c=t.props,d=c.date,m=c.getDrilldownView,h=c.localizer,f=h.neq(i,d,"month"),p=h.isSameDate(i,d),g=m(i),w=h.format(i,"dateFormat"),b=t.props.components.dateHeader||$r;return v.createElement("div",Object.assign({},u,{className:_(l,f&&"rbc-off-range",p&&"rbc-current"),role:"cell"}),v.createElement(b,{label:w,date:i,drilldownView:g,isOffRange:f,onDrillDown:function(y){return t.handleHeadingClick(i,g,y)}}))},t.handleSelectSlot=function(s,i){t._pendingSelection=t._pendingSelection.concat(s),clearTimeout(t._selectTimer),t._selectTimer=setTimeout(function(){return t.selectDates(i)})},t.handleHeadingClick=function(s,i,l){l.preventDefault(),t.clearSelection(),x(t.props.onDrillDown,[s,i])},t.handleSelectEvent=function(){t.clearSelection();for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];x(t.props.onSelectEvent,i)},t.handleDoubleClickEvent=function(){t.clearSelection();for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];x(t.props.onDoubleClickEvent,i)},t.handleKeyPressEvent=function(){t.clearSelection();for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];x(t.props.onKeyPressEvent,i)},t.handleShowMore=function(s,i,l,u,c){var d=t.props,m=d.popup,h=d.onDrillDown,f=d.onShowMore,p=d.getDrilldownView,g=d.doShowMoreDrillDown;if(t.clearSelection(),m){var w=st(l,t.containerRef.current);t.setState({overlay:{date:i,events:s,position:w,target:c}})}else g&&x(h,[i,p(i)||V.DAY]);x(f,[s,i,u])},t.overlayDisplay=function(){t.setState({overlay:null})},t.state={rowLimit:5,needLimitMeasure:!0,date:null},t.containerRef=$.createRef(),t.slotRowRef=$.createRef(),t._bgRows=[],t._pendingSelection=[],t}return K(r,n),F(r,[{key:"componentDidMount",value:function(){var e=this,a;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){a||at(function(){a=!1,e.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var e=this.props,a=e.date,o=e.localizer,s=e.className,i=o.visibleDays(a,o),l=_t(i,7);return this._weekCount=l.length,v.createElement("div",{className:_("rbc-month-view",s),role:"table","aria-label":"Month View",ref:this.containerRef},v.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(l[0])),l.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(e){var a=this.props,o=a.localizer,s=a.components,i=e[0],l=e[e.length-1],u=s.header||St;return o.range(i,l,"day").map(function(c,d){return v.createElement("div",{key:"header_"+d,className:"rbc-header"},v.createElement(u,{date:c,localizer:o,label:o.format(c,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var e,a,o=this,s=(e=(a=this.state)===null||a===void 0?void 0:a.overlay)!==null&&e!==void 0?e:{},i=this.props,l=i.accessors,u=i.localizer,c=i.components,d=i.getters,m=i.selected,h=i.popupOffset,f=i.handleDragStart,p=function(){return o.setState({overlay:null})};return v.createElement(He,{overlay:s,accessors:l,localizer:u,components:c,getters:d,selected:m,popupOffset:h,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:f,show:!!s.position,overlayDisplay:this.overlayDisplay,onHide:p})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(e){var a=this._pendingSelection.slice();this._pendingSelection=[],a.sort(function(i,l){return+i-+l});var o=new Date(a[0]),s=new Date(a[a.length-1]);s.setDate(a[a.length-1].getDate()+1),x(this.props.onSelectSlot,{slots:a,start:o,end:s,action:e.action,bounds:e.bounds,box:e.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(e,a){var o=e.date,s=e.localizer;return{date:o,needLimitMeasure:s.neq(o,a.date,"month")}}}])}(v.Component);Ee.range=function(n,r){var t=r.localizer,e=t.firstVisibleDay(n,t),a=t.lastVisibleDay(n,t);return{start:e,end:a}};Ee.navigate=function(n,r,t){var e=t.localizer;switch(r){case j.PREVIOUS:return e.add(n,-1,"month");case j.NEXT:return e.add(n,1,"month");default:return n}};Ee.title=function(n,r){var t=r.localizer;return t.format(n,"monthHeaderFormat")};var Qe=function(r){var t=r.min,e=r.max,a=r.step,o=r.slots,s=r.localizer;return"".concat(+s.startOf(t,"minutes"))+"".concat(+s.startOf(e,"minutes"))+"".concat(a,"-").concat(o)};function Ve(n){for(var r=n.min,t=n.max,e=n.step,a=n.timeslots,o=n.localizer,s=Qe({start:r,end:t,step:e,timeslots:a,localizer:o}),i=1+o.getTotalMin(r,t),l=o.getMinutesFromMidnight(r),u=Math.ceil((i-1)/(e*a)),c=u*a,d=new Array(u),m=new Array(c),h=0;h<u;h++){d[h]=new Array(a);for(var f=0;f<a;f++){var p=h*a+f,g=p*e;m[p]=d[h][f]=o.getSlotDate(r,l,g)}}var w=m.length*e;m.push(o.getSlotDate(r,l,w));function b(D){var y=o.diff(r,D,"minutes")+o.getDstOffset(r,D);return Math.min(y,i)}return{groups:d,update:function(y){return Qe(y)!==s?Ve(y):this},dateIsInGroup:function(y,E){var S=d[E+1];return o.inRange(y,d[E][0],S?S[0]:t,"minutes")},nextSlot:function(y){var E=m[Math.min(m.findIndex(function(S){return S===y||o.eq(S,y)})+1,m.length-1)];return o.eq(E,y)&&(E=o.add(y,e,"minutes")),E},closestSlotToPosition:function(y){var E=Math.min(m.length-1,Math.max(0,Math.floor(y*c)));return m[E]},closestSlotFromPoint:function(y,E){var S=Math.abs(E.top-E.bottom);return this.closestSlotToPosition((y.y-E.top)/S)},closestSlotFromDate:function(y){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(o.lt(y,r,"minutes"))return m[0];if(o.gt(y,t,"minutes"))return m[m.length-1];var S=o.diff(r,y,"minutes");return m[(S-S%e)/e+E]},startsBeforeDay:function(y){return o.lt(y,r,"day")},startsAfterDay:function(y){return o.gt(y,t,"day")},startsBefore:function(y){return o.lt(o.merge(r,y),r,"minutes")},startsAfter:function(y){return o.gt(o.merge(t,y),t,"minutes")},getRange:function(y,E,S,R){S||(y=o.min(t,o.max(r,y))),R||(E=o.min(t,o.max(r,E)));var T=b(y),N=b(E),M=N>e*c&&!o.eq(t,E)?(T-e)/(e*c)*100:T/(e*c)*100;return{top:M,height:N/(e*c)*100-M,start:b(y),startDate:y,end:b(E),endDate:E}},getCurrentTimePosition:function(y){var E=b(y),S=E/(e*c)*100;return S}}}var Lr=function(){function n(r,t){var e=t.accessors,a=t.slotMetrics;W(this,n);var o=a.getRange(e.start(r),e.end(r)),s=o.start,i=o.startDate,l=o.end,u=o.endDate,c=o.top,d=o.height;this.start=s,this.end=l,this.startMs=+i,this.endMs=+u,this.top=c,this.height=d,this.data=r}return F(n,[{key:"_width",get:function(){if(this.rows){var t=this.rows.reduce(function(a,o){return Math.max(a,o.leaves.length+1)},0)+1;return 100/t}if(this.leaves){var e=100-this.container._width;return e/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var t=this._width,e=Math.min(100,this._width*1.7);if(this.rows)return e;if(this.leaves)return this.leaves.length>0?e:t;var a=this.row.leaves,o=a.indexOf(this);return o===a.length-1?t:e}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var t=this.row,e=t.leaves,a=t.xOffset,o=t._width,s=e.indexOf(this)+1;return a+s*o}}])}();function Fr(n,r,t){return Math.abs(r.start-n.start)<t||r.start>n.start&&r.start<n.end}function Wr(n){for(var r=Vt(n,["startMs",function(i){return-i.endMs}]),t=[];r.length>0;){var e=r.shift();t.push(e);for(var a=0;a<r.length;a++){var o=r[a];if(!(e.endMs>o.startMs)){if(a>0){var s=r.splice(a,1)[0];t.push(s)}break}}}return t}function Rt(n){for(var r=n.events,t=n.minimumStartDifference,e=n.slotMetrics,a=n.accessors,o=r.map(function(c){return new Lr(c,{slotMetrics:e,accessors:a})}),s=Wr(o),i=[],l=function(){var d=s[u],m=i.find(function(p){return p.end>d.start||Math.abs(d.start-p.start)<t});if(!m)return d.rows=[],i.push(d),1;d.container=m;for(var h=null,f=m.rows.length-1;!h&&f>=0;f--)Fr(m.rows[f],d,t)&&(h=m.rows[f]);h?(h.leaves.push(d),d.row=h):(d.leaves=[],m.rows.push(d))},u=0;u<s.length;u++)l();return s.map(function(c){return{event:c.data,style:{top:c.top,height:c.height,width:c.width,xOffset:Math.max(0,c.xOffset)}}})}function kt(n,r,t){for(var e=0;e<n.friends.length;++e)if(!(t.indexOf(n.friends[e])>-1)){r=r>n.friends[e].idx?r:n.friends[e].idx,t.push(n.friends[e]);var a=kt(n.friends[e],r,t);r=r>a?r:a}return r}function Ir(n){var r=n.events,t=n.minimumStartDifference,e=n.slotMetrics,a=n.accessors,o=Rt({events:r,minimumStartDifference:t,slotMetrics:e,accessors:a});o.sort(function(L,z){return L=L.style,z=z.style,L.top!==z.top?L.top>z.top?1:-1:L.height!==z.height?L.top+L.height<z.top+z.height?1:-1:0});for(var s=0;s<o.length;++s)o[s].friends=[],delete o[s].style.left,delete o[s].style.left,delete o[s].idx,delete o[s].size;for(var i=0;i<o.length-1;++i)for(var l=o[i],u=l.style.top,c=l.style.top+l.style.height,d=i+1;d<o.length;++d){var m=o[d],h=m.style.top,f=m.style.top+m.style.height;(h>=u&&f<=c||f>u&&f<=c||h>=u&&h<c)&&(l.friends.push(m),m.friends.push(l))}for(var p=0;p<o.length;++p){for(var g=o[p],w=[],b=0;b<100;++b)w.push(1);for(var D=0;D<g.friends.length;++D)g.friends[D].idx!==void 0&&(w[g.friends[D].idx]=0);g.idx=w.indexOf(1)}for(var y=0;y<o.length;++y){var E=0;if(!o[y].size){var S=[],R=kt(o[y],0,S);E=100/(R+1),o[y].size=E;for(var T=0;T<S.length;++T)S[T].size=E}}for(var N=0;N<o.length;++N){var M=o[N];M.style.left=M.idx*M.size;for(var O=0,C=0;C<M.friends.length;++C){var P=M.friends[C].idx;O=O>P?O:P}O<=M.idx&&(M.size=100-M.idx*M.size);var I=M.idx===0?0:3;M.style.width="calc(".concat(M.size,"% - ").concat(I,"px)"),M.style.height="calc(".concat(M.style.height,"% - 2px)"),M.style.xOffset="calc(".concat(M.style.left,"% + ").concat(I,"px)")}return o}var et={overlap:Rt,"no-overlap":Ir};function Hr(n){return!!(n&&n.constructor&&n.call&&n.apply)}function Vr(n){n.events,n.minimumStartDifference,n.slotMetrics,n.accessors;var r=n.dayLayoutAlgorithm,t=r;return r in et&&(t=et[r]),Hr(t)?t.apply(this,arguments):[]}var Mt=function(n){function r(){return W(this,r),G(this,r,arguments)}return K(r,n),F(r,[{key:"render",value:function(){var e=this.props,a=e.renderSlot,o=e.resource,s=e.group,i=e.getters,l=e.components,u=l===void 0?{}:l,c=u.timeSlotWrapper,d=c===void 0?Z:c,m=i?i.slotGroupProp(s):{};return v.createElement("div",Object.assign({className:"rbc-timeslot-group"},m),s.map(function(h,f){var p=i?i.slotProp(h,o):{};return v.createElement(d,{key:f,value:h,resource:o},v.createElement("div",Object.assign({},p,{className:_("rbc-time-slot",p.className)}),a&&a(h,f)))}))}}])}($.Component);function ue(n){return typeof n=="string"?n:n+"%"}function Kr(n){var r=n.style,t=n.className,e=n.event,a=n.accessors,o=n.rtl,s=n.selected,i=n.label,l=n.continuesPrior,u=n.continuesAfter,c=n.getters,d=n.onClick,m=n.onDoubleClick,h=n.isBackgroundEvent,f=n.onKeyPress,p=n.components,g=p.event,w=p.eventWrapper,b=a.title(e),D=a.tooltip(e),y=a.end(e),E=a.start(e),S=c.eventProp(e,E,y,s),R=[v.createElement("div",{key:"1",className:"rbc-event-label"},i),v.createElement("div",{key:"2",className:"rbc-event-content"},g?v.createElement(g,{event:e,title:b}):b)],T=r.height,N=r.top,M=r.width,O=r.xOffset,C=A(A({},S.style),{},ne({top:ue(N),height:ue(T),width:ue(M)},o?"right":"left",ue(O)));return v.createElement(w,Object.assign({type:"time"},n),v.createElement("div",{role:"button",tabIndex:0,onClick:d,onDoubleClick:m,style:C,onKeyDown:f,title:D?(typeof i=="string"?i+": ":"")+D:void 0,className:_(h?"rbc-background-event":"rbc-event",t,S.className,{"rbc-selected":s,"rbc-event-continues-earlier":l,"rbc-event-continues-later":u})},R))}var Gr=function(r){var t=r.children,e=r.className,a=r.style,o=r.innerRef;return v.createElement("div",{className:e,style:a,ref:o},t)},qr=v.forwardRef(function(n,r){return v.createElement(Gr,Object.assign({},n,{innerRef:r}))}),jr=["dayProp"],Yr=["eventContainerWrapper"],Ot=function(n){function r(){var t;W(this,r);for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return t=G(this,r,[].concat(a)),t.state={selecting:!1,timeIndicatorPosition:null},t.intervalTriggered=!1,t.renderEvents=function(s){var i=s.events,l=s.isBackgroundEvent,u=t.props,c=u.rtl,d=u.selected,m=u.accessors,h=u.localizer,f=u.getters,p=u.components,g=u.step,w=u.timeslots,b=u.dayLayoutAlgorithm,D=u.resizable,y=t,E=y.slotMetrics,S=h.messages,R=Vr({events:i,accessors:m,slotMetrics:E,minimumStartDifference:Math.ceil(g*w/2),dayLayoutAlgorithm:b});return R.map(function(T,N){var M=T.event,O=T.style,C=m.end(M),P=m.start(M),I="eventTimeRangeFormat",L,z=E.startsBeforeDay(P),q=E.startsAfterDay(C);z?I="eventTimeRangeEndFormat":q&&(I="eventTimeRangeStartFormat"),z&&q?L=S.allDay:L=h.format({start:P,end:C},I);var re=z||E.startsBefore(P),Se=q||E.startsAfter(C);return v.createElement(Kr,{style:O,event:M,label:L,key:"evt_"+N,getters:f,rtl:c,components:p,continuesPrior:re,continuesAfter:Se,accessors:m,resource:t.props.resource,selected:be(M,d),onClick:function(B){return t._select(A(A(A({},M),t.props.resource&&{sourceResource:t.props.resource}),l&&{isBackgroundEvent:!0}),B)},onDoubleClick:function(B){return t._doubleClick(M,B)},isBackgroundEvent:l,onKeyPress:function(B){return t._keyPress(M,B)},resizable:D})})},t._selectable=function(){var s=t.containerRef.current,i=t.props,l=i.longPressThreshold,u=i.localizer,c=t._selector=new pt(function(){return s},{longPressThreshold:l}),d=function(p){var g=t.props.onSelecting,w=t.state||{},b=m(p),D=b.startDate,y=b.endDate;g&&(u.eq(w.startDate,D,"minutes")&&u.eq(w.endDate,y,"minutes")||g({start:D,end:y,resourceId:t.props.resource})===!1)||(t.state.start!==b.start||t.state.end!==b.end||t.state.selecting!==b.selecting)&&t.setState(b)},m=function(p){var g=t.slotMetrics.closestSlotFromPoint(p,te(s));t.state.selecting||(t._initialSlot=g);var w=t._initialSlot;u.lte(w,g)?g=t.slotMetrics.nextSlot(g):u.gt(w,g)&&(w=t.slotMetrics.nextSlot(w));var b=t.slotMetrics.getRange(u.min(w,g),u.max(w,g));return A(A({},b),{},{selecting:!0,top:"".concat(b.top,"%"),height:"".concat(b.height,"%")})},h=function(p,g){if(!fe(t.containerRef.current,p)){var w=m(p),b=w.startDate,D=w.endDate;t._selectSlot({startDate:b,endDate:D,action:g,box:p})}t.setState({selecting:!1})};c.on("selecting",d),c.on("selectStart",d),c.on("beforeSelect",function(f){if(t.props.selectable==="ignoreEvents")return!fe(t.containerRef.current,f)}),c.on("click",function(f){return h(f,"click")}),c.on("doubleClick",function(f){return h(f,"doubleClick")}),c.on("select",function(f){t.state.selecting&&(t._selectSlot(A(A({},t.state),{},{action:"select",bounds:f})),t.setState({selecting:!1}))}),c.on("reset",function(){t.state.selecting&&t.setState({selecting:!1})})},t._teardownSelectable=function(){t._selector&&(t._selector.teardown(),t._selector=null)},t._selectSlot=function(s){for(var i=s.startDate,l=s.endDate,u=s.action,c=s.bounds,d=s.box,m=i,h=[];t.props.localizer.lte(m,l);)h.push(m),m=new Date(+m+t.props.step*60*1e3);x(t.props.onSelectSlot,{slots:h,start:i,end:l,resourceId:t.props.resource,action:u,bounds:c,box:d})},t._select=function(){for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];x(t.props.onSelectEvent,i)},t._doubleClick=function(){for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];x(t.props.onDoubleClickEvent,i)},t._keyPress=function(){for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];x(t.props.onKeyPressEvent,i)},t.slotMetrics=Ve(t.props),t.containerRef=$.createRef(),t}return K(r,n),F(r,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(e,a){this.props.selectable&&!e.selectable&&this._selectable(),!this.props.selectable&&e.selectable&&this._teardownSelectable();var o=this.props,s=o.getNow,i=o.isNow,l=o.localizer,u=o.date,c=o.min,d=o.max,m=l.neq(e.getNow(),s(),"minutes");if(e.isNow!==i||m){if(this.clearTimeIndicatorInterval(),i){var h=!m&&l.eq(e.date,u,"minutes")&&a.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(h)}}else i&&(l.neq(e.min,c,"minutes")||l.neq(e.max,d,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var e=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!a&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){e.intervalTriggered=!0,e.positionTimeIndicator(),e.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var e=this.props,a=e.min,o=e.max,s=e.getNow,i=s();if(i>=a&&i<=o){var l=this.slotMetrics.getCurrentTimePosition(i);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:l})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var e=this.props,a=e.date,o=e.max,s=e.rtl,i=e.isNow,l=e.resource,u=e.accessors,c=e.localizer,d=e.getters,m=d.dayProp,h=U(d,jr),f=e.components,p=f.eventContainerWrapper,g=U(f,Yr);this.slotMetrics=this.slotMetrics.update(this.props);var w=this.slotMetrics,b=this.state,D=b.selecting,y=b.top,E=b.height,S=b.startDate,R=b.endDate,T={start:S,end:R},N=m(o),M=N.className,O=N.style,C=g.dayColumnWrapper||qr;return v.createElement(C,{ref:this.containerRef,date:a,style:O,className:_(M,"rbc-day-slot","rbc-time-column",i&&"rbc-now",i&&"rbc-today",D&&"rbc-slot-selecting"),slotMetrics:w,resource:l},w.groups.map(function(P,I){return v.createElement(Mt,{key:I,group:P,resource:l,getters:h,components:g})}),v.createElement(p,{localizer:c,resource:l,accessors:u,getters:h,components:g,slotMetrics:w},v.createElement("div",{className:_("rbc-events-container",s&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),D&&v.createElement("div",{className:"rbc-slot-selection",style:{top:y,height:E}},v.createElement("span",null,c.format(T,"selectRangeFormat"))),i&&this.intervalTriggered&&v.createElement("div",{className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}}))}}])}(v.Component);Ot.defaultProps={dragThroughEvents:!0,timeslots:2};function Xr(n){var r=n.min,t=n.max,e=n.localizer;return e.getTimezoneOffset(r)!==e.getTimezoneOffset(t)?{start:e.add(r,-1,"day"),end:e.add(t,-1,"day")}:{start:r,end:t}}var Ur=function(r){var t=r.min,e=r.max,a=r.timeslots,o=r.step,s=r.localizer,i=r.getNow,l=r.resource,u=r.components,c=r.getters,d=r.gutterRef,m=u.timeGutterWrapper,h=$.useMemo(function(){return Xr({min:t,max:e,localizer:s})},[t==null?void 0:t.toISOString(),e==null?void 0:e.toISOString(),s]),f=h.start,p=h.end,g=$.useState(Ve({min:f,max:p,timeslots:a,step:o,localizer:s})),w=ge(g,2),b=w[0],D=w[1];$.useEffect(function(){b&&D(b.update({min:f,max:p,timeslots:a,step:o,localizer:s}))},[f==null?void 0:f.toISOString(),p==null?void 0:p.toISOString(),a,o]);var y=$.useCallback(function(E,S){if(S)return null;var R=b.dateIsInGroup(i(),S);return v.createElement("span",{className:_("rbc-label",R&&"rbc-now")},s.format(E,"timeGutterFormat"))},[b,s,i]);return v.createElement(m,{slotMetrics:b},v.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:d},b.groups.map(function(E,S){return v.createElement(Mt,{key:S,group:E,resource:l,components:u,renderSlot:y,getters:c})})))},Br=v.forwardRef(function(n,r){return v.createElement(Ur,Object.assign({gutterRef:r},n))}),Zr=function(r){var t=r.label;return v.createElement(v.Fragment,null,t)},Jr=function(n){function r(){var t;W(this,r);for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return t=G(this,r,[].concat(a)),t.handleHeaderClick=function(s,i,l){l.preventDefault(),x(t.props.onDrillDown,[s,i])},t.renderRow=function(s){var i=t.props,l=i.events,u=i.rtl,c=i.selectable,d=i.getNow,m=i.range,h=i.getters,f=i.localizer,p=i.accessors,g=i.components,w=i.resizable,b=p.resourceId(s),D=s?l.filter(function(y){return p.resource(y)===b}):l;return v.createElement(pe,{isAllDay:!0,rtl:u,getNow:d,minRows:2,maxRows:t.props.allDayMaxRows+1,range:m,events:D,resourceId:b,className:"rbc-allday-cell",selectable:c,selected:t.props.selected,components:g,accessors:p,getters:h,localizer:f,onSelect:t.props.onSelectEvent,onShowMore:t.props.onShowMore,onDoubleClick:t.props.onDoubleClickEvent,onKeyPress:t.props.onKeyPressEvent,onSelectSlot:t.props.onSelectSlot,longPressThreshold:t.props.longPressThreshold,resizable:w})},t}return K(r,n),F(r,[{key:"renderHeaderCells",value:function(e){var a=this,o=this.props,s=o.localizer,i=o.getDrilldownView,l=o.getNow,u=o.getters.dayProp,c=o.components.header,d=c===void 0?St:c,m=l();return e.map(function(h,f){var p=i(h),g=s.format(h,"dayFormat"),w=u(h),b=w.className,D=w.style,y=v.createElement(d,{date:h,label:g,localizer:s});return v.createElement("div",{key:f,style:D,className:_("rbc-header",b,s.isSameDate(h,m)&&"rbc-today")},p?v.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(S){return a.handleHeaderClick(h,p,S)}},y):v.createElement("span",null,y))})}},{key:"render",value:function(){var e=this,a=this.props,o=a.width,s=a.rtl,i=a.resources,l=a.range,u=a.events,c=a.getNow,d=a.accessors,m=a.selectable,h=a.components,f=a.getters,p=a.scrollRef,g=a.localizer,w=a.isOverflowing,b=a.components,D=b.timeGutterHeader,y=b.resourceHeader,E=y===void 0?Zr:y,S=a.resizable,R={};w&&(R[s?"marginLeft":"marginRight"]="".concat(ot()-1,"px"));var T=i.groupEvents(u);return v.createElement("div",{style:R,ref:p,className:_("rbc-time-header",w&&"rbc-overflowing")},v.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:o,minWidth:o,maxWidth:o}},D&&v.createElement(D,null)),i.map(function(N,M){var O=ge(N,2),C=O[0],P=O[1];return v.createElement("div",{className:"rbc-time-header-content",key:C||M},P&&v.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(M)},v.createElement("div",{className:"rbc-header"},v.createElement(E,{index:M,label:d.resourceTitle(P),resource:P}))),v.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(l.length<=1?" rbc-time-header-cell-single-day":"")},e.renderHeaderCells(l)),v.createElement(pe,{isAllDay:!0,rtl:s,getNow:c,minRows:2,maxRows:e.props.allDayMaxRows+1,range:l,events:T.get(C)||[],resourceId:P&&C,className:"rbc-allday-cell",selectable:m,selected:e.props.selected,components:h,accessors:d,getters:f,localizer:g,onSelect:e.props.onSelectEvent,onShowMore:e.props.onShowMore,onDoubleClick:e.props.onDoubleClickEvent,onKeyDown:e.props.onKeyPressEvent,onSelectSlot:e.props.onSelectSlot,longPressThreshold:e.props.longPressThreshold,resizable:S}))}))}}])}(v.Component),Me={};function Qr(n,r){return{map:function(e){return n?n.map(function(a,o){return e([r.resourceId(a),a],o)}):[e([Me,null],0)]},groupEvents:function(e){var a=new Map;return n?(e.forEach(function(o){var s=r.resource(o)||Me;if(Array.isArray(s))s.forEach(function(l){var u=a.get(l)||[];u.push(o),a.set(l,u)});else{var i=a.get(s)||[];i.push(o),a.set(s,i)}}),a):(a.set(Me,e),a)}}}var ae=function(n){function r(t){var e;return W(this,r),e=G(this,r,[t]),e.handleScroll=function(a){e.scrollRef.current&&(e.scrollRef.current.scrollLeft=a.target.scrollLeft)},e.handleResize=function(){qe(e.rafHandle),e.rafHandle=at(e.checkOverflow)},e.handleKeyPressEvent=function(){e.clearSelection();for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];x(e.props.onKeyPressEvent,o)},e.handleSelectEvent=function(){e.clearSelection();for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];x(e.props.onSelectEvent,o)},e.handleDoubleClickEvent=function(){e.clearSelection();for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];x(e.props.onDoubleClickEvent,o)},e.handleShowMore=function(a,o,s,i,l){var u=e.props,c=u.popup,d=u.onDrillDown,m=u.onShowMore,h=u.getDrilldownView,f=u.doShowMoreDrillDown;if(e.clearSelection(),c){var p=st(s,e.containerRef.current);e.setState({overlay:{date:o,events:a,position:A(A({},p),{},{width:"200px"}),target:l}})}else f&&x(d,[o,h(o)||V.DAY]);x(m,[a,o,i])},e.handleSelectAllDaySlot=function(a,o){var s=e.props.onSelectSlot,i=new Date(a[0]),l=new Date(a[a.length-1]);l.setDate(a[a.length-1].getDate()+1),x(s,{slots:a,start:i,end:l,action:o.action,resourceId:o.resourceId})},e.overlayDisplay=function(){e.setState({overlay:null})},e.checkOverflow=function(){if(!e._updatingOverflow){var a=e.contentRef.current;if(a!=null&&a.scrollHeight){var o=a.scrollHeight>a.clientHeight;e.state.isOverflowing!==o&&(e._updatingOverflow=!0,e.setState({isOverflowing:o},function(){e._updatingOverflow=!1}))}}},e.memoizedResources=lt(function(a,o){return Qr(a,o)}),e.state={gutterWidth:void 0,isOverflowing:null},e.scrollRef=v.createRef(),e.contentRef=v.createRef(),e.containerRef=v.createRef(),e._scrollRatio=null,e.gutterRef=$.createRef(),e}return K(r,n),F(r,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),qe(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderEvents",value:function(e,a,o,s){var i=this,l=this.props,u=l.min,c=l.max,d=l.components,m=l.accessors,h=l.localizer,f=l.dayLayoutAlgorithm,p=this.memoizedResources(this.props.resources,m),g=p.groupEvents(a),w=p.groupEvents(o);return p.map(function(b,D){var y=ge(b,2),E=y[0],S=y[1];return e.map(function(R,T){var N=(g.get(E)||[]).filter(function(O){return h.inRange(R,m.start(O),m.end(O),"day")}),M=(w.get(E)||[]).filter(function(O){return h.inRange(R,m.start(O),m.end(O),"day")});return v.createElement(Ot,Object.assign({},i.props,{localizer:h,min:h.merge(R,u),max:h.merge(R,c),resource:S&&E,components:d,isNow:h.isSameDate(R,s),key:D+"-"+T,date:R,events:N,backgroundEvents:M,dayLayoutAlgorithm:f}))})})}},{key:"render",value:function(){var e,a=this.props,o=a.events,s=a.backgroundEvents,i=a.range,l=a.width,u=a.rtl,c=a.selected,d=a.getNow,m=a.resources,h=a.components,f=a.accessors,p=a.getters,g=a.localizer,w=a.min,b=a.max,D=a.showMultiDayTimes,y=a.longPressThreshold,E=a.resizable;l=l||this.state.gutterWidth;var S=i[0],R=i[i.length-1];this.slots=i.length;var T=[],N=[],M=[];return o.forEach(function(O){if(se(O,S,R,f,g)){var C=f.start(O),P=f.end(O);f.allDay(O)||g.startAndEndAreDateOnly(C,P)||!D&&!g.isSameDate(C,P)?T.push(O):N.push(O)}}),s.forEach(function(O){se(O,S,R,f,g)&&M.push(O)}),T.sort(function(O,C){return ze(O,C,f,g)}),v.createElement("div",{className:_("rbc-time-view",m&&"rbc-time-view-resources"),ref:this.containerRef},v.createElement(Jr,{range:i,events:T,width:l,rtl:u,getNow:d,localizer:g,selected:c,allDayMaxRows:this.props.showAllEvents?1/0:(e=this.props.allDayMaxRows)!==null&&e!==void 0?e:1/0,resources:this.memoizedResources(m,f),selectable:this.props.selectable,accessors:f,getters:p,components:h,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:y,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:E}),this.props.popup&&this.renderOverlay(),v.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},v.createElement(Br,{date:S,ref:this.gutterRef,localizer:g,min:g.merge(S,w),max:g.merge(S,b),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:h,className:"rbc-time-gutter",getters:p}),this.renderEvents(i,N,M,d())))}},{key:"renderOverlay",value:function(){var e,a,o=this,s=(e=(a=this.state)===null||a===void 0?void 0:a.overlay)!==null&&e!==void 0?e:{},i=this.props,l=i.accessors,u=i.localizer,c=i.components,d=i.getters,m=i.selected,h=i.popupOffset,f=i.handleDragStart,p=function(){return o.setState({overlay:null})};return v.createElement(He,{overlay:s,accessors:l,localizer:u,components:c,getters:d,selected:m,popupOffset:h,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:f,show:!!s.position,overlayDisplay:this.overlayDisplay,onHide:p})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var e=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var a,o=(a=e.gutterRef)!==null&&a!==void 0&&a.current?Ae(e.gutterRef.current):void 0;o&&e.state.gutterWidth!==o&&e.setState({gutterWidth:o})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var e=this.contentRef.current;e.scrollTop=e.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,a=e.min,o=e.max,s=e.scrollToTime,i=e.localizer,l=i.diff(i.merge(s,a),s,"milliseconds"),u=i.diff(a,o,"milliseconds");this._scrollRatio=l/u}}])}($.Component);ae.defaultProps={step:30,timeslots:2};var en=["date","localizer","min","max","scrollToTime","enableAutoScroll"],De=function(n){function r(){return W(this,r),G(this,r,arguments)}return K(r,n),F(r,[{key:"render",value:function(){var e=this.props,a=e.date,o=e.localizer,s=e.min,i=s===void 0?o.startOf(new Date,"day"):s,l=e.max,u=l===void 0?o.endOf(new Date,"day"):l,c=e.scrollToTime,d=c===void 0?o.startOf(new Date,"day"):c,m=e.enableAutoScroll,h=m===void 0?!0:m,f=U(e,en),p=r.range(a,{localizer:o});return v.createElement(ae,Object.assign({},f,{range:p,eventOffset:10,localizer:o,min:i,max:u,scrollToTime:d,enableAutoScroll:h}))}}])}(v.Component);De.range=function(n,r){var t=r.localizer;return[t.startOf(n,"day")]};De.navigate=function(n,r,t){var e=t.localizer;switch(r){case j.PREVIOUS:return e.add(n,-1,"day");case j.NEXT:return e.add(n,1,"day");default:return n}};De.title=function(n,r){var t=r.localizer;return t.format(n,"dayHeaderFormat")};var tn=["date","localizer","min","max","scrollToTime","enableAutoScroll"],Q=function(n){function r(){return W(this,r),G(this,r,arguments)}return K(r,n),F(r,[{key:"render",value:function(){var e=this.props,a=e.date,o=e.localizer,s=e.min,i=s===void 0?o.startOf(new Date,"day"):s,l=e.max,u=l===void 0?o.endOf(new Date,"day"):l,c=e.scrollToTime,d=c===void 0?o.startOf(new Date,"day"):c,m=e.enableAutoScroll,h=m===void 0?!0:m,f=U(e,tn),p=r.range(a,this.props);return v.createElement(ae,Object.assign({},f,{range:p,eventOffset:15,localizer:o,min:i,max:u,scrollToTime:d,enableAutoScroll:h}))}}])}(v.Component);Q.defaultProps=ae.defaultProps;Q.navigate=function(n,r,t){var e=t.localizer;switch(r){case j.PREVIOUS:return e.add(n,-1,"week");case j.NEXT:return e.add(n,1,"week");default:return n}};Q.range=function(n,r){var t=r.localizer,e=t.startOfWeek(),a=t.startOf(n,"week",e),o=t.endOf(n,"week",e);return t.range(a,o)};Q.title=function(n,r){var t=r.localizer,e=Q.range(n,{localizer:t}),a=tt(e),o=a[0],s=a.slice(1);return t.format({start:o,end:s.pop()},"dayRangeHeaderFormat")};var rn=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function Ke(n,r){return Q.range(n,r).filter(function(t){return[6,0].indexOf(t.getDay())===-1})}var le=function(n){function r(){return W(this,r),G(this,r,arguments)}return K(r,n),F(r,[{key:"render",value:function(){var e=this.props,a=e.date,o=e.localizer,s=e.min,i=s===void 0?o.startOf(new Date,"day"):s,l=e.max,u=l===void 0?o.endOf(new Date,"day"):l,c=e.scrollToTime,d=c===void 0?o.startOf(new Date,"day"):c,m=e.enableAutoScroll,h=m===void 0?!0:m,f=U(e,rn),p=Ke(a,this.props);return v.createElement(ae,Object.assign({},f,{range:p,eventOffset:15,localizer:o,min:i,max:u,scrollToTime:d,enableAutoScroll:h}))}}])}(v.Component);le.defaultProps=ae.defaultProps;le.range=Ke;le.navigate=Q.navigate;le.title=function(n,r){var t=r.localizer,e=Ke(n,{localizer:t}),a=tt(e),o=a[0],s=a.slice(1);return t.format({start:o,end:s.pop()},"dayRangeHeaderFormat")};function ee(n){var r=n.accessors,t=n.components,e=n.date,a=n.events,o=n.getters,s=n.length,i=n.localizer,l=n.onDoubleClickEvent,u=n.onSelectEvent,c=n.selected,d=$.useRef(null),m=$.useRef(null),h=$.useRef(null),f=$.useRef(null),p=$.useRef(null);$.useEffect(function(){b()});var g=function(R,T,N){var M=t.event,O=t.date;return T=T.filter(function(C){return se(C,i.startOf(R,"day"),i.endOf(R,"day"),r,i)}),T.map(function(C,P){var I=r.title(C),L=r.end(C),z=r.start(C),q=o.eventProp(C,z,L,be(C,c)),re=P===0&&i.format(R,"agendaDateFormat"),Se=P===0?v.createElement("td",{rowSpan:T.length,className:"rbc-agenda-date-cell"},O?v.createElement(O,{day:R,label:re}):re):!1;return v.createElement("tr",{key:N+"_"+P,className:q.className,style:q.style},Se,v.createElement("td",{className:"rbc-agenda-time-cell"},w(R,C)),v.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(B){return u&&u(C,B)},onDoubleClick:function(B){return l&&l(C,B)}},M?v.createElement(M,{event:C,title:I}):I))},[])},w=function(R,T){var N="",M=t.time,O=i.messages.allDay,C=r.end(T),P=r.start(T);return r.allDay(T)||(i.eq(P,C)?O=i.format(P,"agendaTimeFormat"):i.isSameDate(P,C)?O=i.format({start:P,end:C},"agendaTimeRangeFormat"):i.isSameDate(R,P)?O=i.format(P,"agendaTimeFormat"):i.isSameDate(R,C)&&(O=i.format(C,"agendaTimeFormat"))),i.gt(R,P,"day")&&(N="rbc-continues-prior"),i.lt(R,C,"day")&&(N+=" rbc-continues-after"),v.createElement("span",{className:N.trim()},M?v.createElement(M,{event:T,day:R,label:O}):O)},b=function(){if(p.current){var R=d.current,T=p.current.firstChild;if(T){var N=f.current.scrollHeight>f.current.clientHeight,M=[],O=M;M=[Ae(T.children[0]),Ae(T.children[1])],(O[0]!==M[0]||O[1]!==M[1])&&(m.current.style.width=M[0]+"px",h.current.style.width=M[1]+"px"),N?(Gt(R,"rbc-header-overflowing"),R.style.marginRight=ot()+"px"):qt(R,"rbc-header-overflowing")}}},D=i.messages,y=i.add(e,s,"day"),E=i.range(e,y,"day");return a=a.filter(function(S){return se(S,i.startOf(e,"day"),i.endOf(y,"day"),r,i)}),a.sort(function(S,R){return+r.start(S)-+r.start(R)}),v.createElement("div",{className:"rbc-agenda-view"},a.length!==0?v.createElement(v.Fragment,null,v.createElement("table",{ref:d,className:"rbc-agenda-table"},v.createElement("thead",null,v.createElement("tr",null,v.createElement("th",{className:"rbc-header",ref:m},D.date),v.createElement("th",{className:"rbc-header",ref:h},D.time),v.createElement("th",{className:"rbc-header"},D.event)))),v.createElement("div",{className:"rbc-agenda-content",ref:f},v.createElement("table",{className:"rbc-agenda-table"},v.createElement("tbody",{ref:p},E.map(function(S,R){return g(S,a,R)}))))):v.createElement("span",{className:"rbc-agenda-empty"},D.noEventsInRange))}ee.defaultProps={length:30};ee.range=function(n,r){var t=r.length,e=t===void 0?ee.defaultProps.length:t,a=r.localizer,o=a.add(n,e,"day");return{start:n,end:o}};ee.navigate=function(n,r,t){var e=t.length,a=e===void 0?ee.defaultProps.length:e,o=t.localizer;switch(r){case j.PREVIOUS:return o.add(n,-a,"day");case j.NEXT:return o.add(n,a,"day");default:return n}};ee.title=function(n,r){var t=r.length,e=t===void 0?ee.defaultProps.length:t,a=r.localizer,o=a.add(n,e,"day");return a.format({start:n,end:o},"agendaHeaderFormat")};var ve=ne(ne(ne(ne(ne({},V.MONTH,Ee),V.WEEK,Q),V.WORK_WEEK,le),V.DAY,De),V.AGENDA,ee),nn=["action","date","today"];function an(n,r){var t=r.action,e=r.date,a=r.today,o=U(r,nn);switch(n=typeof n=="string"?ve[n]:n,t){case j.TODAY:e=a||new Date;break;case j.DATE:break;default:me(n&&typeof n.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),e=n.navigate(e,t,o)}return e}var on=function(n){function r(){var t;W(this,r);for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return t=G(this,r,[].concat(a)),t.navigate=function(s){t.props.onNavigate(s)},t.view=function(s){t.props.onView(s)},t}return K(r,n),F(r,[{key:"render",value:function(){var e=this.props,a=e.localizer.messages,o=e.label;return v.createElement("div",{className:"rbc-toolbar"},v.createElement("span",{className:"rbc-btn-group"},v.createElement("button",{type:"button",onClick:this.navigate.bind(null,j.TODAY)},a.today),v.createElement("button",{type:"button",onClick:this.navigate.bind(null,j.PREVIOUS)},a.previous),v.createElement("button",{type:"button",onClick:this.navigate.bind(null,j.NEXT)},a.next)),v.createElement("span",{className:"rbc-toolbar-label"},o),v.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(a)))}},{key:"viewNamesGroup",value:function(e){var a=this,o=this.props.views,s=this.props.view;if(o.length>1)return o.map(function(i){return v.createElement("button",{type:"button",key:i,className:_({"rbc-active":s===i}),onClick:a.view.bind(null,i)},e[i])})}}])}(v.Component);function sn(n,r){var t=null;return typeof r=="function"?t=r(n):typeof r=="string"&&_e(n)==="object"&&n!=null&&r in n&&(t=n[r]),t}var J=function(r){return function(t){return sn(t,r)}},ln=["view","date","getNow","onNavigate"],cn=["view","toolbar","events","backgroundEvents","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function Tt(n){if(Array.isArray(n))return n;for(var r=[],t=0,e=Object.entries(n);t<e.length;t++){var a=ge(e[t],2),o=a[0],s=a[1];s&&r.push(o)}return r}function un(n,r){var t=r.views,e=Tt(t);return e.indexOf(n)!==-1}var Ct=function(n){function r(){var t;W(this,r);for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return t=G(this,r,[].concat(a)),t.getViews=function(){var s=t.props.views;return Array.isArray(s)?Wt(s,function(i,l){return i[l]=ve[l]},{}):_e(s)==="object"?It(s,function(i,l){return i===!0?ve[l]:i}):ve},t.getView=function(){var s=t.getViews();return s[t.props.view]},t.getDrilldownView=function(s){var i=t.props,l=i.view,u=i.drilldownView,c=i.getDrilldownView;return c?c(s,l,Object.keys(t.getViews())):u},t.handleRangeChange=function(s,i,l){var u=t.props,c=u.onRangeChange,d=u.localizer;c&&i.range&&c(i.range(s,{localizer:d}),l)},t.handleNavigate=function(s,i){var l=t.props,u=l.view,c=l.date,d=l.getNow,m=l.onNavigate,h=U(l,ln),f=t.getView(),p=d();c=an(f,A(A({},h),{},{action:s,date:i||c||p,today:p})),m(c,u,s),t.handleRangeChange(c,f)},t.handleViewChange=function(s){s!==t.props.view&&un(s,t.props)&&t.props.onView(s);var i=t.getViews();t.handleRangeChange(t.props.date||t.props.getNow(),i[s],s)},t.handleSelectEvent=function(){for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];x(t.props.onSelectEvent,i)},t.handleDoubleClickEvent=function(){for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];x(t.props.onDoubleClickEvent,i)},t.handleKeyPressEvent=function(){for(var s=arguments.length,i=new Array(s),l=0;l<s;l++)i[l]=arguments[l];x(t.props.onKeyPressEvent,i)},t.handleSelectSlot=function(s){x(t.props.onSelectSlot,s)},t.handleDrillDown=function(s,i){var l=t.props.onDrillDown;if(l){l(s,i,t.drilldownView);return}i&&t.handleViewChange(i),t.handleNavigate(j.DATE,s)},t.state={context:r.getContext(t.props)},t}return K(r,n),F(r,[{key:"render",value:function(){var e=this.props,a=e.view,o=e.toolbar,s=e.events,i=e.backgroundEvents,l=e.style,u=e.className,c=e.elementProps,d=e.date,m=e.getNow,h=e.length,f=e.showMultiDayTimes,p=e.onShowMore,g=e.doShowMoreDrillDown;e.components,e.formats,e.messages,e.culture;var w=U(e,cn);d=d||m();var b=this.getView(),D=this.state.context,y=D.accessors,E=D.components,S=D.getters,R=D.localizer,T=D.viewNames,N=E.toolbar||on,M=b.title(d,{localizer:R,length:h});return v.createElement("div",Object.assign({},c,{className:_(u,"rbc-calendar",w.rtl&&"rbc-rtl"),style:l}),o&&v.createElement(N,{date:d,view:a,views:T,label:M,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:R}),v.createElement(b,Object.assign({},w,{events:s,backgroundEvents:i,date:d,getNow:m,length:h,localizer:R,getters:S,components:E,accessors:y,showMultiDayTimes:f,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:p,doShowMoreDrillDown:g})))}}],[{key:"getDerivedStateFromProps",value:function(e){return{context:r.getContext(e)}}},{key:"getContext",value:function(e){var a=e.startAccessor,o=e.endAccessor,s=e.allDayAccessor,i=e.tooltipAccessor,l=e.titleAccessor,u=e.resourceAccessor,c=e.resourceIdAccessor,d=e.resourceTitleAccessor,m=e.eventPropGetter,h=e.backgroundEventPropGetter,f=e.slotPropGetter,p=e.slotGroupPropGetter,g=e.dayPropGetter,w=e.view,b=e.views,D=e.localizer,y=e.culture,E=e.messages,S=E===void 0?{}:E,R=e.components,T=R===void 0?{}:R,N=e.formats,M=N===void 0?{}:N,O=Tt(b),C=mr(S);return{viewNames:O,localizer:dr(D,y,M,C),getters:{eventProp:function(){return m&&m.apply(void 0,arguments)||{}},backgroundEventProp:function(){return h&&h.apply(void 0,arguments)||{}},slotProp:function(){return f&&f.apply(void 0,arguments)||{}},slotGroupProp:function(){return p&&p.apply(void 0,arguments)||{}},dayProp:function(){return g&&g.apply(void 0,arguments)||{}}},components:Lt(T[w]||{},Ft(T,O),{eventWrapper:Z,backgroundEventWrapper:Z,eventContainerWrapper:Z,dateCellWrapper:Z,weekWrapper:Z,timeSlotWrapper:Z,timeGutterWrapper:Z}),accessors:{start:J(a),end:J(o),allDay:J(s),tooltip:J(i),title:J(l),resource:J(u),resourceId:J(c),resourceTitle:J(d)}}}}])}(v.Component);Ct.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:V.MONTH,views:[V.MONTH,V.WEEK,V.DAY,V.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:V.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var On=Nt(Ct,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),dn=function(r,t,e){var a=r.start,o=r.end;return"".concat(e.format(a,"P",t)," – ").concat(e.format(o,"P",t))},Oe=function(r,t,e){var a=r.start,o=r.end;return"".concat(e.format(a,"p",t)," – ").concat(e.format(o,"p",t))},vn=function(r,t,e){var a=r.start;return"".concat(e.format(a,"h:mma",t)," – ")},mn=function(r,t,e){var a=r.end;return" – ".concat(e.format(a,"h:mma",t))},hn=function(r,t,e){var a=r.start,o=r.end;return"".concat(e.format(a,"MMMM dd",t)," – ").concat(e.format(o,ie(a,o,"month")?"dd":"MMMM dd",t))},fn={dateFormat:"dd",dayFormat:"dd eee",weekdayFormat:"cccc",selectRangeFormat:Oe,eventTimeRangeFormat:Oe,eventTimeRangeStartFormat:vn,eventTimeRangeEndFormat:mn,timeGutterFormat:"p",monthHeaderFormat:"MMMM yyyy",dayHeaderFormat:"cccc MMM dd",dayRangeHeaderFormat:hn,agendaHeaderFormat:dn,agendaDateFormat:"ccc MMM dd",agendaTimeFormat:"p",agendaTimeRangeFormat:Oe},Tn=function(r){var t=r.startOfWeek,e=r.getDay,a=r.format,o=r.locales;return new ur({formats:fn,firstOfWeek:function(i){return e(t(new Date,{locale:o[i]}))},format:function(i,l,u){return a(new Date(i),l,{locale:o[u]})}})};export{On as C,Tn as d};
